import{e as I,a as L}from"./cast-4d1aa82d.js";import"./Error-9392329b.js";import"./ensureType-8c80e8c7.js";import"./typedArrayUtil-c81d173a.js";import"./string-bf9c68ed.js";import{n as M}from"./BitmapTileContainer-49487a9f.js";const $=t=>{let e=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new M(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){var i;this.container.removeChild(this._bitmapView),(i=this._bitmapView)==null||i.removeAllChildren()}};return e=I([L("esri.views.2d.layers.BitmapTileLayerView2D")],e),e};function C(t){return t instanceof HTMLImageElement?t.naturalWidth:t.width}function T(t){return t instanceof HTMLImageElement?t.naturalHeight:t.height}function x(t,e,i,n){if(i.level===n.level)return e;const o=t.tileInfo.size,a=t.getTileResolution(i.level),l=t.getTileResolution(n.level);let r=t.getLODInfoAt(n.level);const c=r.getXForColumn(n.col),d=r.getYForRow(n.row);r=t.getLODInfoAt(i.level);const u=r.getXForColumn(i.col),w=r.getYForRow(i.row),s=C(e)/o[0],h=T(e)/o[1],g=Math.round(s*((c-u)/a)),f=Math.round(h*(-(d-w)/a)),p=Math.round(s*o[0]*(l/a)),v=Math.round(h*o[1]*(l/a)),m=V(o);return m.getContext("2d").drawImage(e,g,f,p,v,0,0,o[0],o[1]),m}function V(t){const e=document.createElement("canvas");return[e.width,e.height]=t,e}export{x as n,V as o,$ as t};
