import{e as a,l as ji,a as I,v as L,y as c,u as Yl,s as ye,t as xt,b as Ql,c as Xl,x as Cr,A as fi,d as Jl,o as ec,n as ra,f as jn,g as Tr,h as Er}from"./cast-4d1aa82d.js";import{s as xr,x as Cs}from"./Basemap-5520ad34.js";import{_ as w}from"./preload-helper-41c905a7.js";import{l as Tt}from"./Color-46910694.js";import{j as G}from"./Collection-54857936.js";import{n as tc}from"./collectionUtils-cc5781ab.js";import{o as ic}from"./compilerUtils-db2fe354.js";import{s as S,a as $,b as Ts}from"./Error-9392329b.js";import{p as Es,r as _i,h as xe}from"./string-bf9c68ed.js";import{m as xs}from"./Loadable-e19fba09.js";import{l as nc}from"./loadAll-8b24919b.js";import{f as nt,E as Et,y as sc,i as Vt,g as Ni,U as Xs,j as oa,b as rc,L as oc,A as aa,a as la,v as Gn,p as ac,C as lc,t as Fn}from"./promiseUtils-3ce2a460.js";import{T as $r,b as ca,a as bt,t as Ji,r as cc,n as Rn}from"./ensureType-8c80e8c7.js";import{r as da,w as X,o as dc,R as ha,E as Sn,a as vi,f as Js,I as ua,$ as hc,p as uc,b as pc,c as pa,d as mc,M as gc}from"./Extent-52b65909.js";import{t as P,r as v,a as ae,u as fc,s as Ar,o as Pi,e as Ie,c as _c,i as yc,p as rt,w as $s,x as vc}from"./typedArrayUtil-c81d173a.js";import{o as wc}from"./enumeration-de0a766e.js";import{r as bc,n as Mc}from"./opacityUtils-a1e441cd.js";import{l as bn}from"./CollectionFlattener-8de7cbfd.js";import{n as Ln}from"./Evented-d69b5d66.js";import{v as ma,w as Ic}from"./layerUtils-394e7a48.js";import{U as Cc}from"./request-16c6134d.js";import{l as Tc,d as Ec,t as xc}from"./TablesMixin-54823533.js";import{g as jt}from"./Graphic-b6696507.js";import{i as ga}from"./Clonable-ad03ca71.js";import{s as $c}from"./Cyclical-e9c94d8a.js";import{a as yi,b as Ac,r as fa,g as kc}from"./mathUtils-505ef34b.js";import{n as Pc}from"./geometry-8c15a791.js";import{v as kr}from"./jsonUtils-e2434b33.js";import{l as y,h as V,a as Pe,f as ot,U as qi,j as er,w as kt}from"./reactiveUtils-989a8d7f.js";import{c as me}from"./screenUtils-7afeb41c.js";import{c as Fc}from"./workers-9e1006b9.js";import{e as Hi,A as Dn,r as Gi,t as On}from"./projection-03688518.js";import{p as Rc,j as Sc}from"./TileInfo-3f2956cd.js";import{i as As,e as le,W as ce,n as m,v as Mn,h as Pr,f as qe,p as Lc,k as Dc,a as _a,t as Oc,w as Vc,b as ya,r as Fr,c as va,o as Rr}from"./widget-b2a8e375.js";import{c as wa,a as Vn,d as ba}from"./HandleOwner-1ffa4597.js";import{s as Be}from"./intl-45f8f1a9.js";import{s as Sr}from"./byteSizeEstimations-90c5a50d.js";import{m as tr,L as In,u as Nc,S as Ma}from"./number-b98554af.js";import{a as zc}from"./AttachmentInfo-12f14212.js";import{c as Lr}from"./AttachmentQuery-dffd8fdc.js";import{x as Bc,i as Ia,h as qc,a as Hc}from"./fieldUtils-c41301b0.js";import{u as Uc,i as Wc,c as Ca,a as jc,I as Gc,b as Ta,d as Zc,e as Kc,f as Zi,g as Yc,h as Qc}from"./PopupTemplate-7c042eda.js";import{a as Xc}from"./assets-86d142ff.js";import"./LegendOptions-6e5321d3.js";import{j as Qt,F as Jc,S as Zn,J as ed,N as td}from"./utils-285aaf9a.js";import{S as id}from"./symbols-426355d5.js";import{a as nd}from"./jsonUtils-714f7856.js";import{m as sd,x as Kn}from"./Query-8c2b9d22.js";import{s as Yn}from"./executeQueryJSON-ad10aa61.js";import"./featureConversionUtils-93a98860.js";import{o as rd,v as od}from"./Polyline-7f90e3cc.js";import"./normalizeUtils-08ce1e14.js";import"./pbf-9196f6ce.js";import"./FeatureSet-a47eef0a.js";import ks from"./RelationshipQuery-80632d4c.js";import"./TopFeaturesQuery-e56e9bfe.js";import{l as Ea,s as ad}from"./locale-30120714.js";import ld from"./FeatureLayer-3b171605.js";import{s as xa,i as ir}from"./Identifiable-a49d7533.js";import{b as Dr}from"./Layer-5bf3596f.js";import{h as cd,c as $a,f as Aa,e as nr,i as Cn,M as dd,r as ka,n as hd}from"./mat2d-795519e1.js";import"./Portal-fe1a007c.js";import"./persistableUrlUtils-abff3ce1.js";import"./PortalGroup-45834c06.js";import{e as Or}from"./Queue-4939205d.js";import{t as ud,R as pd,D as md}from"./Scheduler-05bc8017.js";import{T as gd}from"./TimeExtent-0fb637c6.js";import{j as Pa,b as fd}from"./asyncUtils-d59cad3c.js";import{m as _d,_ as yd}from"./Promise-24c50191.js";import{l as vd,i as Fa,a as Vr}from"./GraphicsCollection-6cd24d14.js";import{v as sr}from"./HeightModelInfo-a5f98ab4.js";import{a as Ra}from"./TimeReference-d5a14980.js";import{d as wd}from"./arcgisLayerUrl-824ee458.js";import{l as Nr}from"./ViewingMode-fb6259a5.js";import{t as Ps,r as bd}from"./unitBezier-881ac1eb.js";import{o as Fs,v as zr,y as Md,j as Id,q as Br,C as Sa,l as Nn,r as re,z as et,g as Cd,a as Tn,s as Td,m as Ed}from"./vec2-3a431caf.js";import{r as xd,n as te}from"./vec2f64-22afc56f.js";import{s as $d,r as Ad,M as qr,h as kd,i as Pd}from"./mat3-5b850236.js";import{e as Qn}from"./mat3f32-6c416b1c.js";import{t as Hr}from"./vec2f32-eaf29605.js";import"./TileStrategy-cb3a7d25.js";import{d as Fd,h as Rd}from"./TileStore-4f504952.js";import"./TileKey-3acb01a1.js";import{l as Sd}from"./capabilities-55572a33.js";import{r as Ld}from"./context-util-2fc70f17.js";import{L as Dd}from"./WebTileLayer-cf969b4c.js";import{_ as Od,r as Ur,o as Vd,a as Nd,A as zd,N as Wr,b as Bd,ap as jr}from"./index-0970c694.js";var Rs;let an=Rs=class extends ji{constructor(i){super(i),this.type="none"}clone(){return new Rs({type:this.type})}};a([wc({none:"none",stayAbove:"stay-above"})],an.prototype,"type",void 0),an=Rs=a([I("esri.ground.NavigationConstraint")],an);let H=class extends L{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};a([c()],H.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),a([c()],H.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),a([c()],H.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),a([c()],H.prototype,"DECONFLICTOR_SHOW_GRID",void 0),a([c()],H.prototype,"LABELS_SHOW_BORDER",void 0),a([c()],H.prototype,"TEXT_SHOW_BASELINE",void 0),a([c()],H.prototype,"TEXT_SHOW_BORDER",void 0),a([c()],H.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),a([c()],H.prototype,"OVERLAY_SHOW_CENTER",void 0),a([c()],H.prototype,"SHOW_POI",void 0),a([c()],H.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),a([c()],H.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),a([c()],H.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),a([c()],H.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),a([c()],H.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),a([c()],H.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),a([c()],H.prototype,"I3S_TREE_SHOW_TILES",void 0),a([c()],H.prototype,"I3S_SHOW_MODIFICATIONS",void 0),a([c()],H.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),a([c()],H.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),a([c()],H.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),a([c()],H.prototype,"LINE_WIREFRAMES",void 0),a([c()],H.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),H=a([I("esri.views.3d.support.DebugFlags")],H);const qd=new H;var Ss;let Re=Ss=class extends Yl(xs){constructor(i){super(i),this.opacity=1,this.shading=!qd.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new G;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&S.getLogger(this.declaredClass).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},t=n=>{n.parent=null};this.layers.on("after-add",n=>e(n.item)),this.layers.on("after-remove",n=>t(n.item))}initialize(){this.when().catch(i=>{S.getLogger(this.declaredClass).error("#load()","Failed to load ground",i)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const i=this.layers.removeAll();for(const e of i)e.destroy();this.layers.destroy()}normalizeCtorArgs(i){return i&&"resourceInfo"in i&&(this._set("resourceInfo",i.resourceInfo),delete(i={...i}).resourceInfo),i}set layers(i){this._set("layers",tc(i,this._get("layers")))}writeLayers(i,e,t,n){const s=[];i&&(n={...n,layerContainerType:"ground"},i.forEach(r=>{if("write"in r){const o={};ic(r)().write(o,n)&&s.push(o)}else n&&n.messages&&n.messages.push(new $("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),e.layers=s}load(i){return this.addResolvingPromise(this._loadFromSource(i)),Promise.resolve(this)}loadAll(){return nc(this,i=>{i(this.layers)})}async queryElevation(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await w(()=>import("./ElevationQuery-d5d933e6.js"),["./ElevationQuery-d5d933e6.js","./asyncUtils-d59cad3c.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./projection-03688518.js","./preload-helper-41c905a7.js","./mathUtils-505ef34b.js","./SimpleObservable-7e8b69a3.js","./mat4-63147b80.js","./assets-86d142ff.js","./request-16c6134d.js","./zscale-92e5f59b.js","./aaBoundingRect-062d7c89.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./TileInfo-3f2956cd.js"],import.meta.url);nt(e);const n=new t,s=this.layers.filter(Gr).toArray();return n.queryAll(s,i,e)}async createElevationSampler(i,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:t}=await w(()=>import("./ElevationQuery-d5d933e6.js"),["./ElevationQuery-d5d933e6.js","./asyncUtils-d59cad3c.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./projection-03688518.js","./preload-helper-41c905a7.js","./mathUtils-505ef34b.js","./SimpleObservable-7e8b69a3.js","./mat4-63147b80.js","./assets-86d142ff.js","./request-16c6134d.js","./zscale-92e5f59b.js","./aaBoundingRect-062d7c89.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./TileInfo-3f2956cd.js"],import.meta.url);nt(e);const n=new t,s=this.layers.filter(Gr).toArray();return n.createSamplerAll(s,i,e)}clone(){const i={opacity:this.opacity,surfaceColor:Es(this.surfaceColor),navigationConstraint:Es(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(i.loadStatus="loaded"),new Ss({resourceInfo:this.resourceInfo}).set(i)}read(i,e){this.resourceInfo||this._set("resourceInfo",{data:i,context:e}),super.read(i,e)}_loadFromSource(i){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,i):Promise.resolve()}_loadLayersFromJSON(i,e,t){const n=e&&e.origin||"web-scene",s=e&&e.portal||null,r=e&&e.url||null;return w(()=>import("./layersCreator-f6bd138b.js"),["./layersCreator-f6bd138b.js","./Collection-54857936.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./lazyLayerLoader-4953a1fd.js","./preload-helper-41c905a7.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./request-16c6134d.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./Extent-52b65909.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./portalLayers-935b3acf.js","./layerUtils-394e7a48.js","./layersLoader-6356f40d.js","./Layer-5bf3596f.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Identifiable-a49d7533.js","./arcgisLayerUrl-824ee458.js","./persistableUrlUtils-abff3ce1.js","./fetchService-530f3f3c.js","./jsonContext-5181ee97.js","./portalItemUtils-9126718d.js","./projection-03688518.js","./mathUtils-505ef34b.js","./mat4-63147b80.js","./zscale-92e5f59b.js","./styleUtils-30cd950e.js","./asyncUtils-d59cad3c.js"],import.meta.url).then(({populateOperationalLayers:o})=>{nt(t);const l=[];if(i.layers&&Array.isArray(i.layers)){const d={context:{origin:n,url:r,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};l.push(o(this.layers,i.layers,d))}return Et(l)}).then(()=>{})}};function Hd(i){return i&&"createElevationSampler"in i}function Gr(i){return i.type==="elevation"||Hd(i)}a([c({json:{read:!1}})],Re.prototype,"layers",null),a([da("layers")],Re.prototype,"writeLayers",null),a([c({readOnly:!0})],Re.prototype,"resourceInfo",void 0),a([c({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:$r,read:{reader:bc,source:"transparency"},write:{writer:(i,e)=>{e.transparency=Mc(i)},target:"transparency"}}})],Re.prototype,"opacity",void 0),a([c({type:Boolean,nonNullable:!0,json:{read:!1}})],Re.prototype,"shading",void 0),a([c({type:Tt,json:{type:[$r],write:(i,e)=>{e.surfaceColor=i.toJSON().slice(0,3)}}})],Re.prototype,"surfaceColor",void 0),a([c({type:an,json:{write:!0}})],Re.prototype,"navigationConstraint",void 0),Re=Ss=a([I("esri.Ground")],Re);const En=Re;function Ud(i){var e,t;return!(!(i!=null&&i.loaded)||!((t=(e=ma(i))==null?void 0:e.operations)!=null&&t.supportsEditing)||"editingEnabled"in i&&!Ic(i))}const Zr=S.getLogger("esri.support.basemapUtils");function Wd(){return{}}function jd(i){for(const e in i){const t=i[e];(t==null?void 0:t.destroyed)===!1&&t.destroy(),delete i[e]}}function Gd(i,e){let t;if(typeof i=="string"){if(!(i in xr)){const n=Object.entries(xr).filter(([s,r])=>Ts.apiKey&&!r.classic||!Ts.apiKey&&r.classic&&!r.deprecated).map(([s])=>`"${s}"`).join(", ");return Zr.warn(`Unable to find basemap definition for: ${i}. Try one of these: ${n}`),null}e&&(t=e[i]),t||(t=Cs.fromId(i),e&&(e[i]=t))}else t=ca(Cs,i);return t!=null&&t.destroyed&&(Zr.warn("The provided basemap is already destroyed",{basemap:t}),t=null),t}const Kr={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Zd(i){let e=null;if(typeof i=="string")if(i in Kr){const t=Kr[i];e=new En({resourceInfo:{data:{layers:[t]}}})}else S.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${i}. Try "world-elevation"`);else e=ca(En,i);return e}let Se=class extends Tc(Ec(Ln.EventedMixin(L))){constructor(e){super(e),this.allLayers=new bn({getCollections:()=>{var t,n,s;return[(t=this.basemap)==null?void 0:t.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(s=this.basemap)==null?void 0:s.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=xc(this),this.basemap=null,this.editableLayers=new bn({getCollections:()=>[this.allLayers],itemFilterFunction:Ud}),this.ground=new En,this._basemapCache=Wd()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),jd(this._basemapCache),this._basemapCache=null}castBasemap(e){return Gd(e,this._basemapCache)}castGround(e){const t=Zd(e);return P(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};a([c({readOnly:!0,dependsOn:[]})],Se.prototype,"allLayers",void 0),a([c({readOnly:!0})],Se.prototype,"allTables",void 0),a([c({type:Cs})],Se.prototype,"basemap",void 0),a([ye("basemap")],Se.prototype,"castBasemap",null),a([c({readOnly:!0})],Se.prototype,"editableLayers",void 0),a([c({type:En,nonNullable:!0})],Se.prototype,"ground",void 0),a([ye("ground")],Se.prototype,"castGround",null),Se=a([I("esri.Map")],Se);const La=Se;let Ke=class extends ga(ji){constructor(...e){super(...e),this.position=new X([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,n,s){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const r={position:e};return t!=null&&(r.heading=t),n!=null&&(r.tilt=n),s!=null&&(r.fov=s),r}return e}writePosition(e,t,n,s){const r=e.clone();r.x=bt(e.x||0),r.y=bt(e.y||0),r.z=e.hasZ?bt(e.z||0):e.z,t[n]=r.write({},s)}readPosition(e,t){const n=new X;return n.read(e,t),n.x=bt(n.x||0),n.y=bt(n.y||0),n.z=n.hasZ?bt(n.z||0):n.z,n}equals(e){return!P(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};a([c({type:X,json:{write:{isRequired:!0}}})],Ke.prototype,"position",void 0),a([da("position")],Ke.prototype,"writePosition",null),a([dc("position")],Ke.prototype,"readPosition",null),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ye(i=>$c.normalize(bt(i)))],Ke.prototype,"heading",void 0),a([c({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),ye(i=>yi(bt(i),-180,180))],Ke.prototype,"tilt",void 0),a([c({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ke.prototype,"fov",void 0),Ke=a([I("esri.Camera")],Ke);const Kd=Ke;var Ls;let ut=Ls=class extends ji{constructor(i){super(i),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(i){return(i%=360)<0&&(i+=360),i}clone(){return new Ls({rotation:this.rotation,scale:this.scale,targetGeometry:v(this.targetGeometry)?this.targetGeometry.clone():null,camera:v(this.camera)?this.camera.clone():null})}};function Xn(){return{enabled:!this.camera}}a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Xn}}}}})],ut.prototype,"rotation",void 0),a([ye("rotation")],ut.prototype,"castRotation",null),a([c({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Xn}}}}})],ut.prototype,"scale",void 0),a([c({types:Pc,json:{read:kr,write:!0,origins:{"web-scene":{read:kr,write:{overridePolicy:Xn}}}}})],ut.prototype,"targetGeometry",void 0),a([c({type:Kd,json:{write:!0}})],ut.prototype,"camera",void 0),ut=Ls=a([I("esri.Viewpoint")],ut);const He=ut,ln={widthBreakpoint:{getValue(i){const e=i.viewSize[0],t=i.breakpoints,n=this.values;return e<=t.xsmall?n.xsmall:e<=t.small?n.small:e<=t.medium?n.medium:e<=t.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(i){const e=i.viewSize[1],t=i.breakpoints,n=this.values;return e<=t.xsmall?n.xsmall:e<=t.small?n.small:e<=t.medium?n.medium:e<=t.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(i){const e=i.viewSize,t=e[0],n=e[1],s=this.values;return n>=t?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Jn={xsmall:544,small:768,medium:992,large:1200};function Yd(i){const e=i;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function es(i,e){return e?ln[i].valueToClassName[e].split(" "):[]}const Qd=i=>{let e=class extends i{constructor(...t){super(...t),this._breakpointsHandles=new xt,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Jn}initialize(){this._breakpointsHandles.add(y(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),V))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=ae(this._breakpointsHandles))}set breakpoints(t){if(t===this._get("breakpoints"))return;const n=Yd(t);if(!n){const s=JSON.stringify(Jn,null,2);console.warn("provided breakpoints are not valid, using defaults:"+s)}t=n?t:Jn,this._set("breakpoints",{...t})}_updateClassNames(){if(!this.container)return;const t=Ji.acquire(),n=Ji.acquire();let s,r=!1;for(s in ln){const o=this[s],l=ln[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==l&&(r=!0,this[s]=l,es(s,o).forEach(d=>n.push(d)),es(s,l).forEach(d=>t.push(d)))}r&&(this._applyClassNameChanges(t,n),Ji.release(t),Ji.release(n))}_applyClassNameChanges(t,n){const s=this.container;s&&(n.forEach(r=>s.classList.remove(r)),t.forEach(r=>s.classList.add(r)))}_removeActiveClassNames(){const t=this.container;if(!t)return;let n;for(n in ln)es(n,this[n]).forEach(s=>t.classList.remove(s))}};return a([c()],e.prototype,"breakpoints",null),a([c()],e.prototype,"orientation",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),a([c()],e.prototype,"heightBreakpoint",void 0),e=a([I("esri.views.BreakpointsOwner")],e),e};let pt=class extends L{constructor(){super(...arguments),this.items=new G,this._watchUpdatingTracking=new wa,this._callbacks=new Map,this._projector=As(),this._hiddenProjector=As()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const n of t.added){const s=()=>n.render();this._callbacks.set(n,s),this._projector.append(this.surface,s)}for(const n of t.removed){const s=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(s.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,n=this._hiddenProjector;let s;const r=()=>(s=e.render(),s);n.append(t,r),n.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s&&s.domNode){const l=s.domNode.getBoundingClientRect();o.left=l.left,o.top=l.top,o.right=l.right,o.bottom=l.bottom}for(n.detach(r);t.firstChild;)t.removeChild(t.firstChild);return o}overlaps(e,t){const n=this.computeBoundingRect(e),s=this.computeBoundingRect(t);return Math.max(n.left,s.left)<=Math.min(n.right,s.right)&&Math.max(n.top,s.top)<=Math.min(n.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(n=>n.visible))return;const t=e.getContext("2d");t.save(),t.font=this._fontString(),this.items.forEach(n=>{t.save(),n.renderCanvas(t),t.restore()}),t.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};a([c({readOnly:!0})],pt.prototype,"surface",void 0),a([c({readOnly:!0})],pt.prototype,"items",void 0),a([c({readOnly:!0})],pt.prototype,"needsRender",null),a([c({readOnly:!0})],pt.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],pt.prototype,"updating",null),pt=a([I("esri.views.overlay.ViewOverlay")],pt);const Yr=pt;function gi(i,e,t,n){let s=null,r=1e3;typeof e=="number"?(r=e,n=t):(s=e??null,r=t);let o,l=0;const d=()=>{l=0,i.apply(n,o)},h=(...u)=>{s&&s.apply(n,u),o=u,r?l||(l=setTimeout(d,r)):d()};return h.remove=()=>{l&&(clearTimeout(l),l=0)},h.forceUpdate=()=>{l&&(clearTimeout(l),d())},h.hasPendingUpdates=()=>!!l,h}const Qr=["B","kB","MB","GB","TB"];function Xd(i,e){let t=e===0?0:Math.floor(Math.log(e)/Math.log(Sr.KILOBYTES));t=yi(t,0,Qr.length-1);const n=tr(e/Sr.KILOBYTES**t,{maximumFractionDigits:2});return _i(i.units.bytes[Qr[t]],{fileSize:n})}const Jd="esri.widgets.Feature.support.featureUtils",Xr=S.getLogger(Jd),eh=/href=(""|'')/gi,th=/(\{([^\{\r\n]+)\})/g,ih=/\'/g,Da=/^\s*expression\//i,nh=/(\n)/gi,sh=/[\u00A0-\u9999<>\&]/gim,rh=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,oh=/^(?:mailto:|tel:)/,Oa="relationships/",Ds=Ma("short-date-short-time");function Va(i){if(!P(i))return i.get("sourceLayer")||i.get("layer")}async function xn(i,e){return typeof i=="function"?i.call(null,e):i}function Na(i=""){if(i)return!oh.test(i.trim().toLowerCase())}function rr(i){return!!i&&Da.test(i)}function ah(i,e){if(!rr(e)||!i)return null;const t=e.replace(Da,"").toLowerCase();let n=null;return i.some(s=>s.name.toLowerCase()===t&&(n=s,!0)),n}function za(i,e){const t=ah(e,i==null?void 0:i.fieldName);return t?t.title||null:i?i.label||i.fieldName:null}function lh(i,e){const t=e.get(i.toLowerCase());return`{${t&&t.fieldName||i}}`}function ch(i){return i.replace(eh,"")}function Ui(i,e){const t=or(e,i);return t?t.name:i}function dh(i,e){return i&&i.map(t=>Ui(t,e))}function or(i,e){return i&&typeof i.getField=="function"&&e?i.getField(e)??null:null}function Ba(i){return`${i}`.trim()}function Bt({attributes:i,globalAttributes:e,layer:t,text:n,expressionAttributes:s,fieldInfoMap:r}){return n?Os({formattedAttributes:e,template:mh(n,{...e,...s,...i},t),fieldInfoMap:r}):""}function Os({formattedAttributes:i,template:e,fieldInfoMap:t}){return Ba(ch(_i(_i(e,n=>lh(n,t)),i)))}function hh(i,e,t=!1){const n=e[i];if(typeof n=="string"){const s="%27",r=(t?encodeURIComponent(n):n).replace(ih,s);e[i]=r}}function uh(i,e=!1){const t={...i};return Object.keys(t).forEach(n=>hh(n,t,e)),t}function ph(i,e,t){const n=(e=Ba(e))&&e[0]!=="{";return _i(i,uh(t,n||!1))}function Vs(i,e){return i.replace(th,(t,n,s)=>{const r=or(e,s);return r?`{${r.name}}`:n})}function mh(i,e,t){const n=Vs(i,t);return n&&n.replace(rh,(s,r,o)=>ph(s,r||o,e))}function gh(i,e){if(typeof i=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const t=Number(i);if(!isNaN(t))return t}return i}function fh(i){return(i==null?void 0:i.type)==="feature"}function Jr(i){return!!(i!=null&&i.layer)}function _h(i){return(i==null?void 0:i.type)==="map-image"}function yh(i,e){var h;const t=e.fieldInfos,n=e.fieldName,s=(h=qa(t,n))==null?void 0:h.clone(),r=e.preventPlacesFormatting,o=e.layer,l=or(o,n);if(s&&(l==null?void 0:l.type)==="date"){const u=s.format||new Uc;u.dateFormat=u.dateFormat||"short-date-short-time",u.dateTimeFormatOptions=!Jr(o)&&fh(o)&&o.datesInUnknownTimezone||Jr(o)&&_h(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=u}const d=s&&s.format;return typeof i=="string"&&qc(n)&&d?d.formatRasterPixelValue(i):typeof(i=gh(i,d))=="string"||i==null||d==null?Ki(i):r?tr(i,{...Nc(d),minimumFractionDigits:0,maximumFractionDigits:20}):d.format(i)}function qa(i,e){if(!i||!i.length||!e)return;const t=e.toLowerCase();let n;return i.some(s=>!(!s.fieldName||s.fieldName.toLowerCase()!==t)&&(n=s,!0)),n}function vh({fieldName:i,graphic:e,layer:t}){if(it(i)||!t||typeof t.getFeatureType!="function")return null;const{typeIdField:n}=t;if(!n||i!==n)return null;const s=t.getFeatureType(e);return s?s.name:null}function wh({fieldName:i,value:e,graphic:t,layer:n}){if(it(i)||!n||typeof n.getFieldDomain!="function")return null;const s=t&&n.getFieldDomain(i,{feature:t});return s&&s.type==="coded-value"?s.getName(e):null}function bh(i,e){const{creatorField:t,creationDateField:n,editorField:s,editDateField:r}=i;if(!e)return;const o=e[r];if(typeof o=="number"){const d=e[s];return{type:"edit",date:In(o,Ds),user:d}}const l=e[n];if(typeof l=="number"){const d=e[t];return{type:"create",date:In(l,Ds),user:d}}return null}function Mh(i,e){const t=new Map;return i&&i.forEach(n=>{const s=Ui(n.fieldName,e);n.fieldName=s,t.set(s.toLowerCase(),n)}),t}function eo(i){const e=[];if(!i)return e;const{fieldInfos:t,content:n}=i;return t&&e.push(...t),n&&Array.isArray(n)&&n.forEach(s=>{if(s.type==="fields"){const r=s&&s.fieldInfos;r&&e.push(...r)}}),e}function ar(i){return i.replace(sh,e=>`&#${e.charCodeAt(0)};`)}function Ki(i){return typeof i=="string"?i.replace(nh,'<br class="esri-text-new-line" />'):i}function Ha(i){const{value:e,fieldName:t,fieldInfos:n,fieldInfoMap:s,layer:r,graphic:o}=i;if(e==null)return"";const l=wh({fieldName:t,value:e,graphic:o,layer:r});if(l)return l;const d=vh({fieldName:t,graphic:o,layer:r});if(d)return d;if(s.get(t.toLowerCase()))return yh(e,{fieldInfos:n||Array.from(s.values()),fieldName:t,layer:r});const h=r&&r.fieldsIndex;return h&&h.isDateField(t)?In(e,Ds):Ki(e)}function ts({fieldInfos:i,attributes:e,layer:t,graphic:n,fieldInfoMap:s,relatedInfos:r}){const o={};return r==null||r.forEach(l=>Eh({attributes:o,relatedInfo:l,fieldInfoMap:s,fieldInfos:i,layer:t})),e&&Object.keys(e).forEach(l=>{const d=e[l];o[l]=Ha({fieldName:l,fieldInfos:i,fieldInfoMap:s,layer:t,value:d,graphic:n})}),o}async function Ua(i,e){var u,p;const{layer:t,graphic:n,outFields:s,objectIds:r,returnGeometry:o,spatialReference:l}=i,d=r[0];if(typeof d!="number"&&typeof d!="string"){const g="Could not query required fields for the specified feature. The feature's ID is invalid.",f={layer:t,graphic:n,objectId:d,requiredFields:s};return Xr.warn(g,f),null}if(!((p=(u=ma(t))==null?void 0:u.operations)!=null&&p.supportsQuery)){const g="The specified layer cannot be queried. The following fields will not be available.",f={layer:t,graphic:n,requiredFields:s,returnGeometry:o};return Xr.warn(g,f),null}const h=t.createQuery();return h.objectIds=r,h.outFields=s!=null&&s.length?s:[t.objectIdField],h.returnGeometry=!!o,h.returnZ=!!o,h.returnM=!!o,h.outSpatialReference=l,(await t.queryFeatures(h,e)).features[0]}async function Ih(i){var n;if(!((n=i.expressionInfos)!=null&&n.length))return!1;const e=await Ia(),{arcadeUtils:{hasGeometryFunctions:t}}=e;return t(i)}async function Ch({graphic:i,popupTemplate:e,layer:t,spatialReference:n},s){if(!t||!e||(typeof t.load=="function"&&await t.load(s),!i.attributes))return;const r=i.attributes[t.objectIdField];if(r==null)return;const o=[r],l=await e.getRequiredFields(t.fieldsIndex),d=Bc(l,i),h=d?[]:l,u=e.returnGeometry||await Ih(e);if(d&&!u)return;const p=await Ua({layer:t,graphic:i,outFields:h,objectIds:o,returnGeometry:u,spatialReference:n},s);p&&(p.geometry&&(i.geometry=p.geometry),p.attributes&&(i.attributes={...i.attributes,...p.attributes}))}function it(i=""){return!!i&&i.includes(Oa)}function Th(i){return i?`${Oa}${i.layerId}/${i.fieldName}`:""}function to({attributes:i,graphic:e,relatedInfo:t,fieldInfos:n,fieldInfoMap:s,layer:r}){i&&e&&t&&Object.keys(e.attributes).forEach(o=>{const l=Th({layerId:t.relation.id.toString(),fieldName:o}),d=e.attributes[o];i[l]=Ha({fieldName:l,fieldInfos:n,fieldInfoMap:s,layer:r,value:d,graphic:e})})}function Eh({attributes:i,relatedInfo:e,fieldInfoMap:t,fieldInfos:n,layer:s}){i&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(r=>to({attributes:i,graphic:r,relatedInfo:e,fieldInfoMap:t,fieldInfos:n,layer:s})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(r=>to({attributes:i,graphic:r,relatedInfo:e,fieldInfoMap:t,fieldInfos:n,layer:s})))}const io=i=>{if(!i)return!1;const e=i.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Wa=({layer:i,method:e,query:t,definitionExpression:n})=>{var o,l;if(!((l=(o=i.capabilities)==null?void 0:o.query)!=null&&l.supportsCacheHint)||e==="attachments")return;const s=v(t.where)?t.where:null,r=v(t.geometry)?t.geometry:null;io(n)||io(s)||(r==null?void 0:r.type)==="extent"||t.resultType==="tile"||(t.cacheHint=!0)},xh=({query:i,layer:e,method:t})=>{Wa({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},$h=({queryPayload:i,layer:e,method:t})=>{Wa({layer:e,method:t,query:i,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function Ah(i,e,t){return i&&e&&t?no(i.allLayers,e,t)||no(i.allTables,e,t):null}function no(i,e,t){return i.find(n=>n!==e&&n.type==="feature"&&n.url===e.url&&n.layerId===t.relatedTableId)}const so={editing:!1,operations:{add:!0,update:!0,delete:!0}},ja=G.ofType(zc);let ge=class extends L{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...so},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new ja,this.fileInfos=new G,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(y(()=>this.graphic,()=>this._graphicChanged(),V))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...so,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const t=e.layer||e.sourceLayer;return(t==null?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new $("invalid-layer","getAttachments(): A valid layer is required.");const n=this._getObjectId(),s=new Lr({objectIds:[n],returnMetadata:!0}),r=[],o=e.queryAttachments(s).then(d=>d[n]||r).catch(()=>r);this._getAttachmentsPromise=o,this.notifyChange("state");const l=await o;return t.removeAll(),l.length&&t.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l}async addAttachment(e,t=this.graphic){var d;const{_attachmentLayer:n,attachmentInfos:s,abilities:r}=this;if(!t)throw new $("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:t});if(!e)throw new $("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((d=r.operations)!=null&&d.add))throw new $("invalid-abilities","addAttachment(): add abilities are required.");if(!n||typeof n.addAttachment!="function")throw new $("invalid-layer","addAttachment(): A valid layer is required.");const o=n.addAttachment(t,e).then(h=>this._queryAttachment(h.objectId,t)),l=await o;return s.add(l),l}async deleteAttachment(e){var d;const{_attachmentLayer:t,attachmentInfos:n,graphic:s,abilities:r}=this;if(!e)throw new $("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((d=r.operations)!=null&&d.delete))throw new $("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new $("invalid-layer","deleteAttachment(): A valid layer is required.");if(!s)throw new $("invalid-graphic","deleteAttachment(): A graphic is required.");const o=t.deleteAttachments(s,[e.id]).then(()=>e),l=await o;return n.remove(l),l}async updateAttachment(e,t=this.activeAttachmentInfo){var u;const{_attachmentLayer:n,attachmentInfos:s,graphic:r,abilities:o}=this;if(!e)throw new $("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new $("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!((u=o.operations)!=null&&u.update))throw new $("invalid-abilities","updateAttachment(): Update abilities are required.");const l=s.findIndex(p=>p===t);if(!n||typeof n.updateAttachment!="function")throw new $("invalid-layer","updateAttachment(): A valid layer is required.");if(!r)throw new $("invalid-graphic","updateAttachment(): A graphic is required.");const d=n.updateAttachment(r,t.id,e).then(p=>this._queryAttachment(p.objectId)),h=await d;return s.splice(l,1,h),h}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,t){if(!e||!t)return null;const n={file:e,form:t};return this.fileInfos.add(n),n}updateFile(e,t,n=this.activeFileInfo){if(!e||!t||!n)return null;const s=this.fileInfos.findIndex(r=>n===r);return s>-1&&this.fileInfos.splice(s,1,{file:e,form:t}),this.fileInfos.items[s]}deleteFile(e){const t=this.fileInfos.find(n=>n.file===e);return t?(this.fileInfos.remove(t),t):null}async _queryAttachment(e,t){const{_attachmentLayer:n}=this;if(!e||!(n!=null&&n.queryAttachments))throw new $("invalid-attachment-id","Could not query attachment.");const s=this._getObjectId(t),r=new Lr({objectIds:[s],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return n.queryAttachments(r).then(o=>o[s][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=Va(e);this._attachmentLayer=t?t.type==="scene"&&v(t.associatedLayer)?t.associatedLayer:t:null}};a([c()],ge.prototype,"abilities",void 0),a([ye("abilities")],ge.prototype,"castAbilities",null),a([c()],ge.prototype,"activeAttachmentInfo",void 0),a([c()],ge.prototype,"activeFileInfo",void 0),a([c({readOnly:!0,type:ja})],ge.prototype,"attachmentInfos",void 0),a([c()],ge.prototype,"fileInfos",void 0),a([c({type:jt})],ge.prototype,"graphic",void 0),a([c()],ge.prototype,"mode",void 0),a([c({readOnly:!0})],ge.prototype,"state",null),a([c()],ge.prototype,"filesEnabled",void 0),a([c({readOnly:!0})],ge.prototype,"supportsResizeAttachments",null),ge=a([I("esri.widgets.Attachments.AttachmentsViewModel")],ge);const lr=ge;function ro(i){const e=i.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function kh(i){const e=Xc("esri/themes/base/images/files/");return i?i==="text/plain"?`${e}text-32.svg`:i==="application/pdf"?`${e}pdf-32.svg`:i==="text/csv"?`${e}csv-32.svg`:i==="application/gpx+xml"?`${e}gpx-32.svg`:i==="application/x-dwf"?`${e}cad-32.svg`:i==="application/postscript"||i==="application/json"||i==="text/xml"||i==="model/vrml"?`${e}code-32.svg`:i==="application/x-zip-compressed"||i==="application/x-7z-compressed"||i==="application/x-gzip"||i==="application/x-tar"||i==="application/x-gtar"||i==="application/x-bzip2"||i==="application/gzip"||i==="application/x-compress"||i==="application/x-apple-diskimage"||i==="application/x-rar-compressed"||i==="application/zip"?`${e}zip-32.svg`:i.includes("image/")?`${e}image-32.svg`:i.includes("audio/")?`${e}sound-32.svg`:i.includes("video/")?`${e}video-32.svg`:i.includes("msexcel")||i.includes("ms-excel")||i.includes("spreadsheetml")?`${e}excel-32.svg`:i.includes("msword")||i.includes("ms-word")||i.includes("wordprocessingml")?`${e}word-32.svg`:i.includes("powerpoint")||i.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}const oo={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},O="esri-attachments",$t="esri-button",M={base:O,loaderContainer:`${O}__loader-container`,loader:`${O}__loader`,fadeIn:`${O}--fade-in`,container:`${O}__container`,containerList:`${O}__container--list`,containerPreview:`${O}__container--preview`,actions:`${O}__actions`,deleteButton:`${O}__delete-button`,addAttachmentButton:`${O}__add-attachment-button`,errorMessage:`${O}__error-message`,items:`${O}__items`,item:`${O}__item`,itemButton:`${O}__item-button`,itemMask:`${O}__item-mask`,itemMaskIcon:`${O}__item-mask--icon`,itemImage:`${O}__image`,itemImageResizable:`${O}__image--resizable`,itemLabel:`${O}__label`,itemFilename:`${O}__filename`,itemChevronIcon:`${O}__item-chevron-icon`,itemLink:`${O}__item-link`,itemLinkOverlay:`${O}__item-link-overlay`,itemLinkOverlayIcon:`${O}__item-link-overlay-icon`,itemEditIcon:`${O}__item-edit-icon`,itemAddIcon:`${O}__item-add-icon`,itemAddButton:`${O}__item-add-button`,formNode:`${O}__form-node`,fileFieldset:`${O}__file-fieldset`,fileLabel:`${O}__file-label`,fileName:`${O}__file-name`,fileInput:`${O}__file-input`,metadata:`${O}__metadata`,metadataFieldset:`${O}__metadata-fieldset`,progressBar:`${O}__progress-bar`,esriWidget:"esri-widget",esriButton:$t,buttonDisabled:`${$t}--disabled`,esriButtonSecondary:`${$t}--secondary`,esriButtonTertiary:`${$t}--tertiary`,esriButtonThird:`${$t}--third`,esriButtonSmall:`${$t}--small`,esriButtonHalf:`${$t}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},is=window.CSS;let oe=class extends ce{constructor(e,t){super(e,t),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...oo},this._supportsImageOrientation=is&&is.supports&&is.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new lr),this.addHandles([Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),y(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),V)])}loadDependencies(){return Promise.all([w(()=>import("./calcite-icon-a9b2c435.js"),["./calcite-icon-a9b2c435.js","./icon-30e1a9e4.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js"],import.meta.url)])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...oo,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(n=>(this._set("submitting",!1),this._set("error",null),t.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new $("attachments:add-attachment",this.messages.addErrorMessage,n)),n})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(n=>(this._set("submitting",!1),this._set("error",null),t.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new $("attachments:delete-attachment",this.messages.deleteErrorMessage,n)),n})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(n=>(this._set("submitting",!1),this._set("error",null),e.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new $("attachments:update-attachment",this.messages.updateErrorMessage,n)),n})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}deleteFile(e){var n;const t=this.viewModel.deleteFile(e||((n=this.viewModel.activeFileInfo)==null?void 0:n.file));return this.viewModel.mode="view",t}render(){const{submitting:e,viewModel:t}=this,{state:n}=t;return m("div",{class:this.classes(M.base,M.esriWidget)},e?this.renderProgressBar():null,n==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?m("div",{key:"error-message",class:M.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:t,activeAttachmentInfo:n}=this.viewModel;return t==="add"?this.renderAddForm():t==="edit"?this.renderDetailsForm(n||e):this.renderAttachmentContainer()}renderLoading(){return m("div",{class:M.loaderContainer,key:"loader"},m("div",{class:M.loader}))}renderProgressBar(){return this.visibleElements.progressBar?m("div",{class:M.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,n=e||!t,s=this.visibleElements.cancelAddButton?m("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(M.esriButton,M.esriButtonTertiary,M.esriButtonSmall,M.esriButtonHalf,e&&M.buttonDisabled)},this.messages.cancel):null,r=this.visibleElements.addSubmitButton?m("button",{type:"submit",disabled:n,class:this.classes(M.esriButton,M.esriButtonSecondary,M.esriButtonSmall,M.esriButtonHalf,{[M.buttonDisabled]:n})},this.messages.add):null,o=t?m("span",{key:"file-name",class:M.fileName},t.name):null,l=m("form",{bind:this,afterCreate:Mn,afterRemoved:Pr,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},m("fieldset",{class:M.fileFieldset},o,m("label",{class:this.classes(M.fileLabel,M.esriButton,M.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,m("input",{class:M.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),r,s);return m("div",{key:"add-form-container",class:M.formNode},l)}renderDetailsForm(e){var W,J,ne;const{visibleElements:t,viewModel:n,selectedFile:s,submitting:r}=this,{abilities:o}=n,l=r||!s;let d,h,u,p;s?(d=s.type,h=s.name,u=s.size):e&&"file"in e?(d=e.file.type,h=e.file.name,u=e.file.size):e&&"contentType"in e&&(d=e.contentType,h=e.name,u=e.size,p=e.url);const g=o.editing&&((W=o.operations)!=null&&W.delete)&&t.deleteButton?m("button",{key:"delete-button",type:"button",disabled:r,bind:this,onclick:q=>this._submitDeleteAttachment(q,e),class:this.classes(M.esriButton,M.esriButtonSmall,M.esriButtonTertiary,M.deleteButton,{[M.buttonDisabled]:r})},this.messages.delete):void 0,f=o.editing&&((J=o.operations)!=null&&J.update)&&t.updateButton?m("button",{disabled:l,key:"update-button",type:"submit",class:this.classes(M.esriButton,M.esriButtonSmall,M.esriButtonThird,{[M.buttonDisabled]:l})},this.messages.update):void 0,b=this.visibleElements.cancelUpdateButton?m("button",{disabled:r,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(M.esriButton,M.esriButtonSmall,M.esriButtonTertiary,M.esriButtonThird,{[M.buttonDisabled]:r})},this.messages.cancel):void 0,C=o.editing&&((ne=o.operations)!=null&&ne.update)?m("fieldset",{key:"file",class:M.fileFieldset},m("span",{key:"file-name",class:M.fileName},h),m("label",{class:this.classes(M.fileLabel,M.esriButton,M.esriButtonSecondary)},this.messages.changeFile,m("input",{class:M.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,T=m("fieldset",{key:"size",class:M.metadataFieldset},m("label",null,Xd(this.messagesUnits,u??0))),F=m("fieldset",{key:"content-type",class:M.metadataFieldset},m("label",null,d)),N=v(p)?m("a",{class:M.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),m("div",{class:M.itemLinkOverlay},m("span",{class:M.itemLinkOverlayIcon},m("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),D=m("form",{bind:this,afterCreate:Mn,afterRemoved:Pr,"data-node-ref":"_updateAttachmentForm",onsubmit:q=>this._submitUpdateAttachment(q,e)},m("div",{class:M.metadata},T,F),C,m("div",{class:M.actions},g,b,f));return m("div",{key:"edit-form-container",class:M.formNode},N,D)}renderImageMask(e,t){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t):null}renderGenericImageMask(e,t){const{supportsResizeAttachments:n}=this.viewModel,s=kh(t),r={[M.itemImageResizable]:n};return m("div",{class:this.classes(M.itemMaskIcon,M.itemMask)},m("img",{title:e,alt:e,src:s,class:this.classes(r,M.itemImage)}))}renderImageMaskForAttachment(e,t){const{supportsResizeAttachments:n}=this.viewModel;if(!e)return null;const{contentType:s,name:r,url:o}=e;if(!n||!ro(s))return this.renderGenericImageMask(r,s);const l=this._getCSSTransform(e),d=l?{transform:l,"image-orientation":"none"}:{},h=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${t}`,u={[M.itemImageResizable]:n};return m("div",{class:this.classes(M.itemMask)},m("img",{styles:d,alt:r,title:r,src:h,class:this.classes(u,M.itemImage)}))}renderFile(e){const{file:t}=e;return m("li",{class:M.item,key:t},m("button",{key:"details-button",bind:this,class:M.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),m("label",{class:M.itemLabel},m("span",{class:M.itemFilename},t.name||this.messages.noTitle),m("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,qe(this.container)?M.iconLeft:M.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:n,effectiveDisplayType:s}=this,{abilities:r,supportsResizeAttachments:o}=n,{contentType:l,name:d,url:h}=e,u=this.renderImageMask(e,t==="list"?48:400),p=r.editing?m("span",{"aria-hidden":"true",class:this.classes(M.itemChevronIcon,qe(this.container)?M.iconLeft:M.iconRight)}):null,g=[u,s==="preview"&&o&&ro(l)?null:m("label",{class:M.itemLabel},m("span",{class:M.itemFilename},d||this.messages.noTitle),p)],f=r.editing?m("button",{key:"details-button",bind:this,class:M.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},g):m("a",{key:"details-link",class:M.itemButton,href:h??void 0,target:"_blank"},g);return m("li",{class:M.item,key:e},f)}renderAttachmentContainer(){var b;const{effectiveDisplayType:e,viewModel:t,visibleElements:n}=this,{attachmentInfos:s,abilities:r,fileInfos:o}=t,l=!!(s!=null&&s.length),d=!!(o!=null&&o.length),h={[M.containerList]:e!=="preview",[M.containerPreview]:e==="preview"},u=r.editing&&((b=r.operations)!=null&&b.add)&&n.addButton?m("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(M.esriButton,M.esriButtonTertiary,M.addAttachmentButton),type:"button"},m("span",{"aria-hidden":"true",class:this.classes(M.itemAddIcon,M.iconPlus)}),this.messages.add):void 0,p=l?m("ul",{key:"attachments-list",class:M.items},s.toArray().map(C=>this.renderAttachmentInfo({attachmentInfo:C,displayType:e}))):void 0,g=d?m("ul",{key:"file-list",class:M.items},o.toArray().map(C=>this.renderFile(C))):void 0,f=d||l?void 0:m("div",{class:M.empty},this.messages.noAttachments);return m("div",{key:"attachments-container",class:this.classes(M.container,h)},p,g,f,u)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,n=t&&t.files&&t.files.item(0);this._set("selectedFile",n)}_submitDeleteAttachment(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}_startEditFile(e){const{viewModel:t}=this;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:t}=e;return!this._supportsImageOrientation&&t?[t.rotation?`rotate(${t.rotation}deg)`:"",t.mirrored?"scaleX(-1)":""].join(" "):""}};a([c()],oe.prototype,"abilities",null),a([c()],oe.prototype,"displayType",void 0),a([c({readOnly:!0})],oe.prototype,"effectiveDisplayType",null),a([c()],oe.prototype,"graphic",null),a([c()],oe.prototype,"label",null),a([c(),le("esri/widgets/Attachments/t9n/Attachments")],oe.prototype,"messages",void 0),a([c(),le("esri/core/t9n/Units")],oe.prototype,"messagesUnits",void 0),a([c({readOnly:!0})],oe.prototype,"selectedFile",void 0),a([c({readOnly:!0})],oe.prototype,"submitting",void 0),a([c({readOnly:!0})],oe.prototype,"error",void 0),a([c({type:lr})],oe.prototype,"viewModel",void 0),a([c()],oe.prototype,"visibleElements",void 0),a([ye("visibleElements")],oe.prototype,"castVisibleElements",null),oe=a([I("esri.widgets.Attachments")],oe);const Ph=oe;let Fi=class extends lr{constructor(e){super(e),this.description=null,this.title=null}};a([c()],Fi.prototype,"description",void 0),a([c()],Fi.prototype,"title",void 0),Fi=a([I("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Fi);const cr=Fi,Fh={heading:"esri-widget__heading"};function dr({level:i,class:e,...t},n){const s=Rh(i);return m(`h${s}`,{...t,class:Lc(Fh.heading,e),role:"heading","aria-level":String(s)},n)}function Rh(i){return yi(Math.ceil(i),1,6)}const ns="esri-feature-element-info",ss={base:ns,title:`${ns}__title`,description:`${ns}__description`};let si=class extends ce{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return m("div",{class:ss.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?m(dr,{level:this.headingLevel,class:ss.title},e):null}renderDescription(){const{description:e}=this;return e?m("div",{key:"description",class:ss.description},e):null}};a([c()],si.prototype,"description",void 0),a([c()],si.prototype,"headingLevel",void 0),a([c()],si.prototype,"title",void 0),si=a([I("esri.widgets.Feature.support.FeatureElementInfo")],si);const zn=si,Sh={base:"esri-feature-attachments"};let Le=class extends ce{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new Ph,this.headingLevel=2,this.viewModel=new cr}initialize(){this._featureElementInfo=new zn,this.addHandles([y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),V),y(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,V)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var t;const{attachmentsWidget:e}=this;return m("div",{class:Sh.base},(t=this._featureElementInfo)==null?void 0:t.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var s;const{description:e,title:t,headingLevel:n}=this;(s=this._featureElementInfo)==null||s.set({description:e,title:t,headingLevel:n})}};a([c({readOnly:!0})],Le.prototype,"attachmentsWidget",void 0),a([c()],Le.prototype,"description",null),a([c()],Le.prototype,"displayType",null),a([c()],Le.prototype,"graphic",null),a([c()],Le.prototype,"headingLevel",void 0),a([c()],Le.prototype,"title",null),a([c({type:cr})],Le.prototype,"viewModel",void 0),Le=a([I("esri.widgets.Feature.FeatureAttachments")],Le);const Lh=Le;let mt=class extends Vn(L){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(y(()=>this.creator,t=>{this._destroyContent(),this._createContent(t)},V))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:n}=this;e&&t&&(xn(n,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const t=this.graphic;if(!t||!e)return;const n=xn(e,{graphic:t}).catch(()=>null);this._loadingPromise=n,this.notifyChange("state");const s=await n;n===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",s))}};a([c({readOnly:!0})],mt.prototype,"created",void 0),a([c()],mt.prototype,"creator",void 0),a([c()],mt.prototype,"destroyer",void 0),a([c({type:jt})],mt.prototype,"graphic",void 0),a([c({readOnly:!0})],mt.prototype,"state",null),mt=a([I("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],mt);const $n=mt;function Ee(){return function(i,e){if(!i[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:Oh(i[e])}}}function Dh(i){const e=i==null?void 0:i.type;return i instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Oh(i){return function(e,...t){Dh(e)?Dc(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):i.call(this,e,...t)}}function Vh(i){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const t=e._delegatedEventNames,n=Array.isArray(i)?i:Nh(i);t.push(...n)}}function Nh(i){return i.split(",").map(e=>e.trim())}const Ga="calcite-mode-";function zh(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function An(){return zh().startsWith("dark")}function Bh(){return`${Ga}${An()?"dark":"light"}`}function qh(i){Hh(i),i.classList.add(Bh())}function Hh(i){Array.from(i.classList).forEach(e=>{e.startsWith(Ga)&&i.classList.remove(e)})}const rs="esri-feature-content",os={base:rs,loaderContainer:`${rs}__loader-container`,loader:`${rs}__loader`};let ri=class extends ce{constructor(e,t){super(e,t),this.viewModel=null,this._addTargetToAnchors=n=>{Array.from(n.querySelectorAll("a")).forEach(s=>{Na(s.href)&&!s.hasAttribute("target")&&s.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return m("div",{class:os.loaderContainer,key:"loader"},m("div",{class:os.loader}))}renderCreated(){var t;const e=(t=this.viewModel)==null?void 0:t.created;return e?e instanceof HTMLElement?m("div",{key:e,bind:e,afterCreate:this._attachToNode}):_a(e)?m("div",{key:e},!e.destroyed&&e.render()):m("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var t;const e=(t=this.viewModel)==null?void 0:t.state;return m("div",{class:os.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};a([c()],ri.prototype,"creator",null),a([c()],ri.prototype,"graphic",null),a([c({type:$n})],ri.prototype,"viewModel",void 0),ri=a([I("esri.widgets.Feature.FeatureContent")],ri);const cn=ri;let Ye=class extends L{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,n=[];return t==null||t.forEach(s=>{if(!(!s.hasOwnProperty("visible")||s.visible))return;const r=s.clone();r.label=za(r,e),n.push(r)}),n}};a([c()],Ye.prototype,"attributes",void 0),a([c({type:[Wc]})],Ye.prototype,"expressionInfos",void 0),a([c()],Ye.prototype,"description",void 0),a([c({type:[Ca]})],Ye.prototype,"fieldInfos",void 0),a([c({readOnly:!0})],Ye.prototype,"formattedFieldInfos",null),a([c()],Ye.prototype,"title",void 0),Ye=a([I("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Ye);const Bn=Ye,Uh=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function Wh(i){let e=null;return Uh.some(t=>(t.pattern.test(i)&&(e=t),!!e)),e}function jh(i,e){if(typeof e!="string"||!e)return e;const t=Wh(e);if(!t)return e;const n=e.match(t.pattern),s=n&&n[2],r=_i(_i(t.label,{messages:i,hierPart:s}),{appName:t.appName}),o=t.target?` target="${t.target}"`:"",l=t.target==="_blank"?' rel="noreferrer"':"";return e.replace(t.pattern,`<a${o} href="$1"${l}>${r}</a>`)}const en="esri-feature-fields",Mi={base:en,fieldHeader:`${en}__field-header`,fieldData:`${en}__field-data`,fieldDataDate:`${en}__field-data--date`,esriTable:"esri-widget__table"};let ke=class extends ce{constructor(e,t){super(e,t),this._featureElementInfo=null,this.viewModel=new Bn,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new zn,this.addHandles(y(()=>{var e,t;return[(e=this.viewModel)==null?void 0:e.description,(t=this.viewModel)==null?void 0:t.title]},()=>this._setupFeatureElementInfo(),V))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,t){const{attributes:n}=this.viewModel,s=e.fieldName,r=e.label||s,o=n?n[s]==null?"":n[s]:"",l=!(!e.format||!e.format.dateFormat),d=typeof o=="number"&&!l?this._forceLTR(o):jh(this.messagesURIUtils,o),h={[Mi.fieldDataDate]:l};return m("tr",{key:`fields-element-info-row-${s}-${t}`},m("th",{key:`fields-element-info-row-header-${s}-${t}`,class:Mi.fieldHeader,innerHTML:r}),m("td",{key:`fields-element-info-row-data-${s}-${t}`,class:this.classes(Mi.fieldData,h),innerHTML:d}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?m("table",{class:Mi.esriTable,summary:this.messages.fieldsSummary},m("tbody",null,e.map((t,n)=>this.renderFieldInfo(t,n)))):null}render(){var e;return m("div",{class:Mi.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var n;const{description:e,title:t}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};a([c()],ke.prototype,"attributes",null),a([c()],ke.prototype,"description",null),a([c()],ke.prototype,"expressionInfos",null),a([c()],ke.prototype,"fieldInfos",null),a([c()],ke.prototype,"title",null),a([c({type:Bn,nonNullable:!0})],ke.prototype,"viewModel",void 0),a([c(),le("esri/widgets/Feature/t9n/Feature")],ke.prototype,"messages",void 0),a([c(),le("esri/widgets/support/t9n/uriUtils")],ke.prototype,"messagesURIUtils",void 0),ke=a([I("esri.widgets.Feature.FeatureFields")],ke);const Za=ke,Gh={maximumFractionDigits:20};function Zh(i){return tr(i,Gh)}const Kh="<",Yh=">",Qh=Ma("short-date");function Xh(i,e,t,n){let s="";e===0?s=`${Kh} `:e===t&&(s=`${Yh} `);let r=null;return r=n?In(i,Qh):Zh(i),s+r}const Jh=new Tt([64,64,64]);function eu(i,e){const t=[],n=i.length-1;return i.length===5?t.push(0,2,4):t.push(0,n),i.map((s,r)=>t.includes(r)?Xh(s,r,n,e):null)}async function tu(i,e,t){let n=!1,s=[],r=[];if(i.stops){const h=i.stops;s=h.map(u=>u.value),n=h.some(u=>!!u.label),n&&(r=h.map(u=>u.label))}const o=s[0],l=s[s.length-1];if(o==null&&l==null)return null;const d=n?null:eu(s,t??!1);return(await Promise.all(s.map(async(h,u)=>({value:h,color:i.type==="opacity"?await iu(h,i,e):(await w(()=>import("./UniqueValueRenderer-adb2594e.js").then(p=>p.v),["./UniqueValueRenderer-adb2594e.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./enumeration-de0a766e.js","./Extent-52b65909.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./Clonable-ad03ca71.js","./LegendOptions-6e5321d3.js","./reactiveUtils-989a8d7f.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./Identifiable-a49d7533.js","./jsonUtils-e2434b33.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js"],import.meta.url)).getColor(i,h),label:n?r[u]:(d==null?void 0:d[u])??""})))).reverse()}async function iu(i,e,t=Jh){const n=new Tt(t),s=(await w(()=>import("./UniqueValueRenderer-adb2594e.js").then(r=>r.v),["./UniqueValueRenderer-adb2594e.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./enumeration-de0a766e.js","./Extent-52b65909.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./Clonable-ad03ca71.js","./LegendOptions-6e5321d3.js","./reactiveUtils-989a8d7f.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./Identifiable-a49d7533.js","./jsonUtils-e2434b33.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js"],import.meta.url)).getOpacity(e,i);return s!=null&&(n.a=s),n}function nu(i){if(!i.colorStops)return[];const e=[...i.colorStops].filter(n=>{var s;return((s=n.color)==null?void 0:s.a)>0});let t=e.length-1;if(e&&e[0]){const n=e[t];n&&n.ratio!==1&&(e.push(new nd({ratio:1,color:n.color})),t++)}return e.map((n,s)=>{var o,l;let r="";return s===0?r=((o=i.legendOptions)==null?void 0:o.minLabel)||"low":s===t&&(r=((l=i.legendOptions)==null?void 0:l.maxLabel)||"high"),{color:n.color,label:r,ratio:n.ratio}}).reverse()}S.getLogger("esri.renderers.support.utils");async function ve(i,e,t){cc(i,e,()=>[]).push(...t)}async function su(i){var t,n;const e=new Map;if(!i)return e;if("visualVariables"in i&&i.visualVariables){const s=i.visualVariables.filter(r=>r.type==="color");for(const r of s){const o=(await tu(r)??[]).map(l=>l.color);await ve(e,r.field||r.valueExpression,o)}}if(i.type==="heatmap"){const s=nu(i).map(r=>r.color);await ve(e,i.field||i.valueExpression,s)}else if(i.type==="pie-chart"){for(const s of i.attributes)await ve(e,s.field||s.valueExpression,[s.color]);await ve(e,"default",[(t=i==null?void 0:i.othersCategory)==null?void 0:t.color,Qt(i.backgroundFillSymbol,null)])}else if(i.type==="dot-density"){for(const s of i.attributes)await ve(e,s.field||s.valueExpression,[s.color]);await ve(e,"default",[i.backgroundColor])}else if(i.type==="unique-value")if(((n=i.authoringInfo)==null?void 0:n.type)==="predominance")for(const s of i.uniqueValueInfos??[])await ve(e,s.value.toString(),[Qt(s.symbol,null)]);else{const s=(i.uniqueValueInfos??[]).map(h=>Qt(h.symbol,null)),{field:r,field2:o,field3:l,valueExpression:d}=i;(r||d)&&await ve(e,r||d,s),o&&await ve(e,o,s),l&&await ve(e,l,s)}else if(i.type==="class-breaks"){const s=i.classBreakInfos.map(l=>Qt(l.symbol,null)),{field:r,valueExpression:o}=i;await ve(e,r??o,s)}else i.type==="simple"&&await ve(e,"default",[Qt(i.symbol,null)]);return"defaultSymbol"in i&&i.defaultSymbol&&await ve(e,"default",[Qt(i.defaultSymbol,null)]),e.forEach((s,r)=>{const o=fc(s.filter(Boolean),(l,d)=>JSON.stringify(l)===JSON.stringify(d));e.set(r,o)}),e}const ru="esri.widgets.Feature.support.relatedFeatureUtils",ao=S.getLogger(ru),lo=new Map;function dn(i){if(!it(i))return null;const[e,t]=i.split("/").slice(1);return{layerId:e,fieldName:t}}function ou(i,e){if(!e.relationships)return null;let t=null;const{relationships:n}=e;return n.some(s=>s.id===parseInt(i,10)&&(t=s,!0)),t}function au({originRelationship:i,relationships:e,layerId:t}){let n=null;return e&&e.some(s=>(`${s.relatedTableId}`===t&&s.id===(i==null?void 0:i.id)&&(n=s),!!n)),n}function lu(i,e){const t=e.toLowerCase();for(const n in i)if(n.toLowerCase()===t)return i[n];return null}function cu(i,e){const t=ou(i,e);if(t)return{url:`${e.url}/${t.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:t,relatedFields:[],outStatistics:[]}}function du(i,e){if(!e||!i)return;const{features:t,statsFeatures:n}=i,s=t&&t.value;e.relatedFeatures=s?s.features:[];const r=n&&n.value;e.relatedStatsFeatures=r?r.features:[]}function hu(i,e,t,n){var r;const s=new ks;return s.outFields=["*"],s.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),s.objectIds=[i.attributes[t.objectIdField]],((r=t.queryRelatedFeatures)==null?void 0:r.call(t,s,n))??Promise.resolve({})}function uu(i,e,t){let n=0;const s=[];for(;n<e.length;)s.push(`${i} IN (${e.slice(n,t+n)})`),n+=t;return s.join(" OR ")}async function pu(i,e,t,n){const s=t.layerId.toString(),{layerInfo:r,relation:o,relatedFields:l,outStatistics:d,url:h,sourceSpatialReference:u}=e;if(!r||!o)return null;const p=au({originRelationship:o,relationships:r.relationships,layerId:s});if(p!=null&&p.relationshipTableId&&p.keyFieldInRelationshipTable){const f=(await hu(i,p,t,n))[i.attributes[t.objectIdField]];if(!f)return null;const b=f.features.map(C=>C.attributes[r.objectIdField]);if(d!=null&&d.length&&r.supportsStatistics){const C=new Kn;C.where=uu(r.objectIdField,b,1e3),C.outFields=l,C.outStatistics=d,C.sourceSpatialReference=u;const T={features:Promise.resolve(f),statsFeatures:Yn(h,C)};return Et(T)}}const g=p==null?void 0:p.keyField;if(g){const f=Hc(yu(r.fields,g)),b=lu(i.attributes,o.keyField),C=f?`${g}=${b}`:`${g}='${b}'`,T=Yn(h,new Kn({where:C,outFields:e.relatedFields,sourceSpatialReference:u}),n),F=e.outStatistics&&e.outStatistics.length>0&&r.supportsStatistics?Yn(h,new Kn({where:C,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:u}),n):null,N={features:T};return F&&(N.statsFeatures=F),Et(N)}return null}function mu(i,e){return Cc(i,{query:{f:"json"},signal:e&&e.signal})}function gu({relatedInfos:i,layer:e},t){const n={};return i.forEach((s,r)=>{const{relation:o}=s;if(!o){const p=new $("relation-required","A relation is required on a layer to retrieve related records.");throw ao.error(p),p}const{relatedTableId:l}=o;if(typeof l!="number"){const p=new $("A related table ID is required on a layer to retrieve related records.");throw ao.error(p),p}const d=`${e.url}/${l}`,h=lo.get(d),u=h||mu(d);h||lo.set(d,u),n[r]=u}),sc(Et(n),t)}function fu({graphic:i,relatedInfos:e,layer:t},n){const s={};return e.forEach((r,o)=>{r.layerInfo&&(s[o]=pu(i,r,t,n))}),Et(s)}function _u({relatedInfo:i,fieldName:e,fieldInfo:t}){var n,s;if((n=i.relatedFields)==null||n.push(e),t.statisticType){const r=new sd({statisticType:t.statisticType,onStatisticField:e,outStatisticFieldName:e});(s=i.outStatistics)==null||s.push(r)}}function yu(i,e){if(i!=null){e=e.toLowerCase();for(const t of i)if(t&&t.name.toLowerCase()===e)return t}return null}const co={chartAnimation:!0};let Q=class extends L{constructor(e){super(e),this.abilities={...co},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...co,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,n=(e+t)%t;this.activeMediaInfoIndex=n}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,n=t+e;this._setContentElementMedia(n)}_formatMediaInfos(){const{mediaInfos:e,layer:t}=this,n=this.attributes??{},s=this.formattedAttributes??{},r=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(l=>{const d=l==null?void 0:l.clone();if(!d)return null;if(d.title=Bt({attributes:n,fieldInfoMap:o,globalAttributes:s,expressionAttributes:r,layer:t,text:d.title}),d.caption=Bt({attributes:n,fieldInfoMap:o,globalAttributes:s,expressionAttributes:r,layer:t,text:d.caption}),d.altText=Bt({attributes:n,fieldInfoMap:o,globalAttributes:s,expressionAttributes:r,layer:t,text:d.altText}),d.type==="image"){const{value:h}=d;return this._setImageValue({value:h,formattedAttributes:s,layer:t}),d.value.sourceURL?d:void 0}if(d.type==="pie-chart"||d.type==="line-chart"||d.type==="column-chart"||d.type==="bar-chart"){const{value:h}=d;return this._setChartValue({value:h,chartType:d.type,attributes:n,formattedAttributes:s,layer:t,expressionAttributes:r}),d}return null}).filter(v))??[]}_setImageValue(e){const t=this.fieldInfoMap??new Map,{value:n,formattedAttributes:s,layer:r}=e,{linkURL:o,sourceURL:l}=n;if(l){const d=Vs(l,r);n.sourceURL=Os({formattedAttributes:s,template:d,fieldInfoMap:t})}if(o){const d=Vs(o,r);n.linkURL=Os({formattedAttributes:s,template:d,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:n,formattedAttributes:s,chartType:r,layer:o,expressionAttributes:l}=e,{popupTemplate:d,relatedInfos:h}=this,{fields:u,normalizeField:p}=t,g=o;if(t.fields=dh(u,g),p&&(t.normalizeField=Ui(p,g)),!u.some(b=>!!(s[b]!=null||it(b)&&(h!=null&&h.size))))return;const f=(d==null?void 0:d.fieldInfos)??[];u.forEach(b=>{if(it(b))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:f,fieldName:b,formattedAttributes:s,chartType:r,value:t})]);const C=this._getChartOption({value:t,attributes:n,chartType:r,formattedAttributes:s,expressionAttributes:l,fieldName:b,fieldInfos:f});t.series.push(C)})}_getRelatedChartInfos(e){var f;const{fieldInfos:t,fieldName:n,formattedAttributes:s,chartType:r,value:o}=e,l=[],d=dn(n),h=d&&((f=this.relatedInfos)==null?void 0:f.get(d.layerId.toString()));if(!h)return l;const{relatedFeatures:u,relation:p}=h;if(!p||!u)return l;const{cardinality:g}=p;return u.forEach(b=>{const{attributes:C}=b;C&&Object.keys(C).forEach(T=>{T===d.fieldName&&l.push(this._getChartOption({value:o,attributes:C,formattedAttributes:s,fieldName:n,chartType:r,relatedFieldName:T,hasMultipleRelatedFeatures:(u==null?void 0:u.length)>1,fieldInfos:t}))})}),g==="one-to-many"||g==="many-to-many"?l:[l[0]]}_getTooltip({label:e,value:t,chartType:n}){return n==="pie-chart"?`${e}`:`${e}: ${t}`}_getChartOption(e){var ne;const{value:t,attributes:n,formattedAttributes:s,expressionAttributes:r,fieldName:o,relatedFieldName:l,fieldInfos:d,chartType:h,hasMultipleRelatedFeatures:u}=e,p=this.layer,g=this.fieldInfoMap??new Map,{normalizeField:f,tooltipField:b}=t,C=f?it(f)?n[dn(f).fieldName]:n[f]:null,T=rr(o)&&r&&r[o]!==void 0?r[o]:l&&n[l]!==void 0?n[l]:n[o]!==void 0?n[o]:s[o],F=new jc({fieldName:o,value:T===void 0?null:T&&C?T/C:T});if(it(o)){const q=g.get(o.toLowerCase()),Gt=b&&g.get(b.toLowerCase()),Yi=(q==null?void 0:q.fieldName)??o,bi=u&&b?dn(b).fieldName:(Gt==null?void 0:Gt.fieldName)??b,Zt=u&&bi?n[bi]:s[bi]??(q==null?void 0:q.label)??(q==null?void 0:q.fieldName)??l,Qi=u&&l?n[l]:s[Yi];return F.tooltip=this._getTooltip({label:Zt,value:Qi,chartType:h}),F}const N=qa(d,o),D=Ui(o,p),W=b&&s[b]!==void 0?s[b]:za(N||new Ca({fieldName:D}),(ne=this.popupTemplate)==null?void 0:ne.expressionInfos),J=s[D];return F.tooltip=this._getTooltip({label:W,value:J,chartType:h}),F}};a([c()],Q.prototype,"abilities",void 0),a([ye("abilities")],Q.prototype,"castAbilities",null),a([c()],Q.prototype,"activeMediaInfoIndex",void 0),a([c({readOnly:!0})],Q.prototype,"activeMediaInfo",null),a([c()],Q.prototype,"attributes",void 0),a([c()],Q.prototype,"description",void 0),a([c()],Q.prototype,"fieldInfoMap",void 0),a([c()],Q.prototype,"formattedAttributes",void 0),a([c()],Q.prototype,"expressionAttributes",void 0),a([c({readOnly:!0})],Q.prototype,"formattedMediaInfos",null),a([c()],Q.prototype,"isAggregate",void 0),a([c()],Q.prototype,"layer",void 0),a([c({readOnly:!0})],Q.prototype,"formattedMediaInfoCount",null),a([c()],Q.prototype,"mediaInfos",void 0),a([c()],Q.prototype,"popupTemplate",void 0),a([c()],Q.prototype,"relatedInfos",void 0),a([c()],Q.prototype,"title",void 0),Q=a([I("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],Q);const qt=Q;var ho=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],vu=[].concat(ho.slice(30,39),ho.slice(28,30).reverse()),wu=[{name:"default",colors:vu},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const uo="en-us",hr=new Map([["ar",()=>w(()=>import("./ar-bb1fe5ab.js"),["./ar-bb1fe5ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.a)],["bg-bg",()=>w(()=>import("./bg_BG-184a2bfa.js"),["./bg_BG-184a2bfa.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.b)],["bs-ba",()=>w(()=>import("./bs_BA-f32cc344.js"),["./bs_BA-f32cc344.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.b)],["ca-es",()=>w(()=>import("./ca_ES-d17ee95b.js"),["./ca_ES-d17ee95b.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.c)],["cs-cz",()=>w(()=>import("./cs_CZ-bcd1e782.js"),["./cs_CZ-bcd1e782.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.c)],["da-dk",()=>w(()=>import("./da_DK-27b1b06e.js"),["./da_DK-27b1b06e.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.d)],["de-de",()=>w(()=>import("./de_DE-c0a1d8dd.js"),["./de_DE-c0a1d8dd.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.d)],["de-ch",()=>w(()=>import("./de_CH-be7b4255.js"),["./de_CH-be7b4255.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.d)],["el-gr",()=>w(()=>import("./el_GR-05fb9ec0.js"),["./el_GR-05fb9ec0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.e)],["en-us",()=>w(()=>import("./en_US-170979d8.js"),["./en_US-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.e)],["en-ca",()=>w(()=>import("./en_CA-170979d8.js"),["./en_CA-170979d8.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.e)],["es-es",()=>w(()=>import("./es_ES-d0b66640.js"),["./es_ES-d0b66640.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.e)],["et-ee",()=>w(()=>import("./et_EE-56dd74d3.js"),["./et_EE-56dd74d3.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.e)],["fi-fi",()=>w(()=>import("./fi_FI-91d58cb9.js"),["./fi_FI-91d58cb9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.f)],["fr-fr",()=>w(()=>import("./fr_FR-a11503e0.js"),["./fr_FR-a11503e0.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.f)],["he-il",()=>w(()=>import("./he_IL-90db98c4.js"),["./he_IL-90db98c4.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.h)],["hr-hr",()=>w(()=>import("./hr_HR-fac8bb29.js"),["./hr_HR-fac8bb29.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.h)],["hu-hu",()=>w(()=>import("./hu_HU-e8803856.js"),["./hu_HU-e8803856.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.h)],["id-id",()=>w(()=>import("./id_ID-86e57d06.js"),["./id_ID-86e57d06.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.i)],["it-it",()=>w(()=>import("./it_IT-2d4485ba.js"),["./it_IT-2d4485ba.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.i)],["ja-jp",()=>w(()=>import("./ja_JP-77c6c16d.js"),["./ja_JP-77c6c16d.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.j)],["ko-kr",()=>w(()=>import("./ko_KR-e155b9ab.js"),["./ko_KR-e155b9ab.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.k)],["lt-lt",()=>w(()=>import("./lt_LT-fde47ae9.js"),["./lt_LT-fde47ae9.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.l)],["lv-lv",()=>w(()=>import("./lv_LV-359be050.js"),["./lv_LV-359be050.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.l)],["nb-no",()=>w(()=>import("./nb_NO-30d57c1a.js"),["./nb_NO-30d57c1a.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.n)],["nl-nl",()=>w(()=>import("./nl_NL-cb904b48.js"),["./nl_NL-cb904b48.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.n)],["pl-pl",()=>w(()=>import("./pl_PL-58c54c9f.js"),["./pl_PL-58c54c9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.p)],["pt-br",()=>w(()=>import("./pt_BR-d2e10248.js"),["./pt_BR-d2e10248.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.p)],["pt-pt",()=>w(()=>import("./pt_PT-65a41842.js"),["./pt_PT-65a41842.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.p)],["ro-ro",()=>w(()=>import("./ro_RO-15e90e9f.js"),["./ro_RO-15e90e9f.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.r)],["ru-ru",()=>w(()=>import("./ru_RU-a74d21e5.js"),["./ru_RU-a74d21e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.r)],["sk-sk",()=>w(()=>import("./sk_SK-a928dbd1.js"),["./sk_SK-a928dbd1.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.s)],["sl-sl",()=>w(()=>import("./sl_SL-1a3c3078.js"),["./sl_SL-1a3c3078.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.s)],["sr-rs",()=>w(()=>import("./sr_RS-0b18b911.js"),["./sr_RS-0b18b911.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.s)],["sv-se",()=>w(()=>import("./sv_SE-ce7e3f84.js"),["./sv_SE-ce7e3f84.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.s)],["th-th",()=>w(()=>import("./th_TH-1448f333.js"),["./th_TH-1448f333.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.t)],["tr-tr",()=>w(()=>import("./tr_TR-dd92f630.js"),["./tr_TR-dd92f630.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.t)],["uk-ua",()=>w(()=>import("./uk_UA-fe4434ed.js"),["./uk_UA-fe4434ed.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.u)],["vi-vn",()=>w(()=>import("./vi_VN-41938633.js"),["./vi_VN-41938633.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.v)],["zh-cn",()=>w(()=>import("./zh_Hans-524a1291.js"),["./zh_Hans-524a1291.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.z)],["zh-hk",()=>w(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.z)],["zh-tw",()=>w(()=>import("./zh_Hant-0e1f08e5.js"),["./zh_Hant-0e1f08e5.js","./_commonjsHelpers-2f3e7994.js","./_commonjs-dynamic-modules-42bbacb3.js"],import.meta.url).then(i=>i.z)]]);function bu(i){const e=i.split("-")[0].toLowerCase();let t=null;for(const n of hr.keys())if(n.startsWith(e)){t=n;break}return t}function Mu(i){return i?hr.has(i.toLowerCase())?i.toLowerCase():bu(i)||uo:uo}let Xt=null,Ii=null;async function Iu(i=Ea()){if(i=Mu(i),Xt&&i===Ii)return Xt;Xt=w(()=>import("./index-a70dd312.js"),["./index-a70dd312.js","./_commonjsHelpers-2f3e7994.js"],import.meta.url).then(e=>e.i),Ii=i;try{const[e,t]=await Promise.all([Xt,hr.get(Ii)()]);Ii===i&&(e.am4core.options.defaultLocale=t.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return Xt=null,Ii=null,null}return Xt}function Cu(i,e="default"){const t=wu.find(n=>n.name===e);return t?t.colors.map(n=>i.color(n)):null}const de="esri-feature-media",Z={base:de,mediaContainer:`${de}__container`,mediaItemContainer:`${de}__item-container`,mediaItem:`${de}__item`,mediaItemTitle:`${de}__item-title`,mediaItemCaption:`${de}__item-caption`,mediaPrevious:`${de}__previous`,mediaPreviousIconLTR:`${de}__previous-icon`,mediaPreviousIconRTL:`${de}__previous-icon--rtl`,mediaNext:`${de}__next`,mediaNextIconLTR:`${de}__next-icon`,mediaNextIconRTL:`${de}__next-icon--rtl`,mediaChart:`${de}__chart`,mediaButton:`${de}__button`,mediaIcon:`${de}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},as=.05,ls=.95,cs=15,Ue="color",lt="tooltip",Ci="value",po="default-line-value";let fe=class extends ce{constructor(i,e){super(i,e),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new qt,this.messages=null,this._getChartDependencies=async t=>{const n=await Iu(),{destroyed:s,viewModel:r}=this;if(s||!r||!t)return;const{activeMediaInfo:o}=r,l=await this._getRendererColors(n);this._renderChart({chartDiv:t,mediaInfo:o,chartsModule:n,colorMap:l})}}initialize(){this._featureElementInfo=new zn,this.addHandles([y(()=>{var i,e;return[(i=this.viewModel)==null?void 0:i.activeMediaInfo,(e=this.viewModel)==null?void 0:e.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),V),y(()=>{var i,e;return[(i=this.viewModel)==null?void 0:i.description,(e=this.viewModel)==null?void 0:e.title]},()=>this._setupFeatureElementInfo(),V)])}destroy(){var i;this._clearMediaRefreshTimer(),(i=this._featureElementInfo)==null||i.destroy()}get attributes(){return this.viewModel.attributes}set attributes(i){this.viewModel.attributes=i}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(i){this.viewModel.activeMediaInfoIndex=i}get description(){return this.viewModel.description}set description(i){this.viewModel.description=i}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(i){this.viewModel.fieldInfoMap=i}get layer(){return this.viewModel.layer}set layer(i){this.viewModel.layer=i}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(i){this.viewModel.mediaInfos=i}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(i){this.viewModel.popupTemplate=i}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(i){this.viewModel.relatedInfos=i}get title(){return this.viewModel.title}set title(i){this.viewModel.title=i}render(){var i;return m("div",{bind:this,class:Z.base,onkeyup:this._handleMediaKeyup},(i=this._featureElementInfo)==null?void 0:i.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:i}=this.viewModel;return i?m("div",{key:"media-element-container",class:Z.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(i){const{_refreshIntervalInfo:e}=this,{activeMediaInfoIndex:t,formattedMediaInfoCount:n}=this.viewModel,{value:s,refreshInterval:r,altText:o,title:l,type:d}=i,{sourceURL:h,linkURL:u}=s,p=Na(u??void 0)?"_blank":"_self",g=p==="_blank"?"noreferrer":"",f=r?e:null,b=f?f.timestamp:0,C=f?f.sourceURL:h,T=m("img",{alt:o||l,key:`media-${d}-${t}-${n}-${b}`,src:C??void 0});return(u?m("a",{title:l,href:u,rel:g,target:p},T):null)||T}renderChartMediaInfo(i){const{activeMediaInfoIndex:e,formattedMediaInfoCount:t}=this.viewModel;return m("div",{key:`media-${i.type}-${e}-${t}`,bind:this,class:Z.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:i}=this.viewModel;return i?i.type==="image"?this.renderImageMediaInfo(i):i.type.includes("chart")?this.renderChartMediaInfo(i):null:null}renderMediaInfo(){const{activeMediaInfo:i}=this.viewModel;if(!i)return null;const e=i.title?m("div",{key:"media-title",class:Z.mediaItemTitle,innerHTML:i.title}):null,t=i.caption?m("div",{key:"media-caption",class:Z.mediaItemCaption,innerHTML:i.caption}):null;return m("div",{key:"media-container",class:Z.mediaItemContainer},m("div",{key:"media-item-container",class:Z.mediaItem},this.renderMediaInfoType()),e,t)}renderMediaPageButton(i){if(this.viewModel.formattedMediaInfoCount<2)return null;const e=i==="previous",t=e?this.messages.previous:this.messages.next,n=e?this.classes(Z.mediaButton,Z.mediaPrevious):this.classes(Z.mediaButton,Z.mediaNext),s=e?this.classes(Z.mediaIcon,Z.mediaPreviousIconLTR,Z.iconLeftTriangleArrow):this.classes(Z.mediaIcon,Z.mediaNextIconLTR,Z.iconRightTriangleArrow),r=e?this.classes(Z.mediaIcon,Z.mediaPreviousIconRTL,Z.iconRightTriangleArrow):this.classes(Z.mediaIcon,Z.mediaNextIconRTL,Z.iconLeftTriangleArrow),o=e?"media-previous":"media-next",l=e?this._previous:this._next;return m("button",{type:"button",key:o,title:t,"aria-label":t,tabIndex:0,class:n,bind:this,onclick:l},m("span",{"aria-hidden":"true",class:s}),m("span",{"aria-hidden":"true",class:r}))}_setupFeatureElementInfo(){var t;const{description:i,title:e}=this;(t=this._featureElementInfo)==null||t.set({description:i,title:e})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:i,layer:e}=this.viewModel;return i&&(e!=null&&e.featureReduction)&&"renderer"in e.featureReduction?e.featureReduction.renderer:e==null?void 0:e.renderer}async _getRendererColors(i){const{am4core:e}=i,t=new Map,n=this._getRenderer(),s="default";if(!n)return t;const r=await su(n);return r.delete(s),Array.from(r.values()).every(o=>(o==null?void 0:o.length)===1)&&(t.set(po,e.color({r:50,g:50,b:50,a:1})),Array.from(r.keys()).forEach(o=>{var l;o&&t.set(o,e.color((l=r.get(o))==null?void 0:l[0].toCss(!0)))})),t}_handleMediaKeyup(i){const e=Vt(i);e==="ArrowLeft"&&(i.stopPropagation(),this.viewModel.previous()),e==="ArrowRight"&&(i.stopPropagation(),this.viewModel.next())}_renderChart(i){const{abilities:e}=this.viewModel,{chartsModule:t,chartDiv:n,mediaInfo:s,colorMap:r}=i,{value:o,type:l}=s,{am4core:d}=t,h=Cu(d);function u(f){f instanceof d.ColorSet&&h&&(f.list=h)}An()&&d.useTheme(t.am4themes_dark);const p=window.matchMedia("(prefers-reduced-motion: reduce)");e.chartAnimation&&!p.matches?d.useTheme(t.am4themes_animated):d.unuseTheme(t.am4themes_animated),d.useTheme(u);const g=l==="pie-chart"?this._createPieChart(i):this._createXYChart(i);n.setAttribute("aria-label",s.altText||s.title),g.data=o.series.map(f=>({[lt]:f.tooltip,[Ci]:f.value,[Ue]:r.get(f.fieldName)})).filter(f=>l!=="pie-chart"||f.value!=null&&f.value>0)}_customizeChartTooltip(i,e){i&&(i.label.wrap=!0,i.label.maxWidth=200,i.autoTextColor=!1,i.getFillFromObject=!1,i.label.fill=e.color("#ffffff"),i.background.fill=e.color({r:0,g:0,b:0,a:.7}))}_createPieChart(i){const{chartDiv:e,chartsModule:t}=i,{am4core:n,am4charts:s}=t,r=n.create(e,s.PieChart);r.rtl=qe(this.container);const o=r.series.push(new s.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value=Ci,o.dataFields.category=lt,this._customizeChartTooltip(o.tooltip,n),o.slices.template.propertyFields.fill=Ue,o.slices.template.propertyFields.stroke=Ue,r}_getMinSeriesValue(i){let e=0;return i.forEach(t=>e=Math.min(t.value,e)),e}_createColumnChart(i,e){const{chartsModule:t,mediaInfo:n}=e,{value:s}=n,{am4core:r,am4charts:o}=t,l=i.xAxes.push(new o.CategoryAxis);l.dataFields.category=lt,l.renderer.labels.template.disabled=!0;const d=l.tooltip;this._customizeChartTooltip(d,r),d.events.on("sizechanged",()=>{d.dy=-d.contentHeight});const h=i.yAxes.push(new o.ValueAxis),u=h.renderer.labels.template;h.renderer.minLabelPosition=as,h.renderer.maxLabelPosition=ls,h.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(h.tooltip,r),u.wrap=!0;const p=i.series.push(new o.ColumnSeries);p.dataFields.valueY=Ci,p.dataFields.categoryX=lt,p.columns.template.propertyFields.fill=Ue,p.columns.template.propertyFields.stroke=Ue,i.cursor=new o.XYCursor,s.series.length>cs&&(i.scrollbarX=new r.Scrollbar)}_createBarChart(i,e){const{chartsModule:t,mediaInfo:n}=e,{value:s}=n,{am4core:r,am4charts:o}=t,l=i.yAxes.push(new o.CategoryAxis);l.dataFields.category=lt,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0;const d=l.tooltip;this._customizeChartTooltip(d,r),d.events.on("sizechanged",()=>{d.dx=d.contentWidth});const h=i.xAxes.push(new o.ValueAxis),u=h.renderer.labels.template;h.renderer.minLabelPosition=as,h.renderer.maxLabelPosition=ls,h.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(h.tooltip,r),u.wrap=!0;const p=i.series.push(new o.ColumnSeries);p.dataFields.valueX=Ci,p.dataFields.categoryY=lt,p.columns.template.propertyFields.fill=Ue,p.columns.template.propertyFields.stroke=Ue,i.cursor=new o.XYCursor,s.series.length>cs&&(i.scrollbarY=new r.Scrollbar)}_createLineChart(i,e){const{chartsModule:t,mediaInfo:n,colorMap:s}=e,{value:r}=n,{am4core:o,am4charts:l}=t,d=i.xAxes.push(new l.CategoryAxis);d.dataFields.category=lt,d.renderer.labels.template.disabled=!0;const h=d.tooltip;this._customizeChartTooltip(h,o),h.events.on("sizechanged",()=>{h.dy=-h.contentHeight});const u=i.yAxes.push(new l.ValueAxis),p=u.renderer.labels.template;u.renderer.minLabelPosition=as,u.renderer.maxLabelPosition=ls,u.min=this._getMinSeriesValue(r.series),this._customizeChartTooltip(u.tooltip,o),p.wrap=!0;const g=i.series.push(new l.LineSeries);g.dataFields.categoryX=lt,g.dataFields.valueY=Ci,g.strokeWidth=1;const f=s.get(po);f&&(g.stroke=f);const b=g.bullets.push(new l.CircleBullet);b.propertyFields.fill=Ue,b.propertyFields.stroke=Ue,i.cursor=new l.XYCursor,r.series.length>cs&&(i.scrollbarX=new o.Scrollbar)}_createXYChart(i){const{chartDiv:e,chartsModule:t,mediaInfo:n}=i,{type:s}=n,{am4core:r,am4charts:o}=t,l=r.create(e,o.XYChart);return l.rtl=qe(this.container),s==="column-chart"&&this._createColumnChart(l,i),s==="bar-chart"&&this._createBarChart(l,i),s==="line-chart"&&this._createLineChart(l,i),l}_clearMediaRefreshTimer(){const{_refreshTimer:i}=this;i&&(clearTimeout(i),this._refreshTimer=null)}_updateMediaInfoTimestamp(i){const e=Date.now();this._refreshIntervalInfo={timestamp:e,sourceURL:i&&this._getImageSource(i,e)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:i}=this.viewModel;i&&i.type==="image"&&i.refreshInterval&&this._setRefreshTimeout(i)}_setRefreshTimeout(i){const{refreshInterval:e,value:t}=i;if(!e)return;const n=6e4*e;this._updateMediaInfoTimestamp(t.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(t.sourceURL)},n);this._refreshTimer=s}_getImageSource(i,e){const t=i.includes("?")?"&":"?",[n,s=""]=i.split("#");return`${n}${t}timestamp=${e}${s?"#":""}${s}`}};a([c()],fe.prototype,"attributes",null),a([c()],fe.prototype,"activeMediaInfoIndex",null),a([c()],fe.prototype,"description",null),a([c()],fe.prototype,"fieldInfoMap",null),a([c()],fe.prototype,"layer",null),a([c()],fe.prototype,"mediaInfos",null),a([c()],fe.prototype,"popupTemplate",null),a([c()],fe.prototype,"relatedInfos",null),a([c()],fe.prototype,"title",null),a([c({type:qt})],fe.prototype,"viewModel",void 0),a([c(),le("esri/widgets/Feature/t9n/Feature")],fe.prototype,"messages",void 0),fe=a([I("esri.widgets.Feature.FeatureMedia")],fe);const Ka=fe,Tu=["$datastore","$map","$layer","$aggregatedfeatures"],Eu="esri.widgets.Feature.support.arcadeFeatureUtils",xu=S.getLogger(Eu);function $u(i){return typeof i=="string"?Ki(ar(i)):Array.isArray(i)?Au(i):(i==null?void 0:i.declaredClass)==="esri.arcade.Dictionary"?ku(i):i}function Au(i){return`<ul class="esri-widget__list">${i.map(e=>`<li>${typeof e=="string"?Ki(ar(e)):e}</li>`).join("")}</ul>`}function ku(i){return`<table class="esri-widget__table">${i.keys().map(e=>{const t=i.field(e);return`<tr><th>${e}</th><td>${typeof t=="string"?Ki(ar(t)):t}</td></tr>`}).join("")}</table>`}function Pu({aggregatedFeatures:i,arcadeUtils:e,featureSetVars:t,context:n,viewInfo:s,map:r,graphic:o,interceptor:l}){t.forEach(d=>{const h=d.toLowerCase(),u=s.sr,p={map:r,spatialReference:u,interceptor:l};if(h==="$map"&&(n.vars[h]=e.convertMapToFeatureSetCollection(p)),h==="$layer"&&(n.vars[h]=e.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:u,interceptor:l})),h==="$datastore"&&(n.vars[h]=e.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:u,interceptor:l})),h==="$aggregatedfeatures"){const g=o.layer,{fields:f,objectIdField:b,geometryType:C,spatialReference:T,displayField:F}=g,N=new ld({fields:f,objectIdField:b,geometryType:C,spatialReference:T,displayField:F,...g.type==="feature"?{templates:g.templates,typeIdField:g.typeIdField,types:g.types}:null,source:i});n.vars[h]=e.convertFeatureLayerToFeatureSet({layer:N,spatialReference:T,interceptor:l})}})}function Ya(){return w(()=>import("./arcadeUtils-7fcdf76c.js").then(i=>i.ax),["./arcadeUtils-7fcdf76c.js","./geometry-8c15a791.js","./ensureType-8c80e8c7.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./Error-9392329b.js","./Extent-52b65909.js","./cast-4d1aa82d.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./preload-helper-41c905a7.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./fieldUtils-c41301b0.js","./TimeReference-d5a14980.js","./Clonable-ad03ca71.js","./number-0ccbbda1.js","./locale-30120714.js","./Field-899dc481.js","./enumeration-de0a766e.js","./fieldType-68c65bf7.js","./jsonUtils-e2434b33.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./mathUtils-505ef34b.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./request-16c6134d.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./sizeVariableUtils-d4870b0d.js"],import.meta.url)}function Fu(i){return"createQuery"in i&&"queryFeatures"in i}async function Ru({graphic:i,view:e}){const{isAggregate:t,layer:n}=i;if(!t||!n||(e==null?void 0:e.type)!=="2d")return[];const s=await e.whenLayerView(n);if(!Fu(s))return[];const r=s.createQuery(),o=i.getObjectId();r.aggregateIds=o!=null?[o]:[];const{features:l}=await s.queryFeatures(r);return l}async function Qa({expressionInfo:i,arcadeUtils:e,interceptor:t,spatialReference:n,map:s,graphic:r,view:o}){if(!i||!i.expression)return null;const l=e.createSyntaxTree(i.expression),d=Tu.filter(f=>e.hasVariable(l,f)),[h]=await Promise.all([Ru({graphic:r,view:o}),e.loadScriptDependencies(l,!0,d)]),u=e.getViewInfo({spatialReference:n}),p=e.createExecContext(r,u);p.interceptor=t,p.useAsync=!0,Pu({aggregatedFeatures:h,arcadeUtils:e,featureSetVars:d,context:p,viewInfo:u,map:s,graphic:r,interceptor:t});const g=e.createFunction(l,p);return e.executeAsyncFunction(g,p).catch(f=>xu.error("arcade-execution-error",{error:f,graphic:r,expressionInfo:i}))}async function Su({expressionInfos:i,spatialReference:e,graphic:t,interceptor:n,map:s,view:r}){if(!i||!i.length)return{};const o=await Ya(),l={};for(const u of i)l[`expression/${u.name}`]=Qa({expressionInfo:u,arcadeUtils:o,interceptor:n,spatialReference:e,map:s,graphic:t,view:r});const d=await Et(l),h={};for(const u in d)h[u]=$u(d[u].value);return h}const Lu=1;let we=class extends Vn(L){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var s,r;const t=(s=this.contentElement)==null?void 0:s.type;(r=this.contentElementViewModel)==null||r.destroy();const n=t==="fields"?new Bn:t==="media"?new qt:t==="text"?new $n:null;this._set("contentElementViewModel",n)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=gi(this._compile,Lu,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:n,interceptor:s,spatialReference:r,map:o,view:l,_abortController:d}=this;if(!(t&&n&&r&&o))return void this._set("contentElement",null);const h=await Ya();if(d!==this._abortController)return;const u=await Qa({arcadeUtils:h,expressionInfo:t,graphic:n,interceptor:s,map:o,spatialReference:r,view:l});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await u.castAsJsonAsync(d==null?void 0:d.signal),g=p==null?void 0:p.type,f=g==="media"?Gc.fromJSON(p):g==="text"?Ta.fromJSON(p):g==="fields"?Zc.fromJSON(p):null;this._set("contentElement",f)},this.handles.add([y(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),V),y(()=>[this.contentElement],()=>this._createVM(),V)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:n}=this;return e?"loading":t||n?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};a([c()],we.prototype,"_abortController",void 0),a([c({type:Kc})],we.prototype,"expressionInfo",void 0),a([c({type:jt})],we.prototype,"graphic",void 0),a([c({readOnly:!0})],we.prototype,"contentElement",void 0),a([c({readOnly:!0})],we.prototype,"contentElementViewModel",void 0),a([c()],we.prototype,"interceptor",void 0),a([c()],we.prototype,"spatialReference",null),a([c({readOnly:!0})],we.prototype,"state",null),a([c()],we.prototype,"map",null),a([c()],we.prototype,"view",void 0),we=a([I("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],we);const ur=we,tn={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let hn=class extends ce{constructor(e,t){super(e,t),this._contentWidget=null,this.viewModel=new ur}initialize(){this.addHandles(y(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),V))}destroy(){this._destroyContentWidget()}renderLoading(){return m("div",{key:"loading-container",class:tn.loadingSpinnerContainer},m("span",{class:this.classes(tn.iconLoading,tn.spinner)}))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:tn.base},e==="loading"?this.renderLoading():e==="disabled"?null:(t=this._contentWidget)==null?void 0:t.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:t}=this.viewModel,n=t==null?void 0:t.type;this._destroyContentWidget();const s=e?n==="fields"?new Za({viewModel:e}):n==="media"?new Ka({viewModel:e}):n==="text"?new cn({viewModel:e}):null:null;this._contentWidget=s,this.scheduleRender()}};a([c({type:ur})],hn.prototype,"viewModel",void 0),hn=a([I("esri.widgets.Feature.FeatureExpression")],hn);const Du=hn,ds=100;let z=class extends ga(xa(Vn(L))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:t}=this;t&&t.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:t}=this;t&&t.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:t}=this;t&&t.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const t=new AbortController;this._queryAbortController=t,await Ni(this._query()),this._queryAbortController===t&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const t=new AbortController;this._queryFeatureCountAbortController=t,await Ni(this._queryFeatureCount()),this._queryFeatureCountAbortController===t&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const t=new AbortController;this._queryPageAbortController=t,await Ni(this._queryPage()),this._queryPageAbortController===t&&(this._queryPageAbortController=null)},this._queryThrottled=gi(this._queryController,ds,this),this._queryFeatureCountThrottled=gi(this._queryFeatureCountController,ds,this),this._queryPageThrottled=gi(this._queryPageController,ds,this),this._query=async()=>{const{_queryAbortController:t,relatedFeatures:n}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,n.removeAll(),n.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:t==null?void 0:t.signal})))},this.handles.add([y(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),V),y(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),y(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:t,featureCount:n}=this,s=1,r=Math.ceil(n/t)||1;this._set("featurePage",Math.min(Math.max(e,s),r))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:t}=this;return e&&(t!=null&&t.loaded)?e.map(n=>{const s=n.clone(),r=Ui(n.field,t);return s.field=r,s}):e??[]}get supportsCacheHint(){var e,t,n;return!!((n=(t=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:t.queryRelated)!=null&&n.supportsCacheHint)}get canQuery(){var t,n;const e=(n=(t=this.layer)==null?void 0:t.capabilities)==null?void 0:n.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e,t;return((t=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:t.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,t;return(this.objectIdField&&((t=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:t[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new G}get relatedLayer(){const{layer:e,map:t,relationship:n}=this;return e!=null&&e.loaded&&t&&n?Ah(t,e,n)??null:null}get relationship(){var n;const{relationshipId:e,layer:t}=this;return typeof e=="number"?((n=t==null?void 0:t.relationships)==null?void 0:n.find(({id:s})=>s===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new G}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:t,_queryPageAbortController:n,canQuery:s}=this;return t?"loading":e||n?"querying":s?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(t=>!t.destroyed&&t.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:t,relationshipId:n,objectId:s,_queryFeatureCountAbortController:r,canQuery:o,supportsCacheHint:l}=this;if(await(e==null?void 0:e.load()),await(t==null?void 0:t.load()),!o||!e||!t)return void this._set("featureCount",0);const d=t.createQuery(),h=new ks({cacheHint:l,relationshipId:n,returnGeometry:!1,objectIds:[s],where:Ar(d.where,void 0)}),u=await e.queryRelatedFeaturesCount(h,{signal:r==null?void 0:r.signal});this._set("featureCount",u[s]||0)}_sliceFeatures(e){const{showAllEnabled:t,displayCount:n}=this;return t?e:n?e.slice(0,n):[]}async _queryPage(){const{relatedFeatures:e,featurePage:t,showAllEnabled:n,_queryPageAbortController:s}=this;!n||t<2||e.addMany(await this._queryRelatedFeatures({signal:s==null?void 0:s.signal}))}async _queryRelatedFeatures(e){var ne;const{orderByFieldsFixedCasing:t,showAllEnabled:n,featuresPerPage:s,displayCount:r,layer:o,relationshipId:l,featurePage:d,featureCount:h,relatedLayer:u,supportsCacheHint:p}=this,{canQuery:g,objectId:f}=this;if(!g||!o||!u)return[];const b=n?((d-1)*s+h)%h:0,C=n?s:r,T=u.objectIdField,F=[...t==null?void 0:t.map(q=>q.field),T].filter(v),N=t==null?void 0:t.map(q=>`${q.field} ${q.order}`),D=u.createQuery(),W=new ks({orderByFields:N,start:b,num:C,outFields:F,cacheHint:p,relationshipId:l,returnGeometry:!1,objectIds:[f],where:Ar(D.where,void 0)}),J=((ne=(await o.queryRelatedFeatures(W,{signal:e==null?void 0:e.signal}))[f])==null?void 0:ne.features)||[];return J.forEach(q=>{q.sourceLayer=u,q.layer=u}),J}};a([c()],z.prototype,"_queryAbortController",void 0),a([c()],z.prototype,"_queryPageAbortController",void 0),a([c()],z.prototype,"_queryFeatureCountAbortController",void 0),a([c({value:1})],z.prototype,"featurePage",null),a([c()],z.prototype,"featuresPerPage",void 0),a([c({readOnly:!0})],z.prototype,"orderByFieldsFixedCasing",null),a([c({readOnly:!0})],z.prototype,"supportsCacheHint",null),a([c({readOnly:!0})],z.prototype,"canQuery",null),a([c()],z.prototype,"description",void 0),a([c({readOnly:!0})],z.prototype,"itemDescriptionFieldName",null),a([c({value:3})],z.prototype,"displayCount",null),a([c({type:jt})],z.prototype,"graphic",void 0),a([c()],z.prototype,"layer",void 0),a([c()],z.prototype,"map",void 0),a([c({readOnly:!0})],z.prototype,"objectId",null),a([c({readOnly:!0})],z.prototype,"objectIdField",null),a([c()],z.prototype,"orderByFields",void 0),a([c({readOnly:!0})],z.prototype,"relatedFeatures",null),a([c({readOnly:!0})],z.prototype,"relatedLayer",null),a([c({readOnly:!0})],z.prototype,"relationship",null),a([c()],z.prototype,"featureCount",void 0),a([c({readOnly:!0})],z.prototype,"relatedFeatureViewModels",null),a([c()],z.prototype,"relationshipId",void 0),a([c()],z.prototype,"showAllEnabled",void 0),a([c()],z.prototype,"state",null),a([c()],z.prototype,"title",void 0),z=a([I("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],z);const pr=z,Ri="esri-feature",hs=`${Ri}-relationship`,We={base:hs,esriWidget:"esri-widget",listContainer:`${hs}__list`,listContainerQuerying:`${hs}__list--querying`,featureObserver:`${Ri}__feature-observer`,stickySpinnerContainer:`${Ri}__sticky-loading-container`,loadingSpinnerContainer:`${Ri}__loading-container`,spinner:`${Ri}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},mo={title:!0,description:!0};let ue=class extends ce{constructor(e,t){super(e,t),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([n])=>{n!=null&&n.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new pr,this.messages=null,this.messagesCommon=null,this.visibleElements={...mo},this._increaseFeaturePage=()=>{const{state:n,showAllEnabled:s,relatedFeatures:r,featuresPerPage:o,featurePage:l}=this.viewModel;n==="ready"&&s&&r.length>=o*l&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new zn,this.addHandles([y(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),V),y(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),Pe(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([w(()=>import("./calcite-list-c00a2345.js"),["./calcite-list-c00a2345.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./interactive-573cbe88.js","./observers-0326015d.js","./utils3-1ce076c1.js","./loadable-25ad9e4e.js","./debounce-31e0cfcc.js","./t9n-32a9e543.js","./icon-30e1a9e4.js","./loader-271ba3e5.js","./guid-9426053f.js","./scrim-e0966f74.js"],import.meta.url),w(()=>import("./calcite-list-item-f39ec9cf.js"),["./calcite-list-item-f39ec9cf.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./interactive-573cbe88.js","./utils3-1ce076c1.js","./loadable-25ad9e4e.js","./icon-30e1a9e4.js","./observers-0326015d.js"],import.meta.url),w(()=>import("./calcite-icon-a9b2c435.js"),["./calcite-icon-a9b2c435.js","./icon-30e1a9e4.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js"],import.meta.url),w(()=>import("./calcite-notice-d5c17adf.js"),["./calcite-notice-d5c17adf.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js","./loadable-25ad9e4e.js","./t9n-32a9e543.js","./icon-30e1a9e4.js"],import.meta.url)])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=ae(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:t,displayCount:n}=this.viewModel;return!e&&!!t&&(t>n||n===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:t}=this.viewModel;return Be(t===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:t})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...mo,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?m("div",{key:"sticky-loader",class:We.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return m("span",{class:this.classes(We.iconLoading,We.spinner)})}renderLoading(){return m("div",{key:"loading-container",class:We.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return m("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=qe(this.container)?"chevron-left":"chevron-right";return m("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var r,o;const{itemDescriptionFieldName:t}=this.viewModel,n=e.title;e.description=t&&((r=e.formattedAttributes)==null?void 0:r.global[t]);const s=e.state==="loading";return m("calcite-list-item",{key:e.uid,label:s?`${(o=this.messagesCommon)==null?void 0:o.loading}`:n,description:s?"":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?m("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return m("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return m("div",{key:"feature-observer",class:We.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return m("calcite-list",null,e.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:t}=this.viewModel;return m("div",{key:"list-container",class:this.classes(We.listContainer,{[We.listContainerQuerying]:t==="querying"})},e?this.renderList():t==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return m("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},m("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var t;const{state:e}=this.viewModel;return m("div",{class:this.classes(We.base,We.esriWidget)},(t=this._featureElementInfo)==null?void 0:t.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,t="related-feature-viewmodels";this.removeHandles(t),e==null||e.forEach(n=>{this.addHandles(y(()=>[n.title,n.state],()=>this.scheduleRender(),V),t)}),this.scheduleRender()}_setupFeatureElementInfo(){var r;const{headingLevel:e,visibleElements:t}=this,n=t.description&&this.description,s=t.title&&this.title;(r=this._featureElementInfo)==null||r.set({description:n,title:s,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:t}=this.viewModel;await Xs(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&t&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};a([c()],ue.prototype,"_relatedFeatureIntersectionObserverNode",void 0),a([c({readOnly:!0})],ue.prototype,"displayShowAllButton",null),a([c({readOnly:!0})],ue.prototype,"displayListItems",null),a([c()],ue.prototype,"description",null),a([c({readOnly:!0})],ue.prototype,"featureCountDescription",null),a([c()],ue.prototype,"headingLevel",void 0),a([c()],ue.prototype,"title",null),a([c({type:pr})],ue.prototype,"viewModel",void 0),a([c(),le("esri/widgets/Feature/t9n/Feature")],ue.prototype,"messages",void 0),a([c(),le("esri/t9n/common")],ue.prototype,"messagesCommon",void 0),a([c()],ue.prototype,"visibleElements",void 0),a([ye("visibleElements")],ue.prototype,"castVisibleElements",null),ue=a([I("esri.widgets.Feature.FeatureRelationship")],ue);const go=ue;let Ou=class{constructor(e,t){this.preLayerQueryCallback=e,this.preRequestCallback=t,this.preLayerQueryCallback||(this.preLayerQueryCallback=n=>{}),this.preRequestCallback||(this.preLayerQueryCallback=n=>{})}};var Si;const Vu=1,fo="content-view-models",_o="relationship-view-models",yo={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let U=Si=class extends xa(L){constructor(i){super(i),this._handles=new xt,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=gi(this._graphicChanged,Vu,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...yo},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:t}=this;return e.type==="attachments"&&!!t.attachmentsContent||e.type==="custom"&&!!t.customContent||e.type==="fields"&&!!t.fieldsContent||e.type==="media"&&!!t.mediaContent||e.type==="text"&&!!t.textContent||e.type==="expression"&&!!t.expressionContent||e.type==="relationship"&&!!t.relationshipContent},this._handles.add(y(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),V))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return v(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return Mh(eo(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Va(this.graphic)}castAbilities(i){return{...yo,...i}}get isTable(){var i;return((i=this._sourceLayer)==null?void 0:i.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(i){this._set("graphic",i?i.clone():null)}get spatialReference(){var i;return((i=this.view)==null?void 0:i.spatialReference)??null}set spatialReference(i){this._override("spatialReference",i)}get map(){var i;return((i=this.view)==null?void 0:i.map)||null}set map(i){this._override("map",i)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(i,e){const t=this.contentViewModels[i];t instanceof qt&&t.setActiveMedia(e)}nextMedia(i){const e=this.contentViewModels[i];e instanceof qt&&e.next()}previousMedia(i){const e=this.contentViewModels[i];e instanceof qt&&e.previous()}async updateGeometry(){var o,l;const{graphic:i,spatialReference:e,_sourceLayer:t}=this;await(t==null?void 0:t.load());const n=t==null?void 0:t.objectIdField;if(!n||!i||!t)return;const s=(o=i==null?void 0:i.attributes)==null?void 0:o[n];if(s==null)return;const r=[s];if(!i.geometry){const d=(l=await Ua({layer:t,graphic:i,outFields:[],objectIds:r,returnGeometry:!0,spatialReference:e}))==null?void 0:l.geometry;d&&(i.geometry=d)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:i}=this;if(!i)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(t){oa(t)||(this._error=t,S.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:t,graphic:i,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:i}=this;i&&i.abort(),this._featureAbortController=null}_compileContentElement(i,e){return i.type==="attachments"?this._compileAttachments(i,e):i.type==="custom"?this._compileCustom(i,e):i.type==="fields"?this._compileFields(i,e):i.type==="media"?this._compileMedia(i,e):i.type==="text"?this._compileText(i,e):i.type==="expression"?this._compileExpression(i,e):i.type==="relationship"?this._compileRelationship(i,e):void 0}_compileContent(i){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(i)?i.filter(this._isAllowedContentType).map((e,t)=>this._compileContentElement(e,t)).filter(v):typeof i=="string"?this._compileText(new Ta({text:i}),0).text:i}_destroyContentViewModels(){var i,e;(i=this._handles)==null||i.remove(_o),(e=this._handles)==null||e.remove(fo),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_matchesFeature(i,e){var s;const t=(s=i==null?void 0:i.graphic)==null?void 0:s.getObjectId(),n=e==null?void 0:e.getObjectId();return v(t)&&v(n)&&t===n}_setRelatedFeaturesViewModels({relatedFeatureViewModels:i,relatedFeatures:e,map:t}){const{view:n,spatialReference:s}=this;e==null||e.filter(Boolean).forEach(r=>{i.find(o=>this._matchesFeature(o,r))||i.add(new Si({abilities:{relationshipContent:!1},map:t,view:n,spatialReference:s,graphic:r}))}),i.forEach(r=>{(e==null?void 0:e.find(l=>this._matchesFeature(r,l)))||i.remove(r)})}_setExpressionContentVM(i,e){const t=this.formattedAttributes,{contentElement:n,contentElementViewModel:s}=i,r=n==null?void 0:n.type;s&&r&&(r==="fields"&&(this._createFieldsFormattedAttributes({contentElement:n,contentElementIndex:e,formattedAttributes:t}),s.set(this._createFieldsVMParams(n,e))),r==="media"&&(this._createMediaFormattedAttributes({contentElement:n,contentElementIndex:e,formattedAttributes:t}),s.set(this._createMediaVMParams(n,e))),r==="text"&&s.set(this._createTextVMParams(n)))}_compileRelationship(i,e){const{displayCount:t,orderByFields:n,relationshipId:s,title:r,description:o}=i,{_sourceLayer:l,graphic:d,map:h}=this,u=new pr({displayCount:t,graphic:d,orderByFields:n,relationshipId:s,layer:l,map:h,...this._compileTitleAndDesc({title:r,description:o})});return this.contentViewModels[e]=u,this._handles.add(Pe(()=>u.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(u)),_o),i}_compileExpression(i,e){const{expressionInfo:t}=i,{graphic:n,map:s,spatialReference:r,view:o}=this,l=new ur({expressionInfo:t,graphic:n,interceptor:Si.interceptor,map:s,spatialReference:r,view:o});return this.contentViewModels[e]=l,this._handles.add(y(()=>l.contentElementViewModel,()=>this._setExpressionContentVM(l,e),V),fo),i}_compileAttachments(i,e){const{graphic:t}=this,{description:n,title:s}=i;return this.contentViewModels[e]=new cr({graphic:t,...this._compileTitleAndDesc({title:s,description:n})}),i}_compileCustom(i,e){const{graphic:t}=this,{creator:n,destroyer:s}=i;return this.contentViewModels[e]=new $n({graphic:t,creator:n,destroyer:s}),i}_compileTitleAndDesc({title:i,description:e}){const{_fieldInfoMap:t,_sourceLayer:n,graphic:s,formattedAttributes:r}=this,o=s==null?void 0:s.attributes,l=this._expressionAttributes,d=r.global;return{title:Bt({attributes:o,fieldInfoMap:t,globalAttributes:d,expressionAttributes:l,layer:n,text:i}),description:Bt({attributes:o,fieldInfoMap:t,globalAttributes:d,expressionAttributes:l,layer:n,text:e})}}_createFieldsVMParams(i,e){var h;const t=this._effectivePopupTemplate,n=this.formattedAttributes,s={...n==null?void 0:n.global,...n==null?void 0:n.content[e]},r=(h=(i==null?void 0:i.fieldInfos)||(t==null?void 0:t.fieldInfos))==null?void 0:h.filter(({fieldName:u})=>rr(u)||it(u)||s.hasOwnProperty(u)),o=t==null?void 0:t.expressionInfos,{description:l,title:d}=i;return{attributes:s,expressionInfos:o,fieldInfos:r,...this._compileTitleAndDesc({title:d,description:l})}}_compileFields(i,e){const t=i.clone(),n=new Bn(this._createFieldsVMParams(i,e));return this.contentViewModels[e]=n,t.fieldInfos=n.formattedFieldInfos.slice(0),t}_createMediaVMParams(i,e){const{abilities:t,graphic:n,_fieldInfoMap:s,_effectivePopupTemplate:r,relatedInfos:o,_sourceLayer:l,_expressionAttributes:d}=this,h=this.formattedAttributes,u=(n==null?void 0:n.attributes)??{},{description:p,mediaInfos:g,title:f}=i;return{abilities:{chartAnimation:t.chartAnimation},activeMediaInfoIndex:i.activeMediaInfoIndex||0,attributes:u,isAggregate:n==null?void 0:n.isAggregate,layer:l,fieldInfoMap:s,formattedAttributes:{...h==null?void 0:h.global,...h==null?void 0:h.content[e]},expressionAttributes:d,mediaInfos:g,popupTemplate:r,relatedInfos:o,...this._compileTitleAndDesc({title:f,description:p})}}_compileMedia(i,e){const t=i.clone(),n=new qt(this._createMediaVMParams(i,e));return t.mediaInfos=n.formattedMediaInfos.slice(0),this.contentViewModels[e]=n,t}_createTextVMParams(i){var r;const{graphic:e,_fieldInfoMap:t,_sourceLayer:n,_expressionAttributes:s}=this;if(i&&i.text){const o=(e==null?void 0:e.attributes)??{},l=((r=this.formattedAttributes)==null?void 0:r.global)??{};i.text=Bt({attributes:o,fieldInfoMap:t,globalAttributes:l,expressionAttributes:s,layer:n,text:i.text})}return{graphic:e,creator:i.text}}_compileText(i,e){const t=i.clone();return this.contentViewModels[e]=new $n(this._createTextVMParams(t)),t}_compileLastEditInfo(){const{_effectivePopupTemplate:i,_sourceLayer:e,graphic:t}=this;if(!i)return;const{lastEditInfoEnabled:n}=i,s=e==null?void 0:e.editFieldsInfo;return n&&s?bh(s,t==null?void 0:t.attributes):void 0}_compileTitle(i){var l;const{_fieldInfoMap:e,_sourceLayer:t,graphic:n,_expressionAttributes:s}=this,r=(n==null?void 0:n.attributes)??{},o=((l=this.formattedAttributes)==null?void 0:l.global)??{};return Bt({attributes:r,fieldInfoMap:e,globalAttributes:o,expressionAttributes:s,layer:t,text:i})}async _getTitle(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.title;return xn(t,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:i,graphic:e}=this;if(!e)return null;const t=i==null?void 0:i.content;return xn(t,{graphic:e})}async _queryFeature(i){const{_featureAbortController:e,_sourceLayer:t,graphic:n,_effectivePopupTemplate:s}=this,r=this.map,o=this.view,l=this.spatialReference;if(e!==this._featureAbortController||!n)return;await Ch({graphic:n,popupTemplate:s,layer:t,spatialReference:l},i);const{content:{value:d},title:{value:h}}=await Et({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:u}}=await Et({checkForRelatedFeatures:this._checkForRelatedFeatures(i),expressionAttributes:Su({expressionInfos:s==null?void 0:s.expressionInfos,spatialReference:l,graphic:n,map:r,interceptor:Si.interceptor,view:o})});e===this._featureAbortController&&n&&(this._expressionAttributes=u,this._graphicExpressionAttributes={...n.attributes,...u},this._set("formattedAttributes",this._createFormattedAttributes(d)),this._set("title",this._compileTitle(h)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(d)||null))}_createMediaFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){const{_effectivePopupTemplate:n,graphic:s,relatedInfos:r,_sourceLayer:o,_fieldInfoMap:l,_graphicExpressionAttributes:d}=this;t.content[e]=ts({fieldInfos:n==null?void 0:n.fieldInfos,graphic:s,attributes:{...d,...i.attributes},layer:o,fieldInfoMap:l,relatedInfos:r})}_createFieldsFormattedAttributes({contentElement:i,contentElementIndex:e,formattedAttributes:t}){if(i.fieldInfos){const{graphic:n,relatedInfos:s,_sourceLayer:r,_fieldInfoMap:o,_graphicExpressionAttributes:l}=this;t.content[e]=ts({fieldInfos:i.fieldInfos,graphic:n,attributes:{...l,...i.attributes},layer:r,fieldInfoMap:o,relatedInfos:s})}}_createFormattedAttributes(i){const{_effectivePopupTemplate:e,graphic:t,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:r,_graphicExpressionAttributes:o}=this,l=e==null?void 0:e.fieldInfos,d={global:ts({fieldInfos:l,graphic:t,attributes:o,layer:s,fieldInfoMap:r,relatedInfos:n}),content:[]};return Array.isArray(i)&&i.forEach((h,u)=>{h.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:h,contentElementIndex:u,formattedAttributes:d}),h.type==="media"&&this._createMediaFormattedAttributes({contentElement:h,contentElementIndex:u,formattedAttributes:d})}),d}_checkForRelatedFeatures(i){const{graphic:e,_effectivePopupTemplate:t}=this;return this._queryRelatedInfos(e,eo(t),i)}async _queryRelatedInfos(i,e,t){const{relatedInfos:n,_sourceLayer:s}=this;n.clear();const r=v(s==null?void 0:s.associatedLayer)?await(s==null?void 0:s.associatedLayer.load(t)):s;if(!r||!i)return;const o=e.filter(h=>h&&it(h.fieldName));if(!o||!o.length)return;e.forEach(h=>this._configureRelatedInfo(h,r));const l=await gu({relatedInfos:n,layer:r},t);Object.keys(l).forEach(h=>{var g;const u=n.get(h.toString()),p=(g=l[h])==null?void 0:g.value;u&&p&&(u.layerInfo=p.data)});const d=await fu({graphic:i,relatedInfos:n,layer:r},t);Object.keys(d).forEach(h=>{var u;du((u=d[h])==null?void 0:u.value,n.get(h.toString()))})}_configureRelatedInfo(i,e){const{relatedInfos:t}=this,n=dn(i.fieldName);if(!n)return;const{layerId:s,fieldName:r}=n;if(!s)return;const o=t.get(s.toString())||cu(s,e);o&&(_u({relatedInfo:o,fieldName:r,fieldInfo:i}),this.relatedInfos.set(s,o))}};U.interceptor=new Ou(xh,$h),a([c()],U.prototype,"_error",void 0),a([c()],U.prototype,"_featureAbortController",void 0),a([c({readOnly:!0})],U.prototype,"_effectivePopupTemplate",null),a([c({readOnly:!0})],U.prototype,"_fieldInfoMap",null),a([c({readOnly:!0})],U.prototype,"_sourceLayer",null),a([c()],U.prototype,"abilities",void 0),a([ye("abilities")],U.prototype,"castAbilities",null),a([c({readOnly:!0})],U.prototype,"content",void 0),a([c({readOnly:!0})],U.prototype,"contentViewModels",void 0),a([c()],U.prototype,"description",void 0),a([c({type:Boolean})],U.prototype,"defaultPopupTemplateEnabled",void 0),a([c({readOnly:!0})],U.prototype,"isTable",null),a([c({readOnly:!0})],U.prototype,"state",null),a([c({readOnly:!0})],U.prototype,"formattedAttributes",void 0),a([c({type:jt,value:null})],U.prototype,"graphic",null),a([c({readOnly:!0})],U.prototype,"lastEditInfo",void 0),a([c({readOnly:!0})],U.prototype,"relatedInfos",void 0),a([c()],U.prototype,"spatialReference",null),a([c({readOnly:!0})],U.prototype,"title",void 0),a([c()],U.prototype,"map",null),a([c({readOnly:!0})],U.prototype,"waitingForContent",null),a([c()],U.prototype,"view",void 0),U=Si=a([I("esri.widgets.FeatureViewModel")],U);const mr=U,se="esri-feature",j={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:se,container:`${se}__size-container`,title:`${se}__title`,main:`${se}__main-container`,btn:`${se}__button`,icon:`${se}__icon`,content:`${se}__content`,contentNode:`${se}__content-node`,contentElement:`${se}__content-element`,text:`${se}__text`,lastEditedInfo:`${se}__last-edited-info`,fields:`${se}__fields`,fieldHeader:`${se}__field-header`,fieldData:`${se}__field-data`,fieldDataDate:`${se}__field-data--date`,loadingSpinnerContainer:`${se}__loading-container`,spinner:`${se}__loading-spinner`},Xa=i=>{let e=class extends i{constructor(){super(...arguments),this.renderNodeContent=t=>_a(t)&&!t.destroyed?m("div",{class:j.contentNode,key:t},t.render()):t instanceof HTMLElement?m("div",{class:j.contentNode,key:t,bind:t,afterCreate:this._attachToNode}):Oc(t)?m("div",{class:j.contentNode,key:t,bind:t.domNode,afterCreate:this._attachToNode}):null}_attachToNode(t){const n=this;t.appendChild(n)}};return e=a([I("esri.widgets.Feature.ContentMixin")],e),e};var Ns;const vo={title:!0,content:!0,lastEditedInfo:!0},wo="relationship-handles";let ee=Ns=class extends Xa(ce){constructor(i,e){super(i,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...vo},this.viewModel=new mr}initialize(){this.addHandles(y(()=>{var i;return(i=this.viewModel)==null?void 0:i.contentViewModels},()=>this._setupContentWidgets(),V))}loadDependencies(){return w(()=>import("./calcite-notice-d5c17adf.js"),["./calcite-notice-d5c17adf.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js","./loadable-25ad9e4e.js","./t9n-32a9e543.js","./icon-30e1a9e4.js"],import.meta.url)}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(i){this.viewModel.graphic=i}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(i){this.viewModel.defaultPopupTemplateEnabled=i}get isTable(){return this.viewModel.isTable}get label(){var i;return((i=this.messages)==null?void 0:i.widgetLabel)??""}set label(i){this._overrideIfSome("label",i)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(i){this.viewModel.spatialReference=i}get title(){return this.viewModel.title}castVisibleElements(i){return{...vo,...i}}get map(){return this.viewModel.map}set map(i){this.viewModel.map=i}get view(){return this.viewModel.view}set view(i){this.viewModel.view=i}render(){const{state:i}=this.viewModel,e=m("div",{class:j.container,key:"container"},this.renderTitle(),i==="error"?this.renderError():i==="loading"?this.renderLoading():this.renderContentContainer());return m("div",{class:this.classes(j.base,j.esriWidget)},e)}setActiveMedia(i,e){return this.viewModel.setActiveMedia(i,e)}nextMedia(i){return this.viewModel.nextMedia(i)}previousMedia(i){return this.viewModel.previousMedia(i)}renderError(){const{messagesCommon:i,messages:e,visibleElements:t}=this;return m("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},t.title?m("div",{key:"error-title",slot:"title"},i.errorMessage):null,m("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return m("div",{key:"loading-container",class:j.loadingSpinnerContainer},m("span",{class:this.classes(j.iconLoading,j.spinner)}))}renderContentContainer(){const{visibleElements:i}=this;return i.content?m("div",{class:j.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:i,title:e}=this;return i.title?m(dr,{level:this.headingLevel,class:j.title,innerHTML:e}):null}renderContent(){const i=this.viewModel.content,e="content";if(!i)return null;if(Array.isArray(i))return i.length?m("div",{class:j.contentNode,key:`${e}-content-elements`},i.map(this.renderContentElement,this)):null;if(typeof i=="string"){const t=this._contentWidgets[0];return!t||t.destroyed?null:m("div",{class:j.contentNode,key:`${e}-content`},t.render())}return this.renderNodeContent(i)}renderContentElement(i,e){var n;const{visibleElements:t}=this;if(typeof t.content!="boolean"&&!((n=t.content)!=null&&n[i.type]))return null;switch(i.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(i,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(i,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(i){const e=this._contentWidgets[i];if(!e||e.destroyed)return null;const{state:t,attachmentInfos:n}=e.viewModel;return t==="loading"||n.length>0?m("div",{key:this._buildKey("attachments-element",i),class:this.classes(j.contentElement)},e.render()):null}renderRelationship(i){const e=this._contentWidgets[i];return e&&!e.destroyed&&this.flowItems?m("div",{key:this._buildKey("relationship-element",i),class:j.contentElement},e.render()):null}renderExpression(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("expression-element",i),class:j.contentElement},e.render())}renderCustom(i,e){const{creator:t}=i,n=this._contentWidgets[e];return!n||n.destroyed?null:t?m("div",{key:this._buildKey("custom-element",e),class:j.contentElement},n.render()):null}renderFields(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("fields-element",i),class:j.contentElement},e.render())}renderMedia(i){const e=this._contentWidgets[i];return!e||e.destroyed?null:m("div",{key:this._buildKey("media-element",i),class:j.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:i,messages:e}=this,{lastEditInfo:t}=this.viewModel;if(!t||!i.lastEditedInfo)return null;const{date:n,user:s}=t,r=t.type==="edit"?s?e.lastEditedByUser:e.lastEdited:s?e.lastCreatedByUser:e.lastCreated,o=Be(r,{date:n,user:s});return m("div",{key:"edit-info-element",class:this.classes(j.lastEditedInfo,j.contentElement)},o)}renderText(i,e){const t=i.text,n=this._contentWidgets[e];return!n||n.destroyed?null:t?m("div",{key:this._buildKey("text-element",e),class:this.classes(j.contentElement,j.text)},n.render()):null}_buildKey(i,...e){return`${i}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(i){i&&(i.viewModel=null,!i.destroyed&&i.destroy())}_destroyContentWidgets(){this.removeHandles(wo),this._contentWidgets.forEach(i=>this._destroyContentWidget(i)),this._contentWidgets=[]}_addFeatureRelationshipHandles(i){const{flowItems:e,visibleElements:t}=this;this.addHandles([Pe(()=>i,"select-record",({featureViewModel:n})=>{e&&(n.abilities={relationshipContent:!0},e.push(new Ns({flowItems:e,viewModel:n,visibleElements:t})))}),Pe(()=>i,"show-all-records",()=>{if(!e)return;const{viewModel:n}=i;n.showAllEnabled=!0;const s=new go({visibleElements:{title:!1,description:!1},viewModel:n});this._addFeatureRelationshipHandles(s),e.push(s)})],wo)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:i,visibleElements:e}=this,t=this.get("viewModel.content"),{contentViewModels:n}=this.viewModel;if(Array.isArray(t))t.forEach((s,r)=>{if(s.type==="attachments"&&(this._contentWidgets[r]=new Lh({displayType:s.displayType,headingLevel:e.title?i+1:i,viewModel:n[r]})),s.type==="fields"&&(this._contentWidgets[r]=new Za({viewModel:n[r]})),s.type==="media"&&(this._contentWidgets[r]=new Ka({viewModel:n[r]})),s.type==="text"&&(this._contentWidgets[r]=new cn({viewModel:n[r]})),s.type==="custom"&&(this._contentWidgets[r]=new cn({viewModel:n[r]})),s.type==="expression"&&(this._contentWidgets[r]=new Du({viewModel:n[r]})),s.type==="relationship"){const o=new go({viewModel:n[r]});this._addFeatureRelationshipHandles(o),this._contentWidgets[r]=o}},this);else{const s=n[0];s&&!s.destroyed&&(this._contentWidgets[0]=new cn({viewModel:s}))}this.scheduleRender()}};a([c()],ee.prototype,"graphic",null),a([c()],ee.prototype,"defaultPopupTemplateEnabled",null),a([c()],ee.prototype,"flowItems",void 0),a([c()],ee.prototype,"headingLevel",void 0),a([c({readOnly:!0})],ee.prototype,"isTable",null),a([c()],ee.prototype,"label",null),a([c(),le("esri/widgets/Feature/t9n/Feature")],ee.prototype,"messages",void 0),a([c(),le("esri/t9n/common")],ee.prototype,"messagesCommon",void 0),a([c(),le("esri/widgets/support/t9n/uriUtils")],ee.prototype,"messagesURIUtils",void 0),a([c()],ee.prototype,"spatialReference",null),a([c({readOnly:!0})],ee.prototype,"title",null),a([c()],ee.prototype,"visibleElements",void 0),a([ye("visibleElements")],ee.prototype,"castVisibleElements",null),a([c()],ee.prototype,"map",null),a([c()],ee.prototype,"view",null),a([c({type:mr})],ee.prototype,"viewModel",void 0),ee=Ns=a([I("esri.widgets.Feature")],ee);const Nu=ee;var Ja;const un=Symbol("anchorHandles");let Pt=class extends Ln.EventedAccessor{constructor(e){super(e),this[Ja]=new xt,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[un].add([ot(()=>Pi(this.screenLocationEnabled?this.view:null,t=>[t.size,t.type==="3d"?t.camera:t.viewpoint]),()=>this.notifyChange("screenLocation")),y(()=>this.screenLocation,(t,n)=>{v(t)&&v(n)&&this.emit("view-change")})])}destroy(){this.view=null,this[un]=ae(this[un])}get screenLocation(){var s;const{location:e,view:t,screenLocationEnabled:n}=this;return n&&v(e)&&v(t)&&t.ready?(s=t.toScreen)==null?void 0:s.call(t,e):null}};Ja=un,a([c()],Pt.prototype,"location",void 0),a([c()],Pt.prototype,"screenLocation",null),a([c()],Pt.prototype,"screenLocationEnabled",void 0),a([c()],Pt.prototype,"view",void 0),Pt=a([I("esri.widgets.support.AnchorElementViewModel")],Pt);const el=Pt,zu="esri.widgets.CompassViewModel";let pn=class extends el{constructor(e){super(e),this.visible=!1}};a([c()],pn.prototype,"visible",void 0),pn=a([I(zu)],pn);const tl=pn,us="esri-spinner",ps={base:us,spinnerStart:`${us}--start`,spinnerFinish:`${us}--finish`};let Ft=class extends ce{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.viewModel=new tl}initialize(){this.addHandles(y(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:t,promise:n}=e??{};t&&(this.viewModel.location=t),this.visible=!0;const s=()=>this.hide();n&&n.catch(()=>{}).then(s)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,n=!!t,s=e&&n,r=!e&&n,o={[ps.spinnerStart]:s,[ps.spinnerFinish]:r},l=this._getPositionStyles();return m("div",{class:this.classes(ps.base,o),styles:l})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=Xs(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(P(t)||P(e))return{};const{padding:n}=t;return{left:e.x-n.left+"px",top:e.y-n.top+"px"}}};a([c()],Ft.prototype,"location",null),a([c()],Ft.prototype,"view",null),a([c({type:tl})],Ft.prototype,"viewModel",void 0),a([c()],Ft.prototype,"visible",null),Ft=a([I("esri.widgets.Spinner")],Ft);const Bu=Ft,qn={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Ht=new Zi({id:"zoom-to-feature",title:"{messages.zoom}",className:qn.iconZoom}),bo=new Zi({id:"remove-selected-feature",title:"{messages.remove}",className:qn.iconTrash}),ui=new Zi({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:qn.iconZoom}),pi=new Zi({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:qn.iconBrowseClusteredFeatures}),qu="esri.widgets.Popup.PopupViewModel",kn=S.getLogger(qu),Hu=i=>{const{event:e,view:t}=i,{action:n}=e,s=t&&t.popup;if(!n)return Promise.reject(new $("trigger-action:missing-arguments","Event has no action"));if(!s)return Promise.reject(new $("trigger-action:missing-arguments","view.popup is missing"));const{disabled:r,id:o}=n;if(!o)return Promise.reject(new $("trigger-action:invalid-action","action.id is missing"));if(r)return Promise.reject(new $("trigger-action:invalid-action","Action is disabled"));if(o===Ht.id)return Wu(s.viewModel).catch(rc);if(o===ui.id)return ju(s.viewModel);if(o===pi.id)return s.featureMenuOpen=!s.featureMenuOpen,s.viewModel.browseClusterEnabled=!s.viewModel.browseClusterEnabled,Promise.resolve();if(s.viewModel.browseClusterEnabled=!1,o===bo.id){s.close();const{selectedFeature:l}=s;if(!l)return Promise.reject(new $(`trigger-action:${bo.id}`,"selectedFeature is required",{selectedFeature:l}));const{sourceLayer:d}=l;return d?d.remove(l):t.graphics.remove(l),Promise.resolve()}return Promise.resolve()};function il(i){const{selectedFeature:e,location:t,view:n}=i;return n?n.type==="3d"?e??t??null:i.get("selectedFeature.geometry")||t:null}function Nt(i){var e,t;return!!i&&i.isAggregate&&((t=(e=i.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:t.type)==="cluster"}async function Uu(i,e){if((e==null?void 0:e.type)!=="3d"||!i||i.declaredClass!=="esri.Graphic")return!0;const t=e.getViewForGraphic(i);if(t&&"whenGraphicBounds"in t){let n;try{n=await t.whenGraphicBounds(i,{useViewElevation:!0})}catch{}return!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}return!0}async function Wu(i){var u;const{location:e,selectedFeature:t,view:n,zoomFactor:s}=i,r=il(i);if(!n||!r){const p=new $("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:r,view:n});throw kn.error(p),p}const o=n.scale/s,l=(u=i.selectedFeature)==null?void 0:u.geometry,d=l??e,h=v(d)&&d.type==="point"&&await Uu(t,n);Ht.active=!0,Ht.disabled=!0;try{await i.zoomTo({target:{target:r,scale:h?o:void 0}})}catch{const g=new $("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:t});kn.error(g)}finally{Ht.active=!1,Ht.disabled=!1,i.zoomToLocation=null,h&&(i.location=d)}}async function ju(i){const{selectedFeature:e,view:t}=i;if((t==null?void 0:t.type)!=="2d"){const o=new $("zoomToCluster:invalid-view","View must be 2d MapView.",{view:t});throw kn.error(o),o}if(!e||!Nt(e)){const o=new $("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw kn.error(o),o}const[n,s]=await gr(t,e);ui.active=!0,ui.disabled=!0;const{extent:r}=await n.queryExtent(s);await i.zoomTo({target:r}),ui.active=!1,ui.disabled=!1}async function Gu(i){const{view:e,selectedFeature:t}=i;if(!e||!t)return;const[n,s]=await gr(e,t),{extent:r}=await n.queryExtent(s);i.selectedClusterBoundaryFeature.geometry=r,e.graphics.add(i.selectedClusterBoundaryFeature)}async function Zu(i){var o;const{selectedFeature:e,view:t}=i;if(!t||!e)return;const[n,s]=await gr(t,e);pi.active=!0,pi.disabled=!0;const{features:r}=await n.queryFeatures(s);pi.active=!1,pi.disabled=!1,(o=t.popup)==null||o.open({features:[e].concat(r),featureMenuOpen:!0})}async function gr(i,e){const t=await i.whenLayerView(e.sourceLayer),n=t.createQuery(),s=e.getObjectId();return n.aggregateIds=s!=null?[s]:[],[t,n]}function Ku(i){const e=i.features.filter(t=>Nt(t));e.length&&(i.features=e)}function nl(i){var e;if(P(i))return null;switch(i.type){case"point":return i;case"extent":return i.center;case"polygon":return i.centroid;case"multipoint":case"polyline":return(e=i.extent)==null?void 0:e.center;default:return null}}const x="esri-popup",Ti=`${x}__header`,At=`${x}--is-docked`,_={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:x,widget:"esri-widget",main:`${x}__main-container`,loadingContainer:`${x}__loading-container`,isCollapsible:`${x}--is-collapsible`,isCollapsed:`${x}--is-collapsed`,shadow:`${x}--shadow`,isDocked:At,isDockedTopLeft:`${At}-top-left`,isDockedTopCenter:`${At}-top-center`,isDockedTopRight:`${At}-top-right`,isDockedBottomLeft:`${At}-bottom-left`,isDockedBottomCenter:`${At}-bottom-center`,isDockedBottomRight:`${At}-bottom-right`,alignTopCenter:`${x}--aligned-top-center`,alignBottomCenter:`${x}--aligned-bottom-center`,alignTopLeft:`${x}--aligned-top-left`,alignBottomLeft:`${x}--aligned-bottom-left`,alignTopRight:`${x}--aligned-top-right`,alignBottomRight:`${x}--aligned-bottom-right`,isFeatureMenuOpen:`${x}--feature-menu-open`,isActionsMenuOpen:`${x}--actions-menu-open`,hasFeatureUpdated:`${x}--feature-updated`,header:Ti,headerButtons:`${Ti}-buttons`,headerContainer:`${Ti}-container`,headerContainerButton:`${Ti}-container--button`,headerTitle:`${Ti}-title`,content:`${x}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${x}__footer`,footerHasPagination:`${x}__footer--has-pagination`,footerHasActions:`${x}__footer--has-actions`,footerHasActionsMenu:`${x}__footer--has-actions-menu`,button:`${x}__button`,buttonDisabled:`${x}__button--disabled`,buttonDock:`${x}__button--dock`,icon:`${x}__icon`,iconDock:`${x}__icon--dock-icon`,inlineActionsContainer:`${x}__inline-actions-container`,actionsMenuButton:`${x}__actions-menu-button`,actions:`${x}__actions`,action:`${x}__action`,actionImage:`${x}__action-image`,actionText:`${x}__action-text`,actionToggle:`${x}__action-toggle`,actionToggleOn:`${x}__action-toggle--on`,actionExit:`${x}__action--exit`,actionSelectFeature:`${x}__action--select-feature`,pointer:`${x}__pointer`,pointerDirection:`${x}__pointer-direction`,navigation:`${x}__navigation`,paginationPrevious:`${x}__pagination-previous`,paginationNext:`${x}__pagination-next`,paginationPreviousIconLTR:`${x}__pagination-previous-icon`,paginationPreviousIconRTL:`${x}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${x}__pagination-next-icon`,paginationNextIconRTL:`${x}__pagination-next-icon--rtl`,featureMenu:`${x}__feature-menu`,featureMenuList:`${x}__feature-menu-list`,featureMenuItem:`${x}__feature-menu-item`,featureMenuViewport:`${x}__feature-menu-viewport`,featureMenuHeader:`${x}__feature-menu-header`,featureMenuNote:`${x}__feature-menu-note`,featureMenuSelected:`${x}__feature-menu-item--selected`,featureMenuButton:`${x}__feature-menu-button`,featureMenuTitle:`${x}__feature-menu-title`,featureMenuObserver:`${x}__feature-menu-observer`,featureMenuLoader:`${x}__feature-menu-loader`,collapseButton:`${x}__collapse-button`,collapseIcon:`${x}__collapse-icon`},Yu="OBJECTID";var Wt;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(Wt||(Wt={}));const Mo=xe("android");xe("chrome")||Mo&&Mo>=4;As();Wt.size;Wt.maxSize;Wt.maxOutlineSize;Wt.lineWidth;Wt.tallSymbolWidth;function sl(i){return i&&"opacity"in i?i.opacity*sl(i.parent):1}async function Qu(i,e){if(!i)return;const t=i.sourceLayer,n=(v(e)&&e.useSourceLayer?t:i.layer)??t,s=sl(n);if(v(i.symbol)&&(!v(e)||e.ignoreGraphicSymbol!==!0)){const T=i.symbol.type==="web-style"?await Jc(i.symbol,{...e,cache:v(e)?e.webStyleCache:null}):i.symbol.clone();return Zn(T,null,s),T}const r=(v(e)?e.renderer:null)??(n&&"renderer"in n?n.renderer:null);let o=r&&"getSymbolAsync"in r?await r.getSymbolAsync(i,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:v(e)?e.webStyleCache:null}):o.clone(),!(r&&"visualVariables"in r&&r.visualVariables&&r.visualVariables.length))return Zn(o,null,s),o;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&(P(e)||P(e.arcade))){const T={...Ie(e)};T.arcade=await Ia(),e=T}const l=await w(()=>import("./UniqueValueRenderer-adb2594e.js").then(T=>T.v),["./UniqueValueRenderer-adb2594e.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./enumeration-de0a766e.js","./Extent-52b65909.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./Clonable-ad03ca71.js","./LegendOptions-6e5321d3.js","./reactiveUtils-989a8d7f.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./Identifiable-a49d7533.js","./jsonUtils-e2434b33.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js"],import.meta.url),d=[],h=[],u=[],p=[];for(const T of r.visualVariables)switch(T.type){case"color":d.push(T);break;case"opacity":h.push(T);break;case"rotation":p.push(T);break;case"size":T.target||u.push(T)}const g=!!d.length&&d[d.length-1],f=g?l.getColor(g,i,e):null,b=!!h.length&&h[h.length-1];let C=b?l.getOpacity(b,i,e):null;if(s!=null&&(C=C!=null?C*s:s),Zn(o,f,C),u.length){const T=l.getAllSizes(u,i,e);await ed(o,T)}for(const T of p)td(o,l.getRotationAngle(T,i,e),T.axis);return o}let Xu=class{constructor(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const n in e){const s=e[n],r=new Ql(s,void 0,void 0,2,2);this._properties[n]={pool:r,acquired:[]}}this._afterDispatchHandle=Xl(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const n of t.acquired)Cr(n)||t.pool.release(n);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null}get(e){const t=this._owner._get(e),n=this._properties[e];let s=n.pool.acquire();for(n.acquired.push(s);s===t;)n.acquired.push(s),s=n.pool.acquire();return s}_release(){for(const e in this._properties){const t=this._properties[e];let n=0;for(const s of t.acquired)Cr(s)?t.acquired[n++]=s:t.pool.release(s);t.acquired.length=n}}};const Ju=xe("mac")?"Meta":"Ctrl",Hn={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let i=48;i<58;i++)Hn[i]=String.fromCharCode(i);for(let i=1;i<25;i++)Hn[111+i]=`F${i}`;for(let i=65;i<91;i++)Hn[i]=[String.fromCharCode(i+32),String.fromCharCode(i)];function ep(i){if(i.key!==void 0)return Vt(i);const e=Hn[i.keyCode];return Array.isArray(e)?i.shiftKey?e[1]:e[0]:e}function tp(i){switch(i){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let ip=class{constructor(e,t=[]){this.eventType=e,this.keyModifiers=t}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const t=e.modifiers;for(const n of this.keyModifiers)if(!t.has(n))return!1;return!0}};const Io=S.getLogger("esri.views.input.InputHandler");let ie=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const t=this._incoming[e];for(const n of t)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?Io.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(t=>this._handleEvent(t)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,t,n){let s;typeof t=="function"?(n=t,s=[]):s=t||[];const r=typeof e=="string"?new ip(e,s):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},l=u=>{const p=this._incoming[u.match.eventType];if(p){const g=p.indexOf(u);p.splice(g,1),o(),this._manager&&this._manager.updateDependencies()}},d=new np(r,n,{onPause:l,onRemove:l,onResume:u=>{const p=this._incoming[u.match.eventType];p&&!p.includes(u)&&(p.push(u),o(),this._manager&&this._manager.updateDependencies())}});let h=this._incoming[r.eventType];return h||(h=[],this._incoming[r.eventType]=h),h.push(d),o(),this._manager&&this._manager.updateDependencies(),d}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const t=new sp(e,{onEmit:(n,s,r,o)=>{var l;(l=this._manager)==null||l.emit(n.eventType,s,r,o)},onRemove:n=>{var s;delete this._outgoing[n.eventType],(s=this._manager)==null||s.updateDependencies()}});return this._outgoing[e]=t,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),t}startCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!0)}stopCapturingPointer(e){var t;(t=this._manager)==null||t.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):Io.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var n;const t=this._incoming[e.type];if(t){for(const s of t)if(s.match.matches(e)&&((n=s.callback)==null||n.call(s,e),e.shouldStopPropagation()))break}}},np=class{constructor(e,t,n){this.match=e,this._callback=t,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},sp=class{constructor(e,t){this.eventType=e,this._removed=!1,this._handler=t}emit(e,t,n){this._removed||this._handler.onEmit(this,e,t,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},rp=class extends ie{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",t=>{this._update(t.data)})}_update(e){const t=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:s}=e;t===this._value&&this._x===n&&this._y===s||(this._value=t,this._x=n,this._y=s,this._onChange(t,n,s))}},op=class extends ie{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new ud(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},De=class extends L{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=Ju,this._latestPointerType="mouse",this._propertiesPool=new Xu({latestPointerLocation:cp},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,t,n=It.INTERNAL){if(this._nameToGroup[e])return void S.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void S.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const s={name:e,handlers:t.map(r=>({handler:r,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=s;for(let r=s.handlers.length-1;r>=0;r--){const o=s.handlers[r];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(l,d,h,u,p)=>{this._emitInputEvent(o.priorityIndex+1,l,d,h,p,u)},setPointerCapture:(l,d)=>{this._setPointerCapture(s,o,l,d)},setEventCallback:l=>{o.eventCallback=l},setUninstallCallback:l=>{o.uninstallCallback=l},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(n=>{var s;n.removed=!0,(s=n.uninstallCallback)==null||s.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):S.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const s=this._handlers[n];s.priorityIndex=n,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const s=this._handlersPriority[n];s.priorityIndex=n;let r=s.handler.hasSideEffects;if(!r){for(const o of s.handler.outgoingEventTypes)if(e.has(o)){r=!0;break}}if(r)for(const o of s.handler.incomingEventMatches){e.add(o.eventType);for(const l of o.keyModifiers)tp(l)||t.add(l)}s.active=r}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,t,n){this._latestPointerType=e;const s=this._get("latestPointerLocation");if(P(s)||s.x!==t||s.y!==n){const r=this._propertiesPool.get("latestPointerLocation");r.x=t,r.y=n,this._set("latestPointerLocation",r)}}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const r=t;this._pointerCaptures.delete(r.native.pointerId)}this._updateKeyModifiers(e,t);const n=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,s=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,n,s)}_updateKeyModifiers(e,t){if(!t)return;let n=!1;const s=()=>{if(!n){const l=new Set;this._activeKeyModifiers.forEach(d=>{l.add(d)}),this._activeKeyModifiers=l,n=!0}},r=(l,d)=>{d&&!this._activeKeyModifiers.has(l)?(s(),this._activeKeyModifiers.add(l)):!d&&this._activeKeyModifiers.has(l)&&(s(),this._activeKeyModifiers.delete(l))};if(e==="key-down"||e==="key-up"){const l=t.key;this._keyModifiers.has(l)&&r(l,e==="key-down")}const o=t.native;r("Alt",!(!o||!o.altKey)),r("Ctrl",!(!o||!o.ctrlKey)),r("Shift",!(!o||!o.shiftKey)),r("Meta",!(!o||!o.metaKey)),r("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new rp((e,t,n)=>this._setLatestPointer(e,t,n)),this._multiTouchHandler=new op,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],It.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,It.INTERNAL)}_setPointerCapture(e,t,n,s){const r=e.name+"-"+t.priorityIndex,o=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,o),s?(o.add(r),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):o.has(r)&&(o.delete(r),o.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,n,s){this._emitInputEvent(0,e,t,n,s)}_emitInputEvent(e,t,n,s,r,o){const l=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),d=r!==void 0&&r,h={event:new ap(t,n,l,o||this._activeKeyModifiers,d),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(h):this._doNewPropagation(h)}_doNewPropagation(e){this._currentPropagation={events:new Or,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var t,n;const e=_c(this._currentPropagation);for(;e.events.length>0;){const{event:s,priorityIndex:r}=e.events.pop(),o=s.data&&s.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!s.shouldStopPropagation()&&((n=(t=e.currentHandler).eventCallback)==null||n.call(t,s)),s.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(s.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:s,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const t=new Or;t.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)t.push(n.events.pop());n.events=t,n.currentHandler=null}}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const s of t.handler.incomingEventMatches){if(n.eventType!==s.eventType)continue;const r=n.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(r.length===n.keyModifiers.length!=(r.length===s.keyModifiers.length))return n.keyModifiers.length>s.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const n of e){let s=0;for(;s<t.length&&this._compareHandlerPriority(n,t[s])>=0;)s++;t.splice(s,0,n)}return t}get debug(){const e=t=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=n};return{injectEvent:(t,n)=>{e(()=>{this._onEventReceived(t,n)})},disablePointerCapture:e}}};a([c({readOnly:!0})],De.prototype,"hasPendingInputs",null),a([c({constructOnly:!0})],De.prototype,"eventSource",void 0),a([c({constructOnly:!0})],De.prototype,"recognizers",void 0),a([c()],De.prototype,"_latestPointerType",void 0),a([c()],De.prototype,"latestPointerType",null),a([c()],De.prototype,"multiTouchActive",null),a([c({readOnly:!0})],De.prototype,"latestPointerLocation",void 0),De=a([I("esri.views.input.InputManager")],De);let ap=class{constructor(e,t,n,s,r){this.type=e,this.data=t,this.timestamp=n,this.modifiers=s,this.cancelable=r,this._propagationState=Mt.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Mt.STOPPED}shouldStopPropagation(){return(this._propagationState&Mt.STOPPED)!=0}async(e){this._propagationState|=Mt.PAUSED;const t=(n,s)=>{this._propagationState&=~Mt.PAUSED;const r=this._resumeCallback;if(this._resumeCallback=null,r&&r(),s)throw n;return n};return(typeof e=="function"?e():e).then(n=>t(n,!1),n=>t(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&Mt.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var Mt;(function(i){i[i.NONE=0]="NONE",i[i.STOPPED=1]="STOPPED",i[i.PAUSED=2]="PAUSED"})(Mt||(Mt={}));const It={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let lp=class{};const cp=lp;function Co(i){return i&&typeof i.highlight=="function"}const rl=i=>{let e=class extends i{constructor(...t){super(...t),this.goToOverride=null,this.view=null}callGoTo(t){const{view:n}=this;return yc(n),this.goToOverride?this.goToOverride(n,t):n.goTo(t.target,t.options)}};return a([c()],e.prototype,"goToOverride",void 0),a([c()],e.prototype,"view",void 0),e=a([I("esri.widgets.support.GoTo")],e),e},zi=G.ofType({key:"type",defaultKeyValue:"button",base:Yc,typeMap:{button:Zi,toggle:Qc}}),dp=()=>[Ht.clone()],hp=()=>[ui.clone(),pi.clone()];let R=class extends rl(el){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new xt,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new zi,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new jt({symbol:new id({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([y(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),y(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),y(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),y(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.animation)==null?void 0:t.state},e=>this._animationStateChange(e)),y(()=>this.location,e=>this._locationChange(e)),y(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),y(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),y(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),y(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>Hu({event:e,view:this.view})),ot(()=>!this.waitingForResult,()=>this._waitingForResultChange(),qi),y(()=>{var e,t;return[this.features,(e=this.view)==null?void 0:e.map,(t=this.view)==null?void 0:t.spatialReference]},()=>this._updateFeatureVMs()),y(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),ot(()=>!this.visible,()=>this.browseClusterEnabled=!1),y(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new zi;e.removeAll();const{actions:t,defaultActions:n,defaultPopupTemplateEnabled:s,includeDefaultActions:r,selectedFeature:o}=this,l=r?n.concat(t):t,d=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(s)||o.popupTemplate),h=d&&d.actions,u=d&&d.overwriteActions?h:h?h.concat(l):l;return u&&u.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new zi;return e.removeAll(),e.addMany(Nt(this.selectedFeature)?hp():dp()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:n,promiseCount:s,selectedFeatureIndex:r}=this,o=s&&t.length;o&&n&&r===-1?this.selectedFeatureIndex=0:o&&r!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){var s,r,o;let t=e;const n=(r=(s=this.view)==null?void 0:s.spatialReference)==null?void 0:r.isWebMercator;e&&((o=e==null?void 0:e.spatialReference)!=null&&o.isWGS84)&&n&&(t=ha(e)),this._set("location",t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const n=r=>{this._pendingPromises.has(t)&&this._updateFeatures(r),this._updatePendingPromises(t)},s=()=>this._updatePendingPromises(t);t.then(n,s)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=il(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new $("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,t){const{view:n}=this;if(!n||!e)throw new $("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:n});return n.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:n}=t;delete t.fetchFeatures,n&&this._setFetchFeaturesPromises(t.location);const s=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const r of s)delete t[r];this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){Ku(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:t}=this;(e==null?void 0:e.type)==="2d"?Nt(t)?(await Gu(this),await Zu(this)):S.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",t):S.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",t)}_animationStateChange(e){this.zoomToLocation||(Ht.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var t;const e=(t=this.view)==null?void 0:t.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(Nt(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:n}=this;n&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:n,featuresPerPage:s,featureViewModels:r}=this;if(n===null)return;const o=((n-1)*s+t)%t,l=o+s;r.slice(o,l).forEach((d,h)=>{d&&!d.graphic&&(d.graphic=e[o+h])})}async _selectedFeatureChange(e){const{location:t,updateLocationEnabled:n,view:s}=this;if(e&&s){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(s.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),Nt(e)?void 0:(e.symbol=await Qu(e),this._selectedClusterFeature=e,void s.graphics.add(this._selectedClusterFeature));!n&&t||!e.geometry?n&&!e.geometry&&this.centerAtLocation().then(()=>{var o;const r=(o=s.center)==null?void 0:o.clone();r&&(this.location=r)}):this.location=Ie(nl(e.geometry))}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:n,promisesPerLayerView:s}=t,r=Promise.resolve(n),o=s.map(l=>l.promise);this.promises=[r,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:n}=this;if(Nt(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const s=n.slice(0),r=[];t.forEach((o,l)=>{var h,u;if(!o)return;let d=null;if(s.some((p,g)=>(p&&p.graphic===o&&(d=p,s.splice(g,1)),!!d)),d)r[l]=d;else{const p=new mr({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(h=this.view)==null?void 0:h.spatialReference,graphic:o===e?o:null,map:(u=this.view)==null?void 0:u.map,view:this.view});r[l]=p}}),s.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",r)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:n}=this;if(t.remove(e),n&&this.view){const s=this.view.on("click",r=>{r.pointerType==="mouse"&&r.button!==0||this._fetchFeaturesAndOpen(r)},It.WIDGET);t.add(s,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const n=new AbortController,{signal:s}=n;this._fetchFeaturesController=n,this.notifyChange("waitingForResult");const r=this.fetchFeatures(e,{signal:s,event:t});return r.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),r}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:n}=e,{view:s}=this;this._fetchFeaturesWithController(t,e).then(r=>{var u;const{clientOnlyGraphics:o,promisesPerLayerView:l,location:d}=r,h=[Promise.resolve(o),...l.map(p=>p.promise)];return(u=s==null?void 0:s.popup)==null||u.open({location:d||n,promises:h}),r})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}_getHighlightLayer(e){const{layer:t,sourceLayer:n}=e;return n&&"layer"in n&&n.layer?n.layer:(n==null?void 0:n.type)==="map-notes"||(n==null?void 0:n.type)==="subtype-group"?n:t}_getHighlightTarget(e,t){const n=t.type==="imagery"?void 0:"objectIdField"in t?t.objectIdField||Yu:null,s=e.attributes;return s&&n&&s[n]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:t,view:n,activeFeature:s,visible:r}=this;if(!(s&&n&&t&&r))return;const o=this._getHighlightLayer(s);if(!(o&&o instanceof Dr))return;const l=this._getLayerView(n,o);this._highlightActiveFeaturePromise=l;const d=await l;if(!(d&&Co(d)&&this._highlightActiveFeaturePromise===l&&this.activeFeature&&this.highlightEnabled))return;const h=d.highlight(this._getHighlightTarget(s,o));this._handles.add(h,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:n,view:s,visible:r}=this;if(!(t&&s&&n&&r))return;const o=this._getHighlightLayer(t);if(!(o&&o instanceof Dr))return;const l=this._getLayerView(s,o);this._highlightSelectedFeaturePromise=l;const d=await l;if(!(d&&Co(d)&&this._highlightSelectedFeaturePromise===l&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const h=d.highlight(this._getHighlightTarget(t,o));this._handles.add(h,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const n=e.filter(s=>!t.includes(s));this.features=t.concat(n)}};a([c()],R.prototype,"featurePage",void 0),a([c()],R.prototype,"isLoadingFeature",null),a([c({type:zi})],R.prototype,"actions",void 0),a([c({readOnly:!0})],R.prototype,"active",null),a([c()],R.prototype,"activeFeature",void 0),a([c({readOnly:!0})],R.prototype,"allActions",null),a([c({type:Boolean})],R.prototype,"defaultPopupTemplateEnabled",void 0),a([c()],R.prototype,"autoCloseEnabled",void 0),a([c()],R.prototype,"autoOpenEnabled",void 0),a([c()],R.prototype,"browseClusterEnabled",void 0),a([c()],R.prototype,"content",void 0),a([c({type:zi,readOnly:!0})],R.prototype,"defaultActions",null),a([c({readOnly:!0})],R.prototype,"featureCount",null),a([c()],R.prototype,"features",null),a([c()],R.prototype,"featuresPerPage",void 0),a([c()],R.prototype,"featureViewModelAbilities",void 0),a([c({readOnly:!0})],R.prototype,"featureViewModels",void 0),a([c()],R.prototype,"highlightEnabled",void 0),a([c()],R.prototype,"includeDefaultActions",void 0),a([c({type:X})],R.prototype,"location",null),a([c({readOnly:!0})],R.prototype,"pendingPromisesCount",null),a([c({readOnly:!0})],R.prototype,"selectedClusterBoundaryFeature",void 0),a([c({readOnly:!0})],R.prototype,"waitingForResult",null),a([c({readOnly:!0})],R.prototype,"promiseCount",null),a([c()],R.prototype,"promises",null),a([c({value:null,readOnly:!0})],R.prototype,"selectedFeature",null),a([c({value:-1})],R.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],R.prototype,"selectedFeatureViewModel",null),a([c({readOnly:!0})],R.prototype,"state",null),a([c()],R.prototype,"title",void 0),a([c()],R.prototype,"updateLocationEnabled",void 0),a([c()],R.prototype,"view",void 0),a([c()],R.prototype,"visible",void 0),a([c()],R.prototype,"zoomFactor",void 0),a([c()],R.prototype,"zoomToLocation",void 0),a([c()],R.prototype,"centerAtLocation",null),R=a([I("esri.widgets.Popup.PopupViewModel")],R);const ol=R,To="selected-index",up=0,Eo="popup-spinner",xo={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},$o="esri-popup";function je(i,e){return e===void 0?`${$o}__${i}`:`${$o}__${i}-${e}`}const Ao={closeButton:!0,featureNavigation:!0};let E=class extends Xa(ce){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new xt,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([n])=>{n!=null&&n.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=gi(()=>this._displaySpinner(),up),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new G,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new ol,this.visibleElements={...Ao},this._handleOpenRelatedFeature=n=>{this._openRelatedFeature(n)},this._addSelectedFeatureIndexHandle(),this.addHandles([y(()=>{var n;return(n=this.viewModel)==null?void 0:n.screenLocation},()=>this._positionContainer()),y(()=>{var n;return[(n=this.viewModel)==null?void 0:n.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),y(()=>{var n;return(n=this.viewModel)==null?void 0:n.screenLocation},(n,s)=>{!!n!=!!s&&this.reposition()}),y(()=>{var n,s,r,o,l,d;return[(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.padding,(o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.size,(l=this.viewModel)==null?void 0:l.active,(d=this.viewModel)==null?void 0:d.location,this.alignment]},()=>this.reposition()),y(()=>this.spinnerEnabled,n=>this._spinnerEnabledChange(n)),y(()=>{var n,s;return(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.size},(n,s)=>this._updateDockEnabledForViewSize(n,s)),y(()=>{var n;return(n=this.viewModel)==null?void 0:n.view},(n,s)=>this._viewChange(n,s)),y(()=>{var n,s;return(s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.ready},(n,s)=>this._viewReadyChange(n??!1,s??!1)),y(()=>{var n,s;return[(n=this.viewModel)==null?void 0:n.waitingForResult,(s=this.viewModel)==null?void 0:s.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),y(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),y(()=>{var n,s,r,o;return[(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.title,(o=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),y(()=>{var n,s,r,o;return[(s=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:s.content,(o=(r=this.selectedFeatureWidget)==null?void 0:r.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),ot(()=>!this.collapsed,()=>{var n,s;((s=(n=this.viewModel)==null?void 0:n.view)==null?void 0:s.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),Pe(()=>{var n;return(n=this.viewModel)==null?void 0:n.allActions},"change",()=>this._watchActions()),y(()=>{var n;return(n=this.viewModel)==null?void 0:n.allActions},()=>this._watchActions(),V),y(()=>{var n;return(n=this.viewModel)==null?void 0:n.featureViewModels},()=>this._featureMenuViewportScrollTop()),Pe(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),y(()=>{var n,s,r,o;return[(s=(n=this._activeFlowItemWidget)==null?void 0:n.viewModel)==null?void 0:s.state,(o=(r=this._activeFlowItemWidget)==null?void 0:r.viewModel)==null?void 0:o.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([w(()=>import("./calcite-flow-eb8c0e9b.js"),["./calcite-flow-eb8c0e9b.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js"],import.meta.url),w(()=>import("./calcite-flow-item-916730ab.js"),["./calcite-flow-item-916730ab.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-32a9e543.js","./observers-0326015d.js","./guid-9426053f.js","./action-fdc1d77a.js","./icon-30e1a9e4.js","./loader-271ba3e5.js","./tooltip-a7341ad6.js","./debounce-31e0cfcc.js","./scrim-e0966f74.js"],import.meta.url),w(()=>import("./calcite-action-68a52c33.js"),["./calcite-action-68a52c33.js","./action-fdc1d77a.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./guid-9426053f.js","./interactive-573cbe88.js","./loadable-25ad9e4e.js","./t9n-32a9e543.js","./observers-0326015d.js","./icon-30e1a9e4.js","./loader-271ba3e5.js"],import.meta.url),w(()=>import("./calcite-tooltip-0d0ff6ee.js"),["./calcite-tooltip-0d0ff6ee.js","./tooltip-a7341ad6.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./debounce-31e0cfcc.js","./guid-9426053f.js"],import.meta.url),w(()=>import("./calcite-icon-a9b2c435.js"),["./calcite-icon-a9b2c435.js","./icon-30e1a9e4.js","./widget-b2a8e375.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./intl-45f8f1a9.js","./number-b98554af.js","./locale-30120714.js","./messages-57170cca.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./assets-86d142ff.js","./Evented-d69b5d66.js","./Promise-24c50191.js","./reactiveUtils-989a8d7f.js","./uuid-73213768.js","./observers-0326015d.js"],import.meta.url)])}destroy(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:t}=this;if(!e)return!!(t!=null&&t.content);const n=e.viewModel;if(n!=null&&n.waitingForContent||(n==null?void 0:n.state)==="error")return!0;const s=n==null?void 0:n.content;return Array.isArray(s)?!!s.length:!!s}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||xo}set dockOptions(e){var d,h;const t={...xo},n=(h=(d=this.viewModel)==null?void 0:d.view)==null?void 0:h.breakpoints,s={};n&&(s.width=n.xsmall,s.height=n.xsmall);const r={...t,...e},o={...t.breakpoint,...s},{breakpoint:l}=r;typeof l=="object"?r.breakpoint={...o,...l}:l&&(r.breakpoint=o),this._set("dockOptions",r),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:n,_flowItems:s}=this,{selectedFeatureViewModel:r}=this.viewModel,o={...t,title:!1};return r?(e?(e.viewModel=r,e.visibleElements=o):this._feature=new Nu({flowItems:s,headingLevel:n+1,viewModel:r,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...Ao,...e}}blur(){const{active:e}=this.viewModel;e||S.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||S.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var r,o;this._handles.remove(To);const t=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:t};((o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var C,T,F,N;const{actionsMenuOpen:e,dockEnabled:t,featureMenuVisible:n,dividedActions:s,currentAlignment:r,currentDockPosition:o}=this,{active:l}=this.viewModel,{menuActions:d}=s,h=l&&d.length>1&&e,u=l&&t,p=l&&!t,g=(T=(C=this.selectedFeature)==null?void 0:C.layer)==null?void 0:T.title,f=(N=(F=this.selectedFeature)==null?void 0:F.layer)==null?void 0:N.id,b={[_.alignTopCenter]:r==="top-center",[_.alignBottomCenter]:r==="bottom-center",[_.alignTopLeft]:r==="top-left",[_.alignBottomLeft]:r==="bottom-left",[_.alignTopRight]:r==="top-right",[_.alignBottomRight]:r==="bottom-right",[_.isDocked]:u,[_.shadow]:p,[_.isDockedTopLeft]:o==="top-left",[_.isDockedTopCenter]:o==="top-center",[_.isDockedTopRight]:o==="top-right",[_.isDockedBottomLeft]:o==="bottom-left",[_.isDockedBottomCenter]:o==="bottom-center",[_.isDockedBottomRight]:o==="bottom-right",[_.isFeatureMenuOpen]:n,[_.isActionsMenuOpen]:h};return m("div",{class:this.classes(_.base,b),role:"presentation","data-layer-title":g,"data-layer-id":f,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},l?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return m("span",{"aria-hidden":"true",class:this.classes(_.icon,_.iconLoading,_.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?m("div",{key:je("loading-container"),role:"presentation",class:_.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=qe(this.container),t={[_.iconRightTriangleArrow]:e,[_.paginationPreviousIconRTL]:e,[_.iconLeftTriangleArrow]:!e,[_.paginationPreviousIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(_.icon,t)})}renderPreviousButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(_.button,_.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=qe(this.container),t={[_.iconLeftTriangleArrow]:e,[_.paginationNextIconRTL]:e,[_.iconRightTriangleArrow]:!e,[_.paginationNextIconLTR]:!e};return m("span",{"aria-hidden":"true",class:this.classes(_.icon,t)})}renderNextButton(){const{messages:e}=this;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(_.button,_.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:n}=this,{featureCount:s,selectedFeatureIndex:r}=this.viewModel;return m("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(_.button,_.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":n.menu,title:n.menu},this._getPageText(s,r))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),n={[_.iconUndock]:e,[_.iconDock]:!e,[_.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[_.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[_.iconDockToTop]:!e&&t==="top-center",[_.iconDockToBottom]:!e&&t==="bottom-center"};return m("span",{"aria-hidden":"true",class:this.classes(n,_.icon)})}renderDockButton(){var r,o,l;const{dockEnabled:e,messages:t}=this,n=(o=(r=this.viewModel)==null?void 0:r.view)==null?void 0:o.widthBreakpoint,s=e?t.undock:t.dock;return n!=="xsmall"&&((l=this.dockOptions)!=null&&l.buttonEnabled)?m("div",{role:"button","aria-label":s,title:s,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(_.button,_.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:n,contentCollapsed:s,messagesCommon:r}=this,o={[_.headerContainerButton]:n},l=m(dr,{level:this.headingLevel,class:_.headerTitle,innerHTML:e??""}),d=n?m("button",{key:`${e}--collapsible`,id:t,title:s?r.expand:r.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_.headerContainer,o),"aria-expanded":s?"false":"true",onclick:this._toggleCollapsed,type:"button"},l,m("calcite-icon",{class:_.collapseIcon,key:"collapse-icon",icon:s?"chevron-down":"chevron-up",scale:"m"})):m("div",{key:e??"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(_.headerContainer,o)},l);return e?d:null}renderCloseIcon(){return m("span",{"aria-hidden":"true",class:this.classes(_.icon,_.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?m("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:_.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return m("header",{class:_.header},this.renderTitle(),m("div",{class:_.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:n,_flowItems:s}=this,{content:r}=this.viewModel,o=s.toArray(),l={[_.contentHasFlows]:!!o.length};return t&&!n?m("div",{key:r??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(_.content,l)},m("calcite-flow",{bind:this},m("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Mn,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(d=>this.renderFlowItem(d))),o.map(d=>this.renderFlowItemTooltips(d))):null}renderFlowItem(e){const{messages:t}=this,n=An(),s="graphic"in e&&!e.isTable;return m("calcite-flow-item",{bind:this,class:this.classes({[_.calciteThemeDark]:!n,[_.calciteThemeLight]:n}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},m("calcite-action",{class:_.actionExit,icon:"move-up",label:t==null?void 0:t.exitRelatedRecords,text:t==null?void 0:t.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:r=>this._storeExitRelatedRecordsAction(e,r),onclick:this._destroyFlowItemWidgets}),s?m("calcite-action",{class:_.actionSelectFeature,icon:"zoom-to-object",label:t==null?void 0:t.selectFeature,text:t==null?void 0:t.selectFeature,slot:"header-actions-end",bind:this,afterCreate:r=>this._storeFeatureSelectionAction(e,r),onclick:()=>this._handleOpenRelatedFeature(e)}):null,m("div",{class:this.classes(_.contentFlowItem,{[_.calciteThemeDark]:n,[_.calciteThemeLight]:!n})},e.render()))}renderFlowItemTooltips(e){const{messages:t,_exitRelatedRecordsActions:n,_featureSelectionActions:s}=this,r=An(),o=s.get(e);return[m("calcite-tooltip",{class:this.classes({[_.calciteThemeDark]:!r,[_.calciteThemeLight]:r}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:n.get(e),placement:"top"},t==null?void 0:t.exitRelatedRecords),o?m("calcite-tooltip",{class:this.classes({[_.calciteThemeDark]:!r,[_.calciteThemeLight]:r}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:t==null?void 0:t.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},t==null?void 0:t.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:n,dividedActions:s,messagesCommon:r}=this,o=n?r.close:r.open,{menuActions:l}=s;return l.length?m("div",{key:je("actions-menu-button"),class:this.classes(_.button,_.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":n?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},m("span",{"aria-hidden":"true",class:_.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:n,dividedActions:s}=this,{menuActions:r}=s;return r.length&&n?m("ul",{id:e,role:"menu","aria-labelledby":t,key:je("actions"),class:_.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},r.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(t=>this.renderAction({action:t,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,n=!!e.length,s=!!t.length;return n||s?m("div",{key:"inline-actions-container","data-inline-actions":n.toString(),"data-menu-actions":s.toString(),class:_.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?m("section",{key:je("navigation"),class:this.classes(_.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:n,menuActions:s}=t,r=!!n.length,o=!!s.length,l={[_.footerHasPagination]:e,[_.footerHasActions]:r,[_.footerHasActionsMenu]:o};return e||r?m("div",{key:je("feature-buttons"),class:this.classes(_.footer,l)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:n}=this.viewModel,s=Be(e.selectedFeatures,{total:t.length});return m("section",{key:je("menu"),class:_.featureMenu},m("strong",{class:_.featureMenuHeader},s),m("nav",{bind:this,class:_.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Mn},this.renderFeatureMenu(),m("div",{class:_.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),n?m("div",{class:_.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:m("div",{key:je("pointer"),class:_.pointer,role:"presentation"},m("div",{class:this.classes(_.pointerDirection,_.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:n,titleId:s,contentId:r,collapsible:o,hasContent:l,contentCollapsed:d,visibleElements:h}=this,{title:u}=this.viewModel,p=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||n==="top-left"||n==="top-center"||n==="top-right",g=t==="top-left"||t==="top-center"||t==="top-right"||n==="bottom-left"||n==="bottom-center"||n==="bottom-right",f={[_.shadow]:e,[_.isCollapsible]:o,[_.isCollapsed]:d};return m("div",{class:this.classes(_.main,_.widget,f),tabIndex:h.closeButton?void 0:-1,role:"dialog","aria-labelledby":u?s:"","aria-describedby":l&&!d?r:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),g?this.renderFooter():null,g?this.renderFeatureMenuContainer():null)}renderContent(){var t;const e=(t=this.viewModel)==null?void 0:t.content;return e?typeof e=="string"?m("div",{class:j.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return m("span",{key:"text",class:_.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),n=this._getActionImage(e),s={[_.iconLoading]:e.active,[_.rotating]:e.active,[_.icon]:!!t,[_.actionImage]:!e.active&&!!n};return t&&(s[t]=!e.active),m("span",{key:"icon","aria-hidden":"true",class:this.classes(_.icon,s),styles:this._getIconStyles(n)})}renderAction(e){const{action:t,type:n}=e,s=this._getActionTitle(t),r={[_.action]:t.type!=="toggle",[_.actionToggle]:t.type==="toggle",[_.actionToggleOn]:t.type==="toggle"&&t.value,[_.buttonDisabled]:t.disabled},o=[this.renderActionIcon(t),this.renderActionText(s)],l=n==="menu-item"?m("li",{key:t.uid,role:"menuitem",tabIndex:0,title:s,"aria-label":s,class:this.classes(_.button,r),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):m("div",{key:t.uid,role:"button",tabIndex:0,title:s,"aria-label":s,class:this.classes(_.button,r),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return t.visible?l:null}renderFeatureMenuItem(e,t){const{messages:n,messagesCommon:s}=this,{selectedFeatureIndex:r,selectedFeatureViewModel:o}=this.viewModel,l=e===o,d={[_.featureMenuSelected]:l},h=l?m("span",{key:je(`feature-menu-selected-feature-${r}`),title:n.selectedFeature,"aria-label":n.selectedFeature,class:_.iconCheckMark}):null,u=m("span",{innerHTML:e.title||s.untitled});return m("li",{role:"menuitem",tabIndex:-1,key:je(`feature-menu-feature-${r}`),class:this.classes(d,_.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},m("span",{class:_.featureMenuTitle},u,h))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?m("ol",{class:_.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(n=>!!n.graphic).map((n,s)=>this.renderFeatureMenuItem(n,s))):null}_storeFeatureSelectionAction(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()}_storeExitRelatedRecordsAction(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const t=e.graphic,n=t==null?void 0:t.geometry;if(P(n)||P(t))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:n});const s=nl(n);this.open({features:[t],location:v(s)?s:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:t,selectedFeature:n,messagesCommon:s}=this,{id:r}=e,o=n==null?void 0:n.attributes,l=e.title??"",d=r==="zoom-to-feature"?Be(l,{messages:t}):r==="remove-selected-feature"?Be(l,{messages:s}):r==="zoom-to-clustered-features"||r==="browse-clustered-features"?Be(l,{messages:t}):e.title;return d&&o?Be(d,o):d??""}_getActionClass(e){const{selectedFeature:t}=this,n=t==null?void 0:t.attributes,{className:s,image:r}=e,o=r||s?s:_.iconDefaultAction;return o&&n?Be(o,n):o??""}_getActionImage(e){const{selectedFeature:t}=this,n=t==null?void 0:t.attributes,{image:s}=e;return s&&n?Be(s,n):s??""}_createFeatureUpdatedAnimation(){return Vc("enter",_.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const n=Math.round(e);return Math.max(t?n-1:n,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(n=>{this._handles.add(y(()=>[n.uid,n.active,n.className,n.disabled,n.id,n.title,n.image,n.visible],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(o=>o.visible),n=this._getInlineActionCount(),s=n===null,r=n===0;return{inlineActions:s?t.slice(0):r?new G:t.slice(0,n),menuActions:s?new G:r?t.slice(0):t.slice(n)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var n,s;const{selectedFeatureWidget:e,messagesCommon:t}=this;e&&(this.viewModel.title=((n=e.viewModel)==null?void 0:n.state)==="error"?t.errorMessage:((s=e.viewModel)==null?void 0:s.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){Vt(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){Vt(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:t}=this,n=e.currentTarget["data-feature-index"];t.activeFeature=t.features[n]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const t=Vt(e),{_featureMenuNode:n}=this,s=e.currentTarget["data-feature-index"];if(!n)return;const r=n.querySelectorAll("li"),o=r.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),r[r.length-1].focus()):(e.stopPropagation(),r[0].focus()):(e.stopPropagation(),r[(s+1+o)%o].focus()):(e.stopPropagation(),r[(s-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const t=Vt(e),{_actionsMenuNode:n}=this,s=e.currentTarget.dataset.actionUid,{menuActions:r}=this.dividedActions,o=r.findIndex(h=>h.uid===s);if(!n)return;const l=n.querySelectorAll("li"),d=l.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),l[l.length-1].focus()):(e.stopPropagation(),l[0].focus()):(e.stopPropagation(),l[(o+1+d)%d].focus()):(e.stopPropagation(),l[(o-1+d)%d].focus())}_handleMainKeyup(e){const t=Vt(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:n}=this.viewModel;n&&t?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await er(()=>{var t;return((t=this.viewModel)==null?void 0:t.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=y(()=>{var t;return(t=this.viewModel)==null?void 0:t.selectedFeatureIndex},(t,n)=>this._selectedFeatureIndexUpdated(t,n));this._handles.add(e,To)}_selectedFeatureIndexUpdated(e,t){const{featureCount:n}=this;n&&e!==t&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:n,screenLocation:s,side:r,view:o}=e;if(isNaN(n)||isNaN(t)||!o||!s)return!1;const l=o.padding;return r==="right"&&s.x+n/2>o.width-l.right||r==="left"&&s.x-n/2<l.left||r==="top"&&s.y-t<l.top||r==="bottom"&&s.y+t>o.height-l.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:n,_mainContainerNode:s,viewModel:r}=this,{screenLocation:o,view:l}=r;if(P(o)||!l||!n)return"top-center";if(!this._isScreenLocationWithinView(o,l))return this._get("currentAlignment")||"top-center";function d(W){return parseInt(W.replace(/[^-\d\.]/g,""),10)}const h=s?window.getComputedStyle(s,null):null,u=h?d(h.getPropertyValue("max-height")):0,p=h?d(h.getPropertyValue("height")):0,{height:g,width:f}=n.getBoundingClientRect(),b=f+t,C=Math.max(g,u,p)+t,T=this._isOutsideView({popupHeight:C,popupWidth:b,screenLocation:o,side:"right",view:l}),F=this._isOutsideView({popupHeight:C,popupWidth:b,screenLocation:o,side:"left",view:l}),N=this._isOutsideView({popupHeight:C,popupWidth:b,screenLocation:o,side:"top",view:l}),D=this._isOutsideView({popupHeight:C,popupWidth:b,screenLocation:o,side:"bottom",view:l});return F?N?"bottom-right":"top-right":T?N?"bottom-left":"top-left":N?D?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return qe(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var l;if(e!=="auto")return e;const t=(l=this.viewModel)==null?void 0:l.view,n=qe(this.container)?"top-left":"top-right";if(!t)return n;const s=t.padding||{left:0,right:0,top:0,bottom:0},r=t.width-s.left-s.right,{breakpoints:o}=t;return o&&r<=o.xsmall?"bottom-center":n}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:t}=this.viewModel,{width:n}=this._containerNode.getBoundingClientRect(),s=this._calculatePositionStyle(t,n);s&&Object.assign(this._containerNode.style,s)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:n}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+n:e}_calculateAlignmentPosition(e,t,n,s){const{currentAlignment:r,_pointerOffsetInPx:o}=this;if(!n)return;const{padding:l}=n,d=s/2,h=n.height-t,u=n.width-e;return r==="bottom-center"?{top:t+o-l.top,left:e-d-l.left}:r==="top-left"?{bottom:h+o-l.bottom,right:u+o-l.right}:r==="bottom-left"?{top:t+o-l.top,right:u+o-l.right}:r==="top-right"?{bottom:h+o-l.bottom,left:e+o-l.left}:r==="bottom-right"?{top:t+o-l.top,left:e+o-l.left}:r==="top-center"?{bottom:h+o-l.bottom,left:e-d-l.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:n,view:s}=this;if(!s)return;if(n)return{left:"",top:"",right:"",bottom:""};if(P(e)||!t)return;const r=this._calculateFullWidth(t),o=this._calculateAlignmentPosition(e.x,e.y,s,r);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const n=this.get("viewModel.view");this._wireUpView(n)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,n){const[s,r]=e,[o,l]=t,{width:d=0,height:h=0}=n??{};return s<=d&&o>d||s>d&&o<=d||r<=h&&l>h||r>h&&l<=h}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const n=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},s=n.left+n.right,r=n.top+n.bottom,o=[],l=[];o[0]=e[0]-s,o[1]=e[1]-r,l[0]=t[0]-s,l[1]=t[1]-r;const{dockOptions:d}=this,h=d.breakpoint;this._dockingThresholdCrossed(o,l,h)&&this._setDockEnabledForViewSize(d),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const n=t.active&&!e;t.screenLocationEnabled=n}_shouldDockAtCurrentViewSize(e){var d,h;const t=e.breakpoint,n=(h=(d=this.viewModel)==null?void 0:d.view)==null?void 0:h.ui;if(!n)return!1;const{width:s,height:r}=n;if(isNaN(s)||isNaN(r)||!t)return!1;const o=t.hasOwnProperty("width")&&s<=(t.width??0),l=t.hasOwnProperty("height")&&r<=(t.height??0);return o||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?Be(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(e,Eo),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new Bu({view:e}),e.ui.add(this._spinner,{key:Eo,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:n}=this.viewModel,s=n.findIndex(o=>o.uid===t),r=n.getItemAt(s);r&&r.type==="toggle"&&(r.value=!r.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(s)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};a([c({readOnly:!0})],E.prototype,"actionsMenuId",null),a([c({readOnly:!0})],E.prototype,"actionsMenuButtonId",null),a([c({readOnly:!0})],E.prototype,"featureMenuId",null),a([c({readOnly:!0})],E.prototype,"titleId",null),a([c({readOnly:!0})],E.prototype,"contentId",null),a([c({readOnly:!0})],E.prototype,"hasContent",null),a([c({readOnly:!0})],E.prototype,"featureNavigationVisible",null),a([c({readOnly:!0})],E.prototype,"collapsible",null),a([c({readOnly:!0})],E.prototype,"featureMenuVisible",null),a([c({readOnly:!0})],E.prototype,"contentCollapsed",null),a([c({readOnly:!0})],E.prototype,"dividedActions",null),a([c({readOnly:!0,dependsOn:["_flowItems.length"]})],E.prototype,"_activeFlowItemWidget",null),a([c()],E.prototype,"actions",null),a([c()],E.prototype,"actionsMenuOpen",null),a([c()],E.prototype,"alignment",void 0),a([c()],E.prototype,"autoCloseEnabled",null),a([c()],E.prototype,"autoOpenEnabled",null),a([c()],E.prototype,"defaultPopupTemplateEnabled",null),a([c()],E.prototype,"content",null),a([c()],E.prototype,"collapsed",void 0),a([c()],E.prototype,"collapseEnabled",void 0),a([c({readOnly:!0})],E.prototype,"currentAlignment",null),a([c({readOnly:!0})],E.prototype,"currentDockPosition",null),a([c()],E.prototype,"dockOptions",null),a([c()],E.prototype,"dockEnabled",void 0),a([c({readOnly:!0})],E.prototype,"featureCount",null),a([c()],E.prototype,"featureMenuOpen",void 0),a([c()],E.prototype,"features",null),a([c()],E.prototype,"goToOverride",null),a([c()],E.prototype,"headingLevel",void 0),a([c()],E.prototype,"highlightEnabled",null),a([c()],E.prototype,"location",null),a([c()],E.prototype,"label",null),a([c()],E.prototype,"maxInlineActions",void 0),a([c(),le("esri/widgets/Popup/t9n/Popup")],E.prototype,"messages",void 0),a([c(),le("esri/t9n/common")],E.prototype,"messagesCommon",void 0),a([c()],E.prototype,"promises",null),a([c({readOnly:!0})],E.prototype,"selectedFeature",null),a([c()],E.prototype,"selectedFeatureIndex",null),a([c({readOnly:!0})],E.prototype,"selectedFeatureWidget",null),a([c()],E.prototype,"spinnerEnabled",void 0),a([c()],E.prototype,"title",null),a([c()],E.prototype,"updateLocationEnabled",null),a([c()],E.prototype,"view",null),a([c({type:ol}),Vh(["triggerAction","trigger-action"])],E.prototype,"viewModel",void 0),a([c()],E.prototype,"visible",null),a([c()],E.prototype,"visibleElements",void 0),a([ye("visibleElements")],E.prototype,"castVisibleElements",null),a([Ee()],E.prototype,"_close",null),a([Ee()],E.prototype,"_toggleDockEnabled",null),a([Ee()],E.prototype,"_toggleFeatureMenu",null),a([Ee()],E.prototype,"_toggleActionsMenu",null),a([Ee()],E.prototype,"_triggerAction",null),a([Ee()],E.prototype,"_selectFeature",null),a([Ee()],E.prototype,"_next",null),a([Ee()],E.prototype,"_previous",null),E=a([I("esri.widgets.Popup")],E);const ko=E,ms=[0,0];function pp(i){const e=(i.ownerDocument||window.document).defaultView,t=i.getBoundingClientRect();return ms[0]=t.left+((e==null?void 0:e.pageXOffset)??0),ms[1]=t.top+((e==null?void 0:e.pageYOffset)??0),ms}function Po(i){i&&(va(i),i.parentNode&&i.parentNode.removeChild(i))}function mp(i){const e=document.createElement("div");return i.appendChild(e),e}const Ei=16,nn=750,gp=512,fp=2,_p=i=>{let e=class extends i{constructor(...t){var n;super(...t),this._freqInfo={freq:Ei,time:nn},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,t.length!==0&&((n=t[0])==null?void 0:n.popup)!==void 0||(this.popup=new ko({view:this})),this.handles.add([y(()=>this.cursor,s=>{const{surface:r}=this;r&&r.setAttribute("data-cursor",s)}),y(()=>this.interacting,s=>{const{surface:r}=this;r&&r.setAttribute("data-interacting",s.toString())})])}initialize(){this.handles.add(y(()=>this.ui,(t,n)=>this._handleUIChange(t,n))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=ae(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(t){const n=this._get("container"),s=ya(t);if(s||typeof t!="string"||S.getLogger(this.declaredClass).error("#container",`element with id '${t}' not found`),n===s)return;const r="dom-size";if(this.handles.remove(r),this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Po(this.root),this._set("root",null)),this.userContent&&(Fr(this.userContent,n),Po(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",Fr(s,o),s.appendChild(o),this._set("userContent",o);const l=document.createElement("div");l.className="esri-view-root",s.insertBefore(l,s.firstChild),this._set("root",l);const d=document.createElement("div");d.className="esri-view-surface",d.setAttribute("role","application"),d.tabIndex=0,l.appendChild(d),this._set("surface",d);const h=new Yr;l.appendChild(h.surface),this._set("overlay",h),y(()=>h.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=fi({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=rt(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(y(()=>this.size,u=>{const[p,g]=u,f="esri-view-surface--inset-outline";p>=document.body.clientWidth||g>=document.body.clientHeight?d.classList.add(f):d.classList.remove(f)},V),r),this._set("container",s),this._startMeasuring()}get focused(){const t=document.activeElement===this.surface;return document.hasFocus()&&t}set popup(t){const n=this._get("popup");n&&n!==t&&n.destroy(),this._set("popup",t)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(t,n,s){const r=this.position;return t-=r?r[0]:0,n-=r?r[1]:0,s?(s[0]=t,s[1]=n):s=[t,n],s}containerToPage(t,n,s){const r=this.position;return t+=r?r[0]:0,n+=r?r[1]:0,s?(s[0]=t,s[1]=n):s=[t,n],s}_handleUIChange(t,n){n&&(this.handles.remove("ui"),n.destroy()),t&&this._wireUI(t),this._set("ui",t)}_wireUI(t){this.handles.remove("ui"),t&&(t.view=this,this.handles.add([y(()=>this.root,n=>{t.container=n?mp(n):null},V),y(()=>this.popup,(n,s)=>{const r="popup",o="manual";s&&t.remove(s,r),n&&(n.view=t.view,t.add(n,{key:r,position:o}))},V)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const t=this._freqInfo;t.freq=Ei,t.time=nn,this.handles.add([(()=>{const n=()=>{t.freq=Ei,t.time=nn};return window.addEventListener("resize",n),{remove(){window.removeEventListener("resize",n)}}})(),fi({prepare:n=>{const s=this._measure(),r=this._freqInfo;if(r.time+=n.deltaTime,s&&(r.freq=Ei,this._get("resizing")||this._set("resizing",!0)),r.time<r.freq)return;r.time=0;const o=this._position();r.freq=o||s?Ei:Math.min(nn,r.freq*fp),!s&&r.freq>=gp&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const t=this.container,n=t?t.clientWidth:0,s=t?t.clientHeight:0;if(n===0||s===0)return this.suspended||this._set("suspended",!0),!1;const r=this.width,o=this.height;return n===r&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:o,width:n,height:s}),!0)}_position(){const t=this.container,n=this.position,s=t&&pp(t);return!!s&&(!n||s[0]!==n[0]||s[1]!==n[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return a([c()],e.prototype,"container",null),a([c({readOnly:!0})],e.prototype,"focused",null),a([c({readOnly:!0})],e.prototype,"height",void 0),a([c({type:ko})],e.prototype,"popup",null),a([c({type:Yr})],e.prototype,"overlay",void 0),a([c({readOnly:!0})],e.prototype,"position",void 0),a([c({readOnly:!0})],e.prototype,"resizing",void 0),a([c({readOnly:!0})],e.prototype,"root",void 0),a([c({value:null,readOnly:!0})],e.prototype,"size",null),a([c({readOnly:!0})],e.prototype,"surface",void 0),a([c({readOnly:!0})],e.prototype,"suspended",void 0),a([c()],e.prototype,"ui",void 0),a([c({readOnly:!0})],e.prototype,"userContent",void 0),a([c({readOnly:!0})],e.prototype,"width",void 0),a([c()],e.prototype,"widthBreakpoint",void 0),e=a([I("esri.views.DOMContainer")],e),e},yp=i=>{let e=class extends i{async fetchPopupFeatures(t,n){await this.when();const{location:s,queryArea:r,layerViewsAndGraphics:o,clientOnlyGraphics:l}=await this._prepareFetchPopupFeatures(t,n),d=Promise.resolve(l),h=this._queryLayerPopupFeatures(r,o,n),u=h.map(p=>p.promise);return{location:s,clientOnlyGraphics:l,allGraphicsPromise:oc([d,...u]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:h}}_queryLayerPopupFeatures(t,n,s){return n.map(({layerView:r,graphics:o})=>{const l={clientGraphics:o,event:v(s)?s.event:void 0,signal:v(s)?s.signal:void 0,defaultPopupTemplateEnabled:!!v(s)&&!!s.defaultPopupTemplateEnabled},d=r.fetchPopupFeatures(t,l);return{layerView:r,promise:d}})}_isValidPopupGraphic(t,n){return t&&!!t.getEffectivePopupTemplate(v(n)&&n.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(t,n){const{clientGraphics:s,queryArea:r,location:o}=await this._popupHitTestGraphics(t,n),l=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:d,clientOnlyGraphics:h}=this._graphicsPerFetchPopupLayerView(s,l);return{clientOnlyGraphics:h,layerViewsAndGraphics:d,queryArea:r,location:o}}async _popupHitTestGraphics(t,n){const s=await this.popupHitTest(t),r=s.results,o=s.mapPoint,l=r.filter(h=>h.type==="graphic"&&this._isValidPopupGraphic(h.graphic,n)),d=l.length?l[0].mapPoint:null;return{clientGraphics:l.map(h=>h.graphic),queryArea:o,location:o||d}}_getFetchPopupLayerViews(){const t=[];return this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&t.push(n)}),v(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&t.push(this.graphicsView),t.reverse()}_isValidPopupLayerView(t){return v(t)&&(!("layer"in t)||!t.suspended)&&"fetchPopupFeatures"in t}_graphicsPerFetchPopupLayerView(t,n){const s=[],r=new Map,o=n.map(l=>{const d=[];return"layer"in l?r.set(l.layer,d):r.set(l.graphics,d),{layerView:l,graphics:d}});for(const l of t){const d=r.get(l.layer)||r.get(l.sourceLayer)||null;d?d.push(l):s.push(l)}return{layerViewsAndGraphics:o,clientOnlyGraphics:s}}};return e=a([I("esri.views.PopupView")],e),e};let Pn=class extends vd{constructor(e){super(e),this.handles.add(this.on("before-add",t=>{P(t.item)||t.item.parent===this.owner&&(S.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Pn=a([I("esri.support.AnalysesCollection")],Pn);let gt=class extends L{constructor(e){super(e),this.view=null,this.baseLayerViews=new G,this.referenceLayerViews=new G,this._loadingHandle=y(()=>{var t,n;return(n=(t=this.view)==null?void 0:t.map)==null?void 0:n.basemap},t=>{t&&t.load().catch(()=>{})},V)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var t,n;if(this.view&&this.view.suspended)return!1;const e=(n=(t=this.view)==null?void 0:t.map)==null?void 0:n.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(s=>s.updating)||this.referenceLayerViews.some(s=>s.updating))}};a([c({constructOnly:!0})],gt.prototype,"view",void 0),a([c({readOnly:!0})],gt.prototype,"baseLayerViews",void 0),a([c({readOnly:!0})],gt.prototype,"referenceLayerViews",void 0),a([c({readOnly:!0})],gt.prototype,"suspended",null),a([c({type:Boolean,readOnly:!0})],gt.prototype,"updating",null),gt=a([I("esri.views.BasemapView")],gt);function vp(i){return"tryRecycleWith"in i}class wp{constructor(e,t,n){this.layer=e,this.view=t,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=aa(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Gn(this._controller.signal,()=>{const s=new $("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(s)})}tryRecycle(e){if(!this.done||!this.layerView||!vp(this.layerView))return null;const t=this.layer.type,n=this._controller.signal;for(let s=0;s<e.length;s++){const r=e[s];if(r.type!==t)continue;const o=this.layerView.tryRecycleWith(r,{signal:n});if(o){e.splice(s,1),this.layer=r;const l=this.layerView,d=l.view;return this.promise=Promise.race([o.then(()=>(nt(this._controller.signal),r.emit("layerview-destroy",{view:d,layerView:l}),d.emit("layerview-destroy",{view:d,layerView:l}),r.emit("layerview-create",{view:d,layerView:l}),d.emit("layerview-create",{view:d,layerView:l}),l)),new Promise((h,u)=>Gn(this._controller.signal,()=>u(la())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:t,view:n}=this;t.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var s,r,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:t,view:n}=this;this._map=n.map;try{let l,d;if(await t.load({signal:e}),"prefetchResources"in t&&await((s=t.prefetchResources)==null?void 0:s.call(t,{signal:e})),Mp(t))l=await t.createLayerView(n,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(t))throw new $("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(t);nt(e),l="default"in p?new p.default({layer:t,view:n}):new p({layer:t,view:n})}const h=()=>{d=rt(d),l.destroyed||l.destroy(),l.layer=null,l.parent=null,l.view=null,this.done=!0};d=Gn(e,h),nt(e);try{await l.when()}catch(p){throw h(),p}if(!((o=(r=this._map)==null?void 0:r.allLayers)==null?void 0:o.includes(t)))return h(),void this._deferred.reject(new $("view:no-layerview-for-layer","The layer has been removed from the map",{layer:t}));this.layerView=l,t.emit("layerview-create",{view:n,layerView:l}),n.emit("layerview-create",{layer:t,layerView:l}),this.done=!0,this._deferred.resolve(l)}catch(l){t.emit("layerview-create-error",{view:n,error:l}),n.emit("layerview-create-error",{layer:t,error:l}),this.done=!0,this._deferred.reject(new $("layerview:create-error","layerview creation failed",{layer:t,error:l}))}}}let Te=class extends L{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new wa,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const t=(n=this.view.map)==null?void 0:n.allLayers;if(t)for(const s of t)this.layerViewImporter.hasLayerViewModule(s)&&this.layerViewImporter.importLayerView(s)},this._reschedule=()=>(P(this._workPromise)&&(this._workPromise=aa(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Jl(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var d,h,u;const t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),P(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,s=[],r=this.view.ready,o=p=>{if(!P(p)){for(const g of p)if(g){n.add(g);const f=this._layerLayerViewInfoMap.get(g);f&&r?f.start():f||this._recyclingInfoMap.has(g)||s.push(g),"layers"in g&&g.layers&&o(g.layers)}}};for(const p of this._rootCollectionNames)o(this.get(p));for(const[p,g]of this._layerLayerViewInfoMap)if(!n.has(p)){this._layerLayerViewInfoMap.delete(g.layer);const f=g.tryRecycle(s);f?(this._recyclingInfoMap.set(g.layer,g),f.then(()=>{this._recyclingInfoMap.delete(g.layer),this._layerLayerViewInfoMap.set(g.layer,g),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(g.layer),g.destroy(),this._reschedule()})):g.destroy()}for(const[p,g]of this._recyclingInfoMap)n.has(p)||(this._recyclingInfoMap.delete(g.layer),g.destroy());for(const p of s)this._createLayerView(p);this._refreshCollections();const l=[(d=t==null?void 0:t.ground)==null?void 0:d.layers,(h=t==null?void 0:t.basemap)==null?void 0:h.baseLayers,(u=t==null?void 0:t.basemap)==null?void 0:u.referenceLayers,t==null?void 0:t.layers].filter(p=>!!p);n.forEach(p=>"layers"in p&&l.push(p.layers)),this.addHandles(l.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([Pe(()=>{var e,t;return(t=(e=this.view)==null?void 0:e.map)==null?void 0:t.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),y(()=>{const e=this.view,t=e==null?void 0:e.map;return[t==null?void 0:t.basemap,t==null?void 0:t.ground,t==null?void 0:t.layers,e==null?void 0:e.ready]},()=>this._reschedule(),kt)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,v(this._workPromise)&&(this._workPromise.reject(la()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return v(this._workPromise)||this._watchUpdatingTracking.updating||Rn(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new $("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void(t&&t.removeAll());let s=0;for(const r of e){const o=this._layerLayerViewInfoMap.get(r);if(!o||!o.layerView)continue;const l=o.layerView;l.layer=r,l.parent=n,t.getItemAt(s)!==l&&t.splice(s,0,l),r.layers&&this._populateLayerViewsOwners(r.layers,l.layerViews,l),s+=1}s<t.length&&t.splice(s,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new wp(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),n=>{n&&(oa(n)||n.name==="cancelled:layerview-create")||S.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};a([c()],Te.prototype,"_workPromise",void 0),a([c({readOnly:!0})],Te.prototype,"_watchUpdatingTracking",void 0),a([c({readOnly:!0})],Te.prototype,"_layersToLayerViews",null),a([c({readOnly:!0})],Te.prototype,"_rootCollectionNames",null),a([c()],Te.prototype,"layerViewImporter",void 0),a([c()],Te.prototype,"supportsGround",void 0),a([c({readOnly:!0})],Te.prototype,"updating",null),a([c({readOnly:!0})],Te.prototype,"updatingRemaining",null),a([c({constructOnly:!0})],Te.prototype,"view",void 0),Te=a([I("esri.views.LayerViewManager")],Te);const bp=Te;function Mp(i){return"createLayerView"in i&&i.createLayerView!=null}let be=class extends L{constructor(e){super(e),this.factor=1.5,this.offset=me(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};a([c({type:Number})],be.prototype,"factor",void 0),a([c({nonNullable:!0})],be.prototype,"offset",void 0),a([c()],be.prototype,"position",void 0),a([c({type:Number,range:{min:0}})],be.prototype,"size",void 0),a([c()],be.prototype,"maskUrl",void 0),a([c()],be.prototype,"maskEnabled",void 0),a([c()],be.prototype,"overlayUrl",void 0),a([c()],be.prototype,"overlayEnabled",void 0),a([c({readOnly:!0})],be.prototype,"version",null),a([c({type:Boolean})],be.prototype,"visible",void 0),be=a([I("esri.views.Magnifier")],be);const al=be;let Li=class extends L{constructor(e,t){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(t==null?void 0:t.registerTask(pd.TEXTURE_UNLOAD))??md}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,t,n){const s=this.makeUid(e);let r=this._textureRequests.get(s);if(!r){const o=t();r={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:n},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(s,r)}return r.referenceCount++,{uid:s,texture:r.texture,release:()=>this._release(s)}}_release(e){const t=this._textureRequests.get(e);t?(t.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),t.referenceCount--,t.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const t=this._textureRequests.get(e);!t||t.referenceCount>0||(this._releaseTextureRequest(t),this._textureRequests.delete(e))}_releaseTextureRequest(e){var t;e.onRemove&&e.onRemove(),e.texture?(t=this._stage)==null||t.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,t=null){return v(t)?`${e}.${t}px`:e}};a([c()],Li.prototype,"_frameTask",void 0),a([c()],Li.prototype,"updating",null),Li=a([I("esri.views.3d.support.TextureCollection")],Li);var Fo;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right"})(Fo||(Fo={}));const ll=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],cl={};function dl(i){return!!cl[i]}function Ip(i){for(const e of i)if(!dl(e))return!1;return!0}ll.forEach(i=>{cl[i]=!0});let Cp=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:t,priority:n},s)=>{var r;return(r=this.inputManager)==null?void 0:r.installHandlers(s,[t],n)})}disconnect(){this.inputManager&&this._handlers.forEach((e,t)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(t)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,t,n,s){const r=Array.isArray(e)?e:e.split(",");if(!Ip(r))return r.some(dl)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,l;Array.isArray(t)?l=t:(o=t,l=[]),typeof n=="function"?o=n:s=n,s=s??It.DEFAULT;const d=this._createUniqueGroupName(),h=new Tp(this.view,r,l,o);this._handlers.set(d,{handler:h,priority:s});for(const u of r){const p=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,p+1)}return this.inputManager&&this.inputManager.installHandlers(d,[h],s),{remove:()=>this._removeHandler(d,r)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,t){if(this._handlers.has(e)){this._handlers.delete(e);for(const n of t){const s=this._handlerCounts.get(n);s===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",n):s===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,s-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Tp=class extends ie{constructor(e,t,n,s){super(!0),this._latestDragStart=void 0,this.view=e;for(const r of t)switch(r){case"click":this.registerIncoming("click",n,o=>s(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",n,o=>s(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",n,o=>s(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,o=>s(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",n,o=>s(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",n,o=>{const l=this._wrapDrag(o);l&&s(l)});break;case"key-down":this.registerIncoming("key-down",n,o=>s(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",n,o=>s(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",n,o=>s(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,o=>s(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,o=>s(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,o=>s(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,o=>s(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,o=>s(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,o=>s(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,o=>{s(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",n,o=>{s(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",n,o=>{s(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:t,button:n,buttons:s,x:r,y:o,native:l,eventId:d}=e.data,{cancelable:h,timestamp:u}=e;return{type:"click",pointerType:t,button:n,buttons:s,x:r,y:o,native:l,timestamp:u,screenPoint:me(r,o),mapPoint:this._getMapPoint(r,o),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:t,button:n,buttons:s,x:r,y:o,native:l,eventId:d}=e.data,{cancelable:h,timestamp:u}=e;return{type:"double-click",pointerType:t,button:n,buttons:s,x:r,y:o,native:l,timestamp:u,mapPoint:this._getMapPoint(r,o),eventId:d,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:t,button:n,buttons:s,x:r,y:o,native:l,eventId:d}=e.data,h=l.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-click",pointerId:h,pointerType:t,button:n,buttons:s,x:r,y:o,native:l,timestamp:p,mapPoint:this._getMapPoint(r,o),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:t,button:n,buttons:s,x:r,y:o,native:l,eventId:d}=e.data,h=l.pointerId,{cancelable:u,timestamp:p}=e;return{type:"immediate-double-click",pointerId:h,pointerType:t,button:n,buttons:s,x:r,y:o,native:l,timestamp:p,mapPoint:this._getMapPoint(r,o),eventId:d,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:t,button:n,buttons:s,x:r,y:o,native:l}=e.data,{cancelable:d,timestamp:h}=e;return{type:"hold",pointerType:t,button:n,buttons:s,x:r,y:o,native:l,timestamp:h,mapPoint:this._getMapPoint(r,o),cancelable:d,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,t){return this.view.toMap(me(e,t),{exclude:[]})}_wrapDrag(e){const t=e.data,{x:n,y:s}=t.center,{action:r,pointerType:o,button:l}=t;if(r==="start"&&(this._latestDragStart=t),!this._latestDragStart)return;const d=t.pointer.native,h=t.buttons,{cancelable:u,timestamp:p}=e,g={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return r==="end"&&(this._latestDragStart=void 0),{type:"drag",action:r,x:n,y:s,origin:g,pointerType:o,button:l,buttons:h,radius:t.radius,angle:Ac(t.angle),native:d,timestamp:p,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:t,repeat:n,native:s}=e.data,{cancelable:r,timestamp:o}=e;return{type:"key-down",key:t,repeat:n,native:s,timestamp:o,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:t,native:n}=e.data,{cancelable:s,timestamp:r}=e;return{type:"key-up",key:t,native:n,timestamp:r,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,t){const{x:n,y:s,button:r,buttons:o,native:l,eventId:d}=e.data,h=l.pointerId,u=l.pointerType,{cancelable:p,timestamp:g}=e;return{type:t,x:n,y:s,pointerId:h,pointerType:u,button:r,buttons:o,native:l,timestamp:g,eventId:d,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:t,y:n,buttons:s,native:r,eventId:o}=e.data.currentEvent,{button:l}=e.data.startEvent,d=e.data.startEvent.native.pointerId,h=e.data.startEvent.native.pointerType,u=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:g,timestamp:f}=e;return{type:"pointer-drag",x:t,y:n,pointerId:d,pointerType:h,button:l,buttons:s,action:u,origin:p,native:r,timestamp:f,eventId:o,cancelable:g,stopPropagation:()=>e.stopPropagation(),async:b=>e.async(b),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:t,data:n,timestamp:s}=e,{x:r,y:o,deltaY:l,native:d}=n;return{type:"mouse-wheel",x:r,y:o,deltaY:l,native:d,timestamp:s,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:t,state:n,device:s}=e.data,{cancelable:r,timestamp:o}=e,{buttons:l,axes:d}=n;return{type:"gamepad",device:s,timestamp:o,action:t,buttons:l,axes:d,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}};var Wi,Ro,So;(function(i){i[i.USER=0]="USER",i[i.MANAGER=1]="MANAGER"})(Wi||(Wi={})),function(i){i[i.None=0]="None",i[i.Unfocused=1]="Unfocused",i[i.Focused=2]="Focused",i[i.Unselected=4]="Unselected",i[i.Selected=8]="Selected",i[i.All=15]="All"}(Ro||(Ro={})),function(i){i[i.None=0]="None",i[i.Custom1=16]="Custom1",i[i.Custom2=32]="Custom2",i[i.Custom3=64]="Custom3",i[i.Custom4=128]="Custom4",i[i.Custom5=256]="Custom5",i[i.Custom6=512]="Custom6",i[i.Custom7=1024]="Custom7",i[i.Custom8=2048]="Custom8",i[i.Custom9=4096]="Custom9",i[i.Custom10=8192]="Custom10",i[i.Custom11=16384]="Custom11",i[i.Custom12=32768]="Custom12",i[i.All=65520]="All"}(So||(So={}));function Ep(i){return[i.on("before-add",e=>{const t=e.item;if(t==null||i.includes(t))return S.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();t.onAdd()}),i.on("after-remove",e=>{const t=e.item;t.active&&(t.view.activeTool=null),t.destroy()})]}function zs(i){return i.visible&&i.getEditableFlag!=null&&i.getEditableFlag(Wi.USER)&&i.getEditableFlag(Wi.MANAGER)}function Oe(i){return me(i.x,i.y)}function hl(i,e){var n;const t=(n=i instanceof HTMLElement?i:i.surface)==null?void 0:n.getBoundingClientRect();return t?me(e.clientX-t.left,e.clientY-t.top):me(0,0)}function Lo(i,e){return e instanceof Event?hl(i,e):Oe(e)}function Do(i){if(i instanceof Event)return!0;if(typeof i=="object"&&"type"in i)switch(i.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let xp=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,t){const n=()=>e.stopPropagation();switch(e.type){case"pointer-move":Oo(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Vo(e))break;const s=Oe(e),r=this._intersect(s,e.pointerType,t.forEachTool);if(P(r))break;const o=r.manipulator,l=r.tool;!(v(o)&&v(l)&&o.interactive)||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,t),v(o)&&v(l)&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:l,start:s,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&P(t.activeTool)&&(this._revertToNullActiveTool=!0,t.setActiveTool(r.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:s}),n());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,t);break;case"pointer-drag":{if(!Vo(e))break;const s=this._grabbedManipulators.get(e.pointerId),r=Pi(s,({manipulator:u})=>u),o=Pi(s,({tool:u})=>u);if(P(r)||P(o))break;const l=Oe(e);l.x=yi(l.x,0,t.view.width),l.y=yi(l.y,0,t.view.height);const d=Ie(s).start,h=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(r.dragging=!0,h?r.events.emit("drag",{action:"update",start:d,screenPoint:l}):r.events.emit("drag",{action:"start",start:d,screenPoint:l,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:r,start:d}));break;case"end":r.dragging=!1,h&&r.events.emit("drag",{action:"end",start:d,screenPoint:l}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}n();break}case"immediate-click":{const s=Oe(e),r=this._intersect(s,e.pointerType,t.forEachTool);if($p(e)||t.forEachTool(h=>{if((!v(r)||r.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let u=!1;h.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,u=!0)}),u&&h.onManipulatorSelectionChanged&&h.onManipulatorSelectionChanged()}}),P(r))break;const{manipulator:o,tool:l}=r;if(!o.interactive)break;o.selectable&&l.automaticManipulatorSelection&&(o.selected=!o.selected,l.onManipulatorSelectionChanged&&l.onManipulatorSelectionChanged());const d=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:d,stopPropagation:n});break}case"click":{const s=Oe(e),r=this._intersect(s,e.pointerType,t.forEachTool),o=v(r)?r.manipulator:null;if(P(o)||!o.interactive)break;const l=e.native.shiftKey;o.events.emit(e.type,{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l}),n();break}case"double-click":{const s=Oe(e),r=this._intersect(s,e.pointerType,t.forEachTool),o=v(r)?r.manipulator:null;if(P(o)||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:n});break}case"immediate-double-click":{const s=Oe(e),r=this._intersect(s,e.pointerType,t.forEachTool),o=v(r)?r.manipulator:null;if(P(o)||!o.interactive)break;const l=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:n});break}}this._onFocusChange(t.forEachTool)}_ungrabManipulatorBeforeDragging(e,t,n){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:Oe(t)}),this._grabbedManipulators.forEach(({manipulator:s},r)=>{s===e&&this._grabbedManipulators.delete(r)}),this._afterManipulatorUngrab(n.setActiveTool)}_handlePointerEnd(e,t){const n=Pi(this._grabbedManipulators.get(e.pointerId),({manipulator:s})=>s);P(n)||n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Oe(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(t.setActiveTool))}_cursorFromMap(e){let t=null;return Rn(e,({manipulator:n})=>!(P(n)||!n.interactive)&&(n.grabbing&&n.grabCursor?(t=n.grabCursor,!0):!!n.cursor&&(t=n.cursor,!0))),t}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const t=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:s})=>{t.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{n.add(s)}),e(s=>{s.hasGrabbedManipulators=t.has(s),s.hasHoveredManipulators=n.has(s);const r=this._grabbedManipulators.values(),o=ec(r,({tool:l})=>l===s);s.firstGrabbedManipulator=v(o)?o.manipulator:null})}clearPointers(e,{forEachTool:t,setActiveTool:n},s=!0,r){const o=(l,d)=>l===e&&(P(r)||r===d);this._grabbedManipulators.forEach(({tool:l,manipulator:d,pointerType:h},u)=>{o(l,d)&&(this._grabbedManipulators.delete(u),d.grabbing=!1,d.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:h}))}),this._draggedManipulators.forEach(({tool:l,manipulator:d},h)=>{o(l,d)&&(this._draggedManipulators.delete(h),d.dragging=!1,d.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:l,manipulator:d},h)=>{o(l,d)&&(this._hoveredManipulators.delete(h),d.hovering=!1)}),this._afterManipulatorUngrab(n),this._onFocusChange(t)}_intersect(e,t,n){let s=null;return n(r=>{if(r.manipulators==null||!zs(r))return!1;const o=r.manipulators.intersect(e,t);return!P(o)&&(s={tool:r,manipulator:o},!0)}),s}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((t,n)=>{this._updateHoveredStateForPointerAtScreenPosition(me(t.x,t.y),n,t.pointerType,e)})}handleHoverEvent(e,t){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!Oo(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Oe(e),e.pointerId,e.pointerType,t)}_updateHoveredStateForPointerAtScreenPosition(e,t,n,s){let r=this._intersect(e,n,s);const o=Pi(this._hoveredManipulators.get(t),({manipulator:l})=>l);v(r)&&!r.manipulator.interactive&&(r=null),v(r)&&o===r.manipulator||(v(o)&&(o.hovering=!1),v(r)?(r.manipulator.hovering=!0,this._hoveredManipulators.set(t,r)):this._hoveredManipulators.delete(t),this._onFocusChange(s))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function Oo(i){return i==="mouse"}function Vo(i){return i.pointerType!=="mouse"||i.button===0}function $p(i){return!!i.native.shiftKey}const No="attached",gs="tools";let Qe=class extends ba{constructor(e){super(e),this._manipulatorState=new xp,this.tools=new G,this.cursor=null,this._forEachTool=t=>{for(const n of this.tools.items)if(t(n))return}}initialize(){this.handles.add([this.view.on(ll,e=>{this._handleInputEvent(e)},It.TOOL),...Ep(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(v(e)&&!this.view.ready)return void S.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const t=this.activeTool;this._set("activeTool",e),v(t)&&t.deactivate(),v(e)&&e.activate(),this._removeIncompleteTools(e);for(const n of this.tools){this._updateToolEditableFlag(n);const s=zs(n);!P(this.activeTool)&&s||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(t=>t.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){var e;this.view.type==="3d"?(this._set("textures",new Li(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([y(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",t=>this._forEachManipulator(n=>n.onElevationChange(t))),ra(()=>this._set("textures",ae(this.textures)))],No)):this.handles.add(y(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){v(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(No)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))})}_handleInputEvent(e){let t=!1;const n={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};v(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(s=>{!t&&s.visible&&s.handleInputEvent(n)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),!t&&v(this.activeTool)&&this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(gs),this._forEachTool(e=>{if(e instanceof L){const t=y(()=>[e.cursor,e.visible,e.editable],()=>{zs(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(t,gs)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],gs)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var t;(t=e.setEditableFlag)==null||t.call(e,Wi.MANAGER,P(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;P(e)&&this._forEachTool(t=>!(!v(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(P(e)||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}};a([c({constructOnly:!0,nonNullable:!0})],Qe.prototype,"view",void 0),a([c({readOnly:!0,nonNullable:!0})],Qe.prototype,"textures",void 0),a([c({value:null})],Qe.prototype,"activeTool",null),a([c({readOnly:!0,type:G})],Qe.prototype,"tools",void 0),a([c({readOnly:!0})],Qe.prototype,"cursor",void 0),a([c({readOnly:!0})],Qe.prototype,"updating",null),Qe=a([I("esri.views.ToolViewManager")],Qe);const Ap=Qe;let oi=class extends L{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":kp.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Pp[this.deviceType]}};a([c({nonNullable:!0,readOnly:!0})],oi.prototype,"nativeIndex",void 0),a([c({type:String,readOnly:!0})],oi.prototype,"deviceType",null),a([c({type:Number,readOnly:!0})],oi.prototype,"axisThreshold",null),oi=a([I("esri.views.input.gamepad.GamepadInputDevice")],oi);const kp=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Pp={standard:.15,spacemouse:.025,unknown:0},fr=oi;let Di=class extends L{constructor(...e){super(...e),this.devices=new G,this.enabledFocusMode="document"}};a([c({type:G.ofType(fr),readOnly:!0})],Di.prototype,"devices",void 0),a([c({type:["document","view","none"]})],Di.prototype,"enabledFocusMode",void 0),Di=a([I("esri.views.input.gamepad.GamepadSettings")],Di);const Fp=Di;let mn=class extends L{constructor(){super(...arguments),this.gamepad=new Fp}};a([c({readOnly:!0})],mn.prototype,"gamepad",void 0),mn=a([I("esri.views.input.Input")],mn);const Rp=mn;let ft=class extends L{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};a([c({type:Boolean,nonNullable:!0})],ft.prototype,"enabled",void 0),a([c({type:fr})],ft.prototype,"device",void 0),a([c({type:["pan","zoom"],nonNullable:!0})],ft.prototype,"mode",void 0),a([c({type:["forward-down","forward-up"],nonNullable:!0})],ft.prototype,"tiltDirection",void 0),a([c({type:Number,nonNullable:!0})],ft.prototype,"velocityFactor",void 0),ft=a([I("esri.views.navigation.gamepad.GamepadSettings")],ft);const ul=ft;let Rt=class extends L{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new ul,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};a([c({type:Boolean})],Rt.prototype,"browserTouchPanEnabled",void 0),a([c({type:ul,nonNullable:!0})],Rt.prototype,"gamepad",void 0),a([c({type:Boolean})],Rt.prototype,"momentumEnabled",void 0),a([c({type:Boolean})],Rt.prototype,"mouseWheelZoomEnabled",void 0),Rt=a([I("esri.views.navigation.Navigation")],Rt);const pl=Rt;var zo;function Sp(i){var n;const e=i.url?wd(i.url):void 0;return!(((n=i.spatialReference)==null?void 0:n.vcsWkid)==null&&v(e)&&e.serverType==="ImageServer")&&ml(i)&&i.heightModelInfo?i.heightModelInfo:Lp(i)?sr.deriveUnitFromSR(Op,i.spatialReference):null}function ml(i){return"heightModelInfo"in i}function gl(i){if(i.type==="unknown"||!("capabilities"in i))return!1;switch(i.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Lp(i){return gl(i)?!!(i.capabilities&&i.capabilities.data&&i.capabilities.data.supportsZ):fl(i)}function Dp(i){return i.layers!=null||fl(i)||gl(i)||ml(i)}function fl(i){switch(i.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(i){i[i.Ok=0]="Ok",i[i.Units=1]="Units",i[i.HeightModel=2]="HeightModel",i[i.CRS=3]="CRS",i[i.Unsupported=4]="Unsupported"})(zo||(zo={}));const Op=new sr({heightModel:"gravity-related-height"});let Bs,fs=null;async function Vp(i){fs||(fs=w(()=>import("./geometryServiceUtils-c8cc6c0d.js"),["./geometryServiceUtils-c8cc6c0d.js","./Error-9392329b.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./Portal-fe1a007c.js","./preload-helper-41c905a7.js","./cast-4d1aa82d.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./request-16c6134d.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./Extent-52b65909.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js"],import.meta.url).then(e=>Bs=e)),await fs,nt(i)}async function _l(i,e,t,n){if(!i)return null;const s=i.spatialReference;return Hi()||Dn(s,e)?Gi(i,e):Bs?Bs.projectGeometry(i,e,t,n):(await Promise.race([Vp(n),On(n)]),_l(i,e,t,n))}let B=class extends L{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=$s(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return v(this.userSpatialReference)?this.userSpatialReference:Ie(this._spatialReferenceTask.spatialReference)}get extent(){return Ie(this._extentTask.extent)}get heightModelInfo(){return Ie(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return Ie(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return Ie(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return P(this.userSpatialReference)||this.userSpatialReference.equals(Ie(this._spatialReferenceTask.spatialReference))?Ie(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return Ie(this._tileInfoTask.tileInfo)}get mapCollections(){var n,s,r,o;const e=(n=this.map)==null?void 0:n.call(this),t=[];return v(this.priorityCollection)&&t.push(this.priorityCollection),t.push({parent:e==null?void 0:e.basemap,layers:(s=e==null?void 0:e.basemap)==null?void 0:s.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(r=e==null?void 0:e.ground)==null?void 0:r.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;let n=null;for(const r of e){const o=this._getSupportedSpatialReferences(r);if(o.length>0){const l=this._narrowDownSpatialReferenceCandidates(n,o);v(l)&&(n=l)}if(v(n)&&n.length===1)break}if(t&&(P(n)||n.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(n);return{spatialReference:v(s)?s.spatialReference:null,viewingMode:v(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){var n,s,r,o,l,d,h;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:t}=this._collectLayers([{parent:(s=(n=this.map)==null?void 0:n.call(this))==null?void 0:s.basemap,layers:(l=(o=(r=this.map)==null?void 0:r.call(this))==null?void 0:o.basemap)==null?void 0:l.baseLayers},{layers:(h=(d=this.map)==null?void 0:d.call(this))==null?void 0:h.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const u=e[0].tileInfo;return{tileInfo:u&&u.spatialReference.equals(this.spatialReference)?u:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){var n,s,r;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:t}=this._allLayers;for(const o of e)if(Dp(o)){const l=Sp(o);if(l)return{heightModelInfo:l,vcsWkid:(s=o.spatialReference)==null?void 0:s.vcsWkid,latestVcsWkid:(r=o.spatialReference)==null?void 0:r.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,t=e.updating,n=[];for(const s of e.layers){const r="fullExtents"in s&&s.fullExtents||(v(s.fullExtent)?[s.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:r[0],l=r.find(d=>d.spatialReference.equals(this.spatialReference))??o;if(l)return{candidates:[{extent:l,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const d of r)n.push({extent:d,layer:s})}return{candidates:n,updating:t}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(P(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(e),s=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:v(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(v(this._projectExtentTask.task)&&(this._projectExtentTask.task=$s(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:s.clone(),task:Pa(async r=>{try{const o=await _l(n.extent,s,n.layer.portalItem,r);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ac(r))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(P(e))return t;const n=[],s=(r,o)=>v(r)?v(o)?r===o&&r:r:o;for(const r of e)for(const o of t){if(!r.spatialReference.equals(o.spatialReference))continue;const l=s(r.viewingMode,o.viewingMode);if(l!==!1){n.push({spatialReference:r.spatialReference,viewingMode:l});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return P(e)||e.length<1?v(t)?{spatialReference:t,viewingMode:null}:null:(v(t)&&e.length>1&&e.some(({spatialReference:n})=>n.equals(t))&&(e=e.filter(({spatialReference:n})=>n.equals(t))),e.length>1&&e.some(({viewingMode:n})=>n!==Nr.Local)&&(e=e.filter(({viewingMode:n})=>n!==Nr.Local)),e[0])}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const n=[];for(const s of t){const r=this.getSpatialReferenceSupport({spatialReference:s,layer:e});if(v(r)){const o=v(r.constraints)?r.constraints:[{spatialReference:s,viewingMode:null}];for(const{spatialReference:l,viewingMode:d}of o)(!this.requiresExtentInSpatialReference||P(this.userSpatialReference)||l.equals(this.userSpatialReference))&&n.push({spatialReference:l,viewingMode:d})}}return n}_pickExtentCandidate(e){const t=this.spatialReference;return e.find(({extent:n})=>t.equals(n.spatialReference))||e[0]}_collectLayers(e){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return{layers:[],updating:!0};const t={layers:[],preloading:-1,updating:!1};for(const s of e)if(this._collectCollection(s,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};a([c()],B.prototype,"required",void 0),a([c({constructOnly:!0})],B.prototype,"map",void 0),a([c({constructOnly:!0})],B.prototype,"getSpatialReferenceSupport",void 0),a([c()],B.prototype,"defaultSpatialReference",void 0),a([c()],B.prototype,"userSpatialReference",void 0),a([c()],B.prototype,"sourcePreloadCount",void 0),a([c()],B.prototype,"priorityCollection",void 0),a([c()],B.prototype,"requiresExtentInSpatialReference",void 0),a([c()],B.prototype,"suspended",void 0),a([c({readOnly:!0})],B.prototype,"ready",null),a([c({readOnly:!0})],B.prototype,"heightModelInfoReady",null),a([c({readOnly:!0})],B.prototype,"spatialReference",null),a([c({readOnly:!0})],B.prototype,"extent",null),a([c({readOnly:!0})],B.prototype,"heightModelInfo",null),a([c({readOnly:!0})],B.prototype,"vcsWkid",null),a([c({readOnly:!0})],B.prototype,"latestVcsWkid",null),a([c({readOnly:!0})],B.prototype,"viewingMode",null),a([c({readOnly:!0})],B.prototype,"tileInfo",null),a([c({readOnly:!0})],B.prototype,"mapCollections",null),a([c({readOnly:!0})],B.prototype,"_allLayers",null),a([c({readOnly:!0})],B.prototype,"_spatialReferenceTask",null),a([c({readOnly:!0})],B.prototype,"_tileInfoTask",null),a([c({readOnly:!0})],B.prototype,"_heightModelInfoTask",null),a([c({readOnly:!0})],B.prototype,"_extentCandidatesTask",null),a([c()],B.prototype,"_extentTask",null),a([c()],B.prototype,"_projectExtentTask",void 0),B=a([I("esri.views.support.DefaultsFromMap")],B);var gn;let A=gn=class extends Vn(Ln.EventedMixin(_d(L))){constructor(i){super(i),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new bn({getCollections:()=>{var e,t,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(t=this.groundView)==null?void 0:t.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new Fa,this.analyses=new Pn,this.typeSpecificPreconditionsReady=!0,this.layerViews=new G,this.magnifier=new al,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new Ra,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new Rp,this.navigation=new pl,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Cp(this),this.persistableViewModels=new G,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(y(()=>this.preconditionsReady,e=>{var t,n;e?(this._currentSpatialReference=this.spatialReference,gn.views.add(this)):(this._currentSpatialReference=null,gn.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((t=this.toolViewManager)==null||t.detach(),v(this.analysisViewManager)&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown()):e&&!this.ready&&(this._startup(),v(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},qi))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,er(()=>this.ready)))),this.basemapView=new gt({view:this}),this.layerViewManager=new bp({view:this,layerViewImporter:{importLayerView:i=>this.importLayerView(i),hasLayerViewModule:i=>this.hasLayerViewModule(i)},supportsGround:this.supportsGround}),this.toolViewManager=new Ap({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([y(()=>this.initialExtentRequired,i=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:i},{sync:!0,initial:!0}),y(()=>this.ready,i=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=i,this.defaultsFromMap.userSpatialReference=i?this.spatialReference:this._userSpatialReference)},{sync:!0}),y(()=>this._userSpatialReference,i=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=i)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let i=null;this.handles.add([y(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var n;const t=((n=this.map)==null?void 0:n.allLayers.length)>0;if(e&&!this.spatialReference&&t){if(v(i))return;const s=ra(()=>i=$s(i));i=Pa(async r=>{try{await Xs(this.spatialReferenceWarningDelay,null,r)}catch{return}finally{i=null}S.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(s,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=ae(this.graphics),this.analyses=ae(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),ae(this.analysisViewManager),this.toolViewManager=ae(this.toolViewManager),this.layerViewManager=ae(this.layerViewManager),this.basemapView=ae(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const i=this.map;this.map=null,i==null||i.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return S.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var i;return(i=this.toolViewManager)==null?void 0:i.activeTool}set activeTool(i){this.toolViewManager&&(this.toolViewManager.activeTool=i)}get animation(){return this._get("animation")}set animation(i){this._set("animation",i)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new B({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:i=>this.getSpatialReferenceSupport(i),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(i){this._set("extent",i)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var i;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||xs.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((i=this.defaultsFromMap)!=null&&i.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(i){i!==this._get("map")&&(i!=null&&i.destroyed&&(S.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:i}),i=null),xs.isLoadable(i)&&i.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",i))}get spatialReference(){var e,t;let i=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return i&&((t=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&t.heightModelInfo)&&(i=i.clone(),i.vcsWkid=this.defaultsFromMap.vcsWkid,i.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),i}set spatialReference(i){const e=!Sn(i,this._get("spatialReference"));this._set("_userSpatialReference",i),e&&(this._set("spatialReference",i),this._spatialReferenceChanged(i))}_spatialReferenceChanged(i){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var i;return(i=this.toolViewManager)==null?void 0:i.tools}get initialExtent(){var i;return(i=this.defaultsFromMap)==null?void 0:i.extent}get cursor(){const i=this.toolViewManager?this.toolViewManager.cursor:null;return v(i)?i:this._cursor||"default"}set cursor(i){this._cursor=i,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(i){return this.layerViewManager.whenLayerView(i)}getDefaultSpatialReference(){var i;return(i=this.defaultsFromMap)==null?void 0:i.spatialReference}getDefaultHeightModelInfo(){var i;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((i=this.defaultsFromMap)==null?void 0:i.heightModelInfo)??null}importLayerView(i){throw new $("importLayerView() not implemented")}hasLayerViewModule(i){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(i){return v(this.getSpatialReferenceSupport({spatialReference:i}))}when(i,e){return this.isResolved()&&!this.ready&&S.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(i,e)}forceReadyCycle(){this.ready&&(ot(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(i){this.toolViewManager.tools.add(i),this.activeTool=i}tryFatalErrorRecovery(){this.fatalError=null}};A.views=new G,a([c()],A.prototype,"_userSpatialReference",void 0),a([c()],A.prototype,"activeTool",null),a([c({readOnly:!0})],A.prototype,"allLayerViews",void 0),a([c()],A.prototype,"groundView",void 0),a([c()],A.prototype,"animation",null),a([c()],A.prototype,"basemapView",void 0),a([c()],A.prototype,"center",null),a([c({readOnly:!0})],A.prototype,"_defaultsFromMapSettings",null),a([c()],A.prototype,"defaultsFromMap",null),a([c()],A.prototype,"fatalError",void 0),a([c({type:vi})],A.prototype,"extent",null),a([c(Vr(Fa,"graphics"))],A.prototype,"graphics",void 0),a([c(Vr(Pn,"analyses"))],A.prototype,"analyses",void 0),a([c({readOnly:!0,type:sr})],A.prototype,"heightModelInfo",null),a([c({readOnly:!0})],A.prototype,"interacting",null),a([c({readOnly:!0})],A.prototype,"navigating",null),a([c({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],A.prototype,"preconditionsReady",null),a([c({readOnly:!0})],A.prototype,"typeSpecificPreconditionsReady",void 0),a([c({type:G,readOnly:!0})],A.prototype,"layerViews",void 0),a([c()],A.prototype,"resolution",null),a([c({type:al})],A.prototype,"magnifier",void 0),a([c({value:null,type:La})],A.prototype,"map",null),a([c()],A.prototype,"padding",void 0),a([c({readOnly:!0})],A.prototype,"ready",void 0),a([c({type:Js})],A.prototype,"spatialReference",null),a([c()],A.prototype,"spatialReferenceWarningDelay",void 0),a([c()],A.prototype,"stationary",null),a([c({readOnly:!0})],A.prototype,"supportsGround",void 0),a([c({type:gd})],A.prototype,"timeExtent",void 0),a([c({type:Ra,nonNullable:!0})],A.prototype,"timeReference",void 0),a([c()],A.prototype,"tools",null),a([c()],A.prototype,"toolViewManager",void 0),a([c({readOnly:!0})],A.prototype,"type",void 0),a([c({type:Number})],A.prototype,"scale",void 0),a([c({readOnly:!0})],A.prototype,"updating",void 0),a([c({readOnly:!0})],A.prototype,"initialExtentRequired",void 0),a([c({readOnly:!0})],A.prototype,"initialExtent",null),a([c()],A.prototype,"cursor",null),a([c({readOnly:!0})],A.prototype,"input",void 0),a([c({type:pl,nonNullable:!0})],A.prototype,"navigation",void 0),a([c()],A.prototype,"layerViewManager",void 0),a([c()],A.prototype,"analysisViewManager",void 0),a([c()],A.prototype,"width",void 0),a([c()],A.prototype,"height",void 0),a([c({readOnly:!0})],A.prototype,"resizing",void 0),a([c({value:null,readOnly:!0})],A.prototype,"size",null),a([c({readOnly:!0})],A.prototype,"suspended",void 0),a([c({readOnly:!0})],A.prototype,"viewEvents",void 0),a([c({readOnly:!0})],A.prototype,"persistableViewModels",void 0),a([c()],A.prototype,"_isValid",void 0),a([c()],A.prototype,"_readyCycleForced",void 0),a([c()],A.prototype,"_currentSpatialReference",void 0),A=gn=a([I("esri.views.View")],A);const Np=A;let _t=class extends yd{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new $("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,t){t||(t=lc(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};a([c({readOnly:!0})],_t.prototype,"done",null),a([c({readOnly:!0,type:String})],_t.prototype,"state",void 0),a([c()],_t.prototype,"target",void 0),_t=a([I("esri.views.ViewAnimation")],_t),function(i){i.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(_t||(_t={}));const qs=_t;function Ct(){return[1,0,0,1,0,0]}function zp(i){return[i[0],i[1],i[2],i[3],i[4],i[5]]}function Bp(i,e,t,n,s,r){return[i,e,t,n,s,r]}function qp(i,e){return new Float64Array(i,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:zp,create:Ct,createView:qp,fromValues:Bp},Symbol.toStringTag,{value:"Module"}));const yl=96,vl=39.37,Hp=180/Math.PI;function wl(i){return i.wkid?i:i.spatialReference||Js.WGS84}function _r(i,e){return e.type?re(i,e.x,e.y):Tn(i,e)}function bl(i){return hc(i)}function Bi(i,e){const t=Math.max(1,e[0]),n=Math.max(1,e[1]);return Math.max(i.width/t,i.height/n)*Xp(i.spatialReference)}async function Oi(i,e,t,n){let s,r;if(!i||Array.isArray(i)&&!i.length)return null;if(G.isCollection(i)&&(i=i.toArray()),Array.isArray(i)&&i.length&&typeof i[0]=="object"){const l=i.every(u=>"attributes"in u),d=i.some(u=>!u.geometry);let h=i;if(l&&d&&e&&e.allLayerViews){const u=new Map;for(const b of i){const C=b.layer,T=u.get(C)||[],F=b.attributes[C.objectIdField];F!=null&&T.push(F),u.set(C,T)}const p=[];u.forEach((b,C)=>{const T=e.allLayerViews.find(F=>F.layer.id===C.id);if(T&&"queryFeatures"in T){const F=C.createQuery();F.objectIds=b,F.returnGeometry=!0,p.push(T.queryFeatures(F))}});const g=await Promise.all(p),f=[];for(const b of g)if(b&&b.features&&b.features.length)for(const C of b.features)v(C.geometry)&&f.push(C.geometry);h=f}for(const u of h)n=await Oi(u,e,t,n);return n}if(Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number")s=new X(i);else if(i instanceof uc)s=i;else if("geometry"in i){if(i.geometry)s=i.geometry;else if(i.layer){const l=i.layer,d=e.allLayerViews.find(h=>h.layer.id===l.id);if(d&&"queryFeatures"in d){const h=l.createQuery();h.objectIds=[i.attributes[l.objectIdField]],h.returnGeometry=!0;const u=await d.queryFeatures(h);s=vc(u,"features",0,"geometry")}}}if(P(s)||(r=s.type==="point"?new vi({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!r))return null;Hi()||Dn(r.spatialReference,t)||await On();const o=Gi(r,t);return o?n=n?n.union(o):o:null}function Up(i){if(i&&(!Array.isArray(i)||typeof i[0]!="number")&&(typeof i=="object"||Array.isArray(i)&&typeof i[0]=="object")){if("layer"in i&&i.layer&&i.layer.minScale&&i.layer.maxScale){const e=i.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(i)&&i.length&&i.every(e=>"layer"in e)){let e=0,t=0;for(const n of i){const s=n.layer;s&&s.minScale&&s.maxScale&&(e=s.minScale<e?s.minScale:e,t=s.maxScale>t?s.maxScale:t)}return e&&t?{min:e,max:t}:null}}}function _s(i,e){return Sn(wl(i),e)?i:Gi(i,e)}async function Wp(i,e){if(!i||!e)return new He({targetGeometry:new X,scale:0,rotation:0});let t=e.spatialReference;const{constraints:n,padding:s,viewpoint:r,size:o}=e,l=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let d=null;i instanceof He?d=i:i.viewpoint?d=i.viewpoint:i.target&&i.target.declaredClass==="esri.Viewpoint"&&(d=i.target);let h=null;d&&d.targetGeometry?h=d.targetGeometry:i instanceof vi?h=i:(i||i&&("center"in i||"extent"in i||"target"in i))&&(h=await Oi(i.center,e,t)||await Oi(i.extent,e,t)||await Oi(i.target,e,t)||await Oi(i,e,t)),!h&&r&&r.targetGeometry?h=r.targetGeometry:!h&&e.extent&&(h=e.extent),t||(t=wl(e.spatialReference||e.extent||h)),Hi()||Sn(h.spatialReference,t)||Dn(h,t)||await On();const u=_s(h.center?h.center:h,t);let p=0;if(d&&v(d.targetGeometry)&&d.targetGeometry.type==="point")p=d.scale;else if("scale"in i&&i.scale)p=i.scale;else if("zoom"in i&&i.zoom!==-1&&n&&n.effectiveLODs)p=n.zoomToScale(i.zoom);else if(Array.isArray(h)||h.type==="point"||h.type==="extent"&&h.width===0&&h.height===0){const C=_s(e.extent,t);p=v(C)?Bi(C,l):e.extent?Bi(e.extent,l):r.scale}else p=Bi(_s(h.extent,t),l);const g=Up(i);g&&(g.min&&g.min>p?p=g.min:g.max&&g.max<p&&(p=g.max));let f=0;d?f=d.rotation:i.hasOwnProperty("rotation")?f=i.rotation:r&&(f=r.rotation);let b=new He({targetGeometry:u,scale:p,rotation:f});return n&&(b=n.fit(b),n.constrainByGeometry(b),n.rotationEnabled||(b.rotation=f)),b}function Fe(i,e){const t=i.targetGeometry,n=e.targetGeometry;return t.x=n.x,t.y=n.y,t.spatialReference=n.spatialReference,i.scale=e.scale,i.rotation=e.rotation,i}function jp(i,e,t){return t?re(i,.5*(e[0]-t.right+t.left),.5*(e[1]-t.bottom+t.top)):Nn(i,e,.5)}const Gp=function(){const i=te();return function(e,t,n){const s=t.targetGeometry;_r(i,s);const r=.5*wi(t);return e.xmin=i[0]-r*n[0],e.ymin=i[1]-r*n[1],e.xmax=i[0]+r*n[0],e.ymax=i[1]+r*n[1],e.spatialReference=s.spatialReference,e}}();function Zp(i,e,t,n,s){return Hs(i,e,t.center),i.scale=Bi(t,n),s&&s.constraints&&s.constraints.constrain(i),i}function Kp(i,e,t,n){return wr(i,e,t,n),ka(i,i)}const Ml=function(){const i=te();return function(e,t,n){return Sa(e,Jp(e,t),jp(i,t,n))}}(),Yp=function(){const i=Ct(),e=te();return function(t,n,s,r){const o=wi(n),l=yr(n);return re(e,o,o),dd(i,e),nr(i,i,l),Cn(i,i,Ml(e,s,r)),Cn(i,i,[0,r.top-r.bottom]),re(t,i[4],i[5])}}();function wi(i){return i.scale*Qp(i.targetGeometry)}function Qp(i){return v(i)&&ua(i.spatialReference)?1/(bl(i.spatialReference)*vl*yl):1}function yr(i){return fa(i.rotation)||0}function Xp(i){return ua(i)?bl(i)*vl*yl:1}function Jp(i,e){return Nn(i,e,.5)}const vr=function(){const i=te(),e=te(),t=te();return function(n,s,r,o,l,d){return Cd(i,s),Nn(e,r,.5*d),re(t,1/o*d,-1/o*d),Aa(n,e),l&&nr(n,n,l),$a(n,n,t),Cn(n,n,i),n}}(),wr=function(){const i=te();return function(e,t,n,s){const r=wi(t),o=yr(t);return _r(i,t.targetGeometry),vr(e,i,n,r,o,s)}}(),em=function(){const i=te();return function(e,t,n,s){const r=wi(t);return _r(i,t.targetGeometry),vr(e,i,n,r,0,s)}}();function tm(i){const e=pc(i);return e?e.valid[1]-e.valid[0]:0}function im(i,e){return Math.round(tm(i)/e)}const nm=function(){const i=te(),e=te(),t=[0,0,0];return function(n,s,r){Fs(i,n,s),zr(i,i),Fs(e,n,r),zr(e,e),Md(t,i,e);let o=Math.acos(Id(i,e)/(Br(i)*Br(e)))*Hp;return t[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),sm=function(){const i=te();return function(e,t,n,s){const r=e.targetGeometry;return Fe(e,t),Yp(i,t,n,s),r.x+=i[0],r.y+=i[1],e}}(),Hs=function(i,e,t){Fe(i,e);const n=i.targetGeometry;return n.x=t.x,n.y=t.y,n.spatialReference=t.spatialReference,i},rm=function(){const i=te();return function(e,t,n,s,r){r||(r="center"),Sa(i,n,s),Nn(i,i,.5);const o=i[0],l=i[1];switch(r){case"center":re(i,0,0);break;case"left":re(i,-o,0);break;case"top":re(i,0,l);break;case"right":re(i,o,0);break;case"bottom":re(i,0,-l);break;case"top-left":re(i,-o,l);break;case"bottom-left":re(i,-o,-l);break;case"top-right":re(i,o,l);break;case"bottom-right":re(i,o,-l)}return Un(e,t,i),e}}();function dy(i,e,t){return Fe(i,e),i.rotation+=t,i}function om(i,e,t){return Fe(i,e),i.rotation=t,i}const am=function(){const i=te();return function(e,t,n,s,r){return Fe(e,t),isNaN(n)||n===0||(Cl(i,s,t,r),e.scale=t.scale*n,Tl(i,i,e,r),Un(e,e,re(i,i[0]-s[0],s[1]-i[1]))),e}}();function Bo(i,e,t){return Fe(i,e),i.scale=t,i}const Il=function(){const i=te();return function(e,t,n,s,r,o){return Fe(e,t),isNaN(n)||n===0||(Cl(i,r,t,o),e.scale=t.scale*n,e.rotation+=s,Tl(i,i,e,o),Un(e,e,re(i,i[0]-r[0],r[1]-i[1]))),e}}(),hy=function(){const i=te(),e=te();return function(t,n,s,r,o,l,d){return Ml(e,l,d),Td(i,o,e),r?Il(t,n,s,r,i,l):am(t,n,s,i,l)}}(),Cl=function(){const i=Ct();return function(e,t,n,s){return et(e,t,Kp(i,n,s,1))}}(),Tl=function(){const i=Ct();return function(e,t,n,s){return et(e,t,wr(i,n,s,1))}}(),Un=function(){const i=te(),e=Ct();return function(t,n,s){Fe(t,n);const r=wi(n),o=t.targetGeometry;return cd(e,yr(n)),$a(e,e,xd(r,r)),et(i,s,e),o.x+=i[0],o.y+=i[1],t}}();let lm=class{constructor(e,t,n,s){const r=e.targetGeometry,o=t.targetGeometry;s?typeof s=="string"&&(s=bd(s)||Ps.ease):s=Ps.ease,this.easing=s,this.duration=n,this.sCenterX=r.x,this.sCenterY=r.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=t.scale,this.tRotation=t.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,t){const n=this.easing(t);let s,r,o,l;t>=1?(s=this.tCenterX,r=this.tCenterY,o=this.tRotation,l=this.tScale):(s=this.sCenterX+n*this.dCenterX,r=this.sCenterY+n*this.dCenterY,o=this.sRotation+n*this.dRotation,l=this.sScale+n*this.dScale),e.targetGeometry.x=s,e.targetGeometry.y=r,e.scale=l,e.rotation=o}},Xe=class extends L{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=Ps.ease,this.view=null,this.viewpoint=new He({targetGeometry:new X,scale:0,rotation:0}),this._updateTask=fi({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=rt(this._updateTask)}animate(e,t,n){this.stop();const s=this.viewpoint;Fe(s,t),this.transition=new lm(this.viewpoint,e.target,n&&n.duration||this.duration,n&&n.easing||this.easing);const r=()=>{var o,l;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(l=this.view)!=null&&l.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const n=new qs({target:e.clone()}),s=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var n,s;const t=this.animation;if(t&&t.state!==qs.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=this.transition,o=(performance.now()-this._startTime)/r.duration,l=o>=1;r.applyRatio(this.viewpoint,o),l&&((n=this.animation)==null||n.finish())}(s=this.view)!=null&&s.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};a([c()],Xe.prototype,"animation",void 0),a([c()],Xe.prototype,"duration",void 0),a([c()],Xe.prototype,"transition",void 0),a([c()],Xe.prototype,"easing",void 0),a([c()],Xe.prototype,"view",void 0),a([c()],Xe.prototype,"viewpoint",void 0),Xe=a([I("esri.views.2d.AnimationManager")],Xe);const cm=Xe;let dm=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var l;this._updateRequested=!1;const{basemapView:t,graphicsView:n,labelManager:s,layerViews:r,state:{id:o}}=this.view;t==null||t.baseLayerViews.forEach(this._updateLayerView,this),r.forEach(this._updateLayerView,this),t==null||t.referenceLayerViews.forEach(this._updateLayerView,this),v(s)&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),v(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((l=this._frameTaskHandle)==null||l.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=y(()=>e.stationary,t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=fi(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const t=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),n!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function Y(){return Promise.all([w(()=>import("./webglDeps-b5b07d1b.js"),["./webglDeps-b5b07d1b.js","./VertexArrayObject-2b4e90de.js","./Error-9392329b.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./ProgramTemplate-b518276b.js","./programUtils-aa53d847.js","./NestedMap-1b5db22e.js"],import.meta.url),w(()=>import("./mapViewDeps-2a907b4c.js"),["./mapViewDeps-2a907b4c.js","./Error-9392329b.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./promiseUtils-3ce2a460.js","./cast-4d1aa82d.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./mat3f32-6c416b1c.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./MagnifierPrograms-8dd46823.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-12d66f96.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./screenUtils-7afeb41c.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./colorUtils-639f4d25.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./reactiveUtils-989a8d7f.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./Extent-52b65909.js","./aaBoundingRect-062d7c89.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./ExpandedCIM-23a9d4d0.js","./fieldUtils-c41301b0.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rasterizingUtils-70e51e90.js","./pbf-9196f6ce.js","./imageutils-47b76771.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./enumeration-de0a766e.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./assets-86d142ff.js","./defaultsJSON-b087dd4d.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./persistableUrlUtils-abff3ce1.js","./styleUtils-6ef1c49e.js","./CircularArray-040b84c7.js","./webgl-debug-b1f7a2c5.js","./HandleOwner-1ffa4597.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./lengthUtils-320ae102.js","./sizeVariableUtils-d4870b0d.js","./BufferPool-eeecbea6.js","./enums-fb086c25.js","./programUtils-aa53d847.js","./NestedMap-1b5db22e.js","./RenderingContext-075c3eb6.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./mat3-5b850236.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-c3e93aa6.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./SimpleObservable-7e8b69a3.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./opacityUtils-a1e441cd.js","./Collection-54857936.js","./collectionUtils-cc5781ab.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./jsonUtils-dfa282b7.js","./AttributeStoreView-dcb739c3.js","./TiledDisplayObject-76821229.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./Identifiable-a49d7533.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./Graphic-b6696507.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./normalizeUtils-08ce1e14.js","./GraphicContainer-3637f3e4.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./TileContainer-04cf618b.js","./vec3f32-ad1dc57f.js","./asyncUtils-d59cad3c.js","./requestImageUtils-fb316d8d.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)])}const xi=()=>Y().then(()=>w(()=>import("./TileLayerView2D-fa9aec26.js"),["./TileLayerView2D-fa9aec26.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./Extent-52b65909.js","./GraphicsCollection-6cd24d14.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./HandleOwner-1ffa4597.js","./MagnifierPrograms-8dd46823.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rasterizingUtils-70e51e90.js","./pbf-9196f6ce.js","./imageutils-47b76771.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./assets-86d142ff.js","./defaultsJSON-b087dd4d.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./CircularArray-040b84c7.js","./webgl-debug-b1f7a2c5.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./lengthUtils-320ae102.js","./sizeVariableUtils-d4870b0d.js","./BufferPool-eeecbea6.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-c3e93aa6.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./jsonUtils-dfa282b7.js","./AttributeStoreView-dcb739c3.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./normalizeUtils-08ce1e14.js","./vec3f32-ad1dc57f.js","./asyncUtils-d59cad3c.js","./imageUtils-06c8d7d5.js","./BitmapTileContainer-49487a9f.js","./Bitmap-044822eb.js","./TileContainer-04cf618b.js","./LayerView-f4777136.js","./HighlightGraphicContainer-1485a784.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./RefreshableLayerView-d6853579.js","./drapedUtils-89347add.js","./scaleUtils-8911ddd5.js","./floorFilterUtils-080a7cd2.js","./sublayerUtils-5d4d0ee3.js","./popupUtils-4db6471b.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),Jt=()=>Y().then(()=>w(()=>import("./FeatureLayerView2D-0925c787.js"),["./FeatureLayerView2D-0925c787.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./TimeExtent-0fb637c6.js","./Query-8c2b9d22.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./FeatureSet-a47eef0a.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./enums-b1d611e3.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./utils-45a97d77.js","./MaterialKey-8f458904.js","./visualVariablesUtils-904a1f06.js","./createSymbolSchema-8b7065b5.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-062d7c89.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./vec2-3a431caf.js","./vec2f32-eaf29605.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./util-54b675a7.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./workers-9e1006b9.js","./Connection-da262054.js","./assets-86d142ff.js","./intl-45f8f1a9.js","./messages-57170cca.js","./floorFilterUtils-080a7cd2.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./TileStrategy-cb3a7d25.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),qo={"base-dynamic":()=>Y().then(()=>w(()=>import("./BaseDynamicLayerView2D-e391fb27.js"),["./BaseDynamicLayerView2D-e391fb27.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./BitmapContainer-8540a11b.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./screenUtils-7afeb41c.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./colorUtils-639f4d25.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./reactiveUtils-989a8d7f.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./Extent-52b65909.js","./aaBoundingRect-062d7c89.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./Collection-54857936.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./ExportStrategy-8b65928f.js","./TileInfo-3f2956cd.js","./Bitmap-044822eb.js","./mat3-5b850236.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./enumeration-de0a766e.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./preload-helper-41c905a7.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./request-16c6134d.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./opacityUtils-a1e441cd.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./fieldUtils-c41301b0.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./persistableUrlUtils-abff3ce1.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./TileStrategy-cb3a7d25.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"base-tile":xi,"bing-maps":xi,csv:Jt,"geo-rss":()=>Y().then(()=>w(()=>import("./GeoRSSLayerView2D-4af6fa09.js"),["./GeoRSSLayerView2D-4af6fa09.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./Extent-52b65909.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./geometry-8c15a791.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./reactiveUtils-989a8d7f.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./jsonUtils-e2434b33.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./FeatureSet-a47eef0a.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./LayerView-f4777136.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./HandleOwner-1ffa4597.js","./GraphicContainer-3637f3e4.js","./enums-b1d611e3.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./Queue-4939205d.js","./AttributeStoreView-dcb739c3.js","./mat2d-795519e1.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./visualVariablesUtils-904a1f06.js","./VertexArrayObject-2b4e90de.js","./TileContainer-04cf618b.js","./WGLContainer-12d66f96.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./capabilities-55572a33.js","./vec3f32-ad1dc57f.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./devEnvironmentUtils-5002a058.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),feature:Jt,geojson:Jt,graphics:()=>Y().then(()=>w(()=>import("./GraphicsLayerView2D-79dc67b5.js"),["./GraphicsLayerView2D-79dc67b5.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./LayerView-f4777136.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./HandleOwner-1ffa4597.js","./GraphicContainer-3637f3e4.js","./enums-b1d611e3.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./Queue-4939205d.js","./AttributeStoreView-dcb739c3.js","./mat2d-795519e1.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./visualVariablesUtils-904a1f06.js","./VertexArrayObject-2b4e90de.js","./TileContainer-04cf618b.js","./WGLContainer-12d66f96.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./lengthUtils-320ae102.js","./capabilities-55572a33.js","./vec3f32-ad1dc57f.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./defaultsJSON-b087dd4d.js","./jsonUtils-dfa282b7.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),group:()=>Y().then(()=>w(()=>import("./GroupLayerView2D-60436866.js"),["./GroupLayerView2D-60436866.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./GroupContainer-5bf4522c.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./screenUtils-7afeb41c.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./colorUtils-639f4d25.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./reactiveUtils-989a8d7f.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./Extent-52b65909.js","./aaBoundingRect-062d7c89.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./Collection-54857936.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./Basemap-5520ad34.js","./preload-helper-41c905a7.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./request-16c6134d.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./enumeration-de0a766e.js","./opacityUtils-a1e441cd.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./fieldUtils-c41301b0.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./persistableUrlUtils-abff3ce1.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./Queue-4939205d.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./mat3-5b850236.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),imagery:()=>Y().then(()=>w(()=>import("./ImageryLayerView2D-5123dff8.js"),["./ImageryLayerView2D-5123dff8.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./GraphicsCollection-6cd24d14.js","./HandleOwner-1ffa4597.js","./RasterVFDisplayObject-092dfa30.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-712d153e.js","./mat3f32-6c416b1c.js","./WGLContainer-12d66f96.js","./definitions-19bfb61c.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./mat3-5b850236.js","./LayerView-f4777136.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./defaultsJSON-b087dd4d.js","./jsonUtils-dfa282b7.js","./AttributeStoreView-dcb739c3.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./normalizeUtils-08ce1e14.js","./HighlightGraphicContainer-1485a784.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./TileContainer-04cf618b.js","./vec3f32-ad1dc57f.js","./BitmapContainer-8540a11b.js","./Bitmap-044822eb.js","./ExportStrategy-8b65928f.js","./TileInfo-3f2956cd.js","./rasterProjectionHelper-2f2082da.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"imagery-tile":()=>Y().then(()=>w(()=>import("./ImageryTileLayerView2D-4b282cc3.js"),["./ImageryTileLayerView2D-4b282cc3.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./multidimensionalUtils-ba984035.js","./RasterVFDisplayObject-092dfa30.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-712d153e.js","./mat3f32-6c416b1c.js","./WGLContainer-12d66f96.js","./definitions-19bfb61c.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./mat3-5b850236.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./rasterUtils-699bb000.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./TileContainer-04cf618b.js","./TileInfo-3f2956cd.js","./RawBlockCache-58aecfea.js","./rasterProjectionHelper-2f2082da.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./capabilities-55572a33.js","./util-54b675a7.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./lengthUtils-320ae102.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./deprecate-0efb6d09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),kml:()=>Y().then(()=>w(()=>import("./KMLLayerView2D-75152341.js"),["./KMLLayerView2D-75152341.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./reactiveUtils-989a8d7f.js","./Extent-52b65909.js","./projection-03688518.js","./mathUtils-505ef34b.js","./mat4-63147b80.js","./Polyline-7f90e3cc.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./kmlUtils-fdae4a81.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./fieldUtils-c41301b0.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./aaBoundingBox-55a55434.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./jsonUtils-e2434b33.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./FeatureSet-a47eef0a.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./GraphicsCollection-6cd24d14.js","./HandleOwner-1ffa4597.js","./Bitmap-044822eb.js","./mat3-5b850236.js","./mat3f32-6c416b1c.js","./vec2f32-eaf29605.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./BitmapContainer-8540a11b.js","./WGLContainer-12d66f96.js","./VertexArrayObject-2b4e90de.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./GraphicContainer-3637f3e4.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./Queue-4939205d.js","./AttributeStoreView-dcb739c3.js","./mat2d-795519e1.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./TileContainer-04cf618b.js","./capabilities-55572a33.js","./vec3f32-ad1dc57f.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./projectionSupport-6e748f70.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./devEnvironmentUtils-5002a058.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./rasterProjectionHelper-2f2082da.js","./RenderingContext-075c3eb6.js","./programUtils-aa53d847.js","./NestedMap-1b5db22e.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./webgl-debug-b1f7a2c5.js","./rasterUtils-699bb000.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"knowledge-graph":()=>Y().then(()=>w(()=>import("./KnowledgeGraphLayerView2D-23b9b0bd.js"),["./KnowledgeGraphLayerView2D-23b9b0bd.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./LayerView-f4777136.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./mat4-63147b80.js","./mathUtils-505ef34b.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./jsonUtils-e2434b33.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./Basemap-5520ad34.js","./preload-helper-41c905a7.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./request-16c6134d.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./Color-46910694.js","./compilerUtils-db2fe354.js","./enumeration-de0a766e.js","./opacityUtils-a1e441cd.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./fieldUtils-c41301b0.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./aaBoundingBox-55a55434.js","./persistableUrlUtils-abff3ce1.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./Queue-4939205d.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./aaBoundingRect-062d7c89.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./vec2f32-eaf29605.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"link-chart":()=>Y().then(()=>w(()=>import("./KnowledgeGraphLayerView2D-23b9b0bd.js"),["./KnowledgeGraphLayerView2D-23b9b0bd.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./LayerView-f4777136.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./mat4-63147b80.js","./mathUtils-505ef34b.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./jsonUtils-e2434b33.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./Basemap-5520ad34.js","./preload-helper-41c905a7.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./request-16c6134d.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./Color-46910694.js","./compilerUtils-db2fe354.js","./enumeration-de0a766e.js","./opacityUtils-a1e441cd.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./fieldUtils-c41301b0.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./aaBoundingBox-55a55434.js","./persistableUrlUtils-abff3ce1.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./Queue-4939205d.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./aaBoundingRect-062d7c89.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./vec2f32-eaf29605.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"knowledge-graph-sublayer":Jt,"map-image":()=>Y().then(()=>w(()=>import("./MapImageLayerView2D-c474ecf6.js"),["./MapImageLayerView2D-c474ecf6.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./GraphicsCollection-6cd24d14.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./HandleOwner-1ffa4597.js","./BitmapContainer-8540a11b.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./defaultsJSON-b087dd4d.js","./jsonUtils-dfa282b7.js","./AttributeStoreView-dcb739c3.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./normalizeUtils-08ce1e14.js","./HighlightGraphicContainer-1485a784.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./TileContainer-04cf618b.js","./vec3f32-ad1dc57f.js","./ExportStrategy-8b65928f.js","./TileInfo-3f2956cd.js","./Bitmap-044822eb.js","./ExportImageParameters-7b7ef2c0.js","./floorFilterUtils-080a7cd2.js","./sublayerUtils-5d4d0ee3.js","./RefreshableLayerView-d6853579.js","./drapedUtils-89347add.js","./scaleUtils-8911ddd5.js","./popupUtils-4db6471b.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"map-notes":()=>Y().then(()=>w(()=>import("./MapNotesLayerView2D-eb97d936.js"),["./MapNotesLayerView2D-eb97d936.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./GroupContainer-5bf4522c.js","./WGLContainer-12d66f96.js","./VertexArrayObject-2b4e90de.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./GraphicContainer-3637f3e4.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./Queue-4939205d.js","./AttributeStoreView-dcb739c3.js","./mat2d-795519e1.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./TileContainer-04cf618b.js","./lengthUtils-320ae102.js","./capabilities-55572a33.js","./vec3f32-ad1dc57f.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./defaultsJSON-b087dd4d.js","./jsonUtils-dfa282b7.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),media:()=>Y().then(()=>w(()=>import("./MediaLayerView2D-06fbb5d6.js"),["./MediaLayerView2D-06fbb5d6.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./reactiveUtils-989a8d7f.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./aaBoundingRect-062d7c89.js","./perspectiveUtils-f1658aca.js","./projection-03688518.js","./mat4-63147b80.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./mat3-5b850236.js","./mat3f64-221ce671.js","./vec2-3a431caf.js","./MagnifierPrograms-8dd46823.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./earcut-61f7b102.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rasterizingUtils-70e51e90.js","./pbf-9196f6ce.js","./imageutils-47b76771.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./defaultsJSON-b087dd4d.js","./devEnvironmentUtils-5002a058.js","./CircularArray-040b84c7.js","./webgl-debug-b1f7a2c5.js","./HandleOwner-1ffa4597.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./BufferPool-eeecbea6.js","./enums-fb086c25.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./GraphicsView2D-c3e93aa6.js","./projectionSupport-6e748f70.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./AttributeStoreView-dcb739c3.js","./TiledDisplayObject-76821229.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./normalizeUtils-08ce1e14.js","./vec3f32-ad1dc57f.js","./asyncUtils-d59cad3c.js","./LayerView-f4777136.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"ogc-feature":()=>Y().then(()=>w(()=>import("./OGCFeatureLayerView2D-bcd9fe0e.js"),["./OGCFeatureLayerView2D-bcd9fe0e.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./FeatureLayerView2D-0925c787.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./TimeExtent-0fb637c6.js","./Query-8c2b9d22.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./FeatureSet-a47eef0a.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./enums-b1d611e3.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./utils-45a97d77.js","./MaterialKey-8f458904.js","./visualVariablesUtils-904a1f06.js","./createSymbolSchema-8b7065b5.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-062d7c89.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./vec2-3a431caf.js","./vec2f32-eaf29605.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./util-54b675a7.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./workers-9e1006b9.js","./Connection-da262054.js","./assets-86d142ff.js","./intl-45f8f1a9.js","./messages-57170cca.js","./floorFilterUtils-080a7cd2.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./TileStrategy-cb3a7d25.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"open-street-map":xi,"oriented-imagery":Jt,route:()=>Y().then(()=>w(()=>import("./RouteLayerView2D-c6e0081d.js"),["./RouteLayerView2D-c6e0081d.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./CollectionFlattener-8de7cbfd.js","./reactiveUtils-989a8d7f.js","./Stop-714b8688.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./LayerView-f4777136.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./HandleOwner-1ffa4597.js","./GraphicContainer-3637f3e4.js","./enums-b1d611e3.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./Queue-4939205d.js","./AttributeStoreView-dcb739c3.js","./mat2d-795519e1.js","./mat3-5b850236.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./visualVariablesUtils-f202191f.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./visualVariablesUtils-904a1f06.js","./VertexArrayObject-2b4e90de.js","./TileContainer-04cf618b.js","./WGLContainer-12d66f96.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./lengthUtils-320ae102.js","./capabilities-55572a33.js","./vec3f32-ad1dc57f.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./GraphicsView2D-c3e93aa6.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./normalizeUtilsSync-87c5ef07.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./defaultsJSON-b087dd4d.js","./jsonUtils-dfa282b7.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./styleUtils-6ef1c49e.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),stream:()=>Y().then(()=>w(()=>import("./StreamLayerView2D-f0080b42.js"),["./StreamLayerView2D-f0080b42.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./FeatureSet-a47eef0a.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./FeatureLayerView2D-0925c787.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./TimeExtent-0fb637c6.js","./Query-8c2b9d22.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./enums-b1d611e3.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./utils-45a97d77.js","./MaterialKey-8f458904.js","./visualVariablesUtils-904a1f06.js","./createSymbolSchema-8b7065b5.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-062d7c89.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./vec2-3a431caf.js","./vec2f32-eaf29605.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./util-54b675a7.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./workers-9e1006b9.js","./Connection-da262054.js","./assets-86d142ff.js","./intl-45f8f1a9.js","./messages-57170cca.js","./floorFilterUtils-080a7cd2.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./TileStrategy-cb3a7d25.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"subtype-group":()=>Y().then(()=>w(()=>import("./SubtypeGroupLayerView2D-2eabaf08.js"),["./SubtypeGroupLayerView2D-2eabaf08.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./parser-7deabd3b.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./mat4-63147b80.js","./mathUtils-505ef34b.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./TimeExtent-0fb637c6.js","./Query-8c2b9d22.js","./enumeration-de0a766e.js","./jsonUtils-e2434b33.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./PopupTemplate-7c042eda.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./UniqueValueRenderer-adb2594e.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./LegendOptions-6e5321d3.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./Graphic-b6696507.js","./compilerUtils-db2fe354.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./layerUtils-394e7a48.js","./styleUtils-6ef1c49e.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./deprecate-0efb6d09.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./FeatureLayerView2D-0925c787.js","./Container-782a7f3a.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./FeatureSet-a47eef0a.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./enums-b1d611e3.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./VertexElementDescriptor-2925c6af.js","./utils-45a97d77.js","./MaterialKey-8f458904.js","./visualVariablesUtils-904a1f06.js","./createSymbolSchema-8b7065b5.js","./ExpandedCIM-23a9d4d0.js","./BidiEngine-836b7ef6.js","./aaBoundingRect-062d7c89.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./vec2-3a431caf.js","./vec2f32-eaf29605.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./util-54b675a7.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./workers-9e1006b9.js","./Connection-da262054.js","./assets-86d142ff.js","./intl-45f8f1a9.js","./messages-57170cca.js","./floorFilterUtils-080a7cd2.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./queryZScale-22ca074d.js","./featureConversionUtils-93a98860.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./vec2f64-22afc56f.js","./mat3-5b850236.js","./TileStrategy-cb3a7d25.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),tile:xi,"vector-tile":()=>Y().then(()=>w(()=>import("./VectorTileLayerView2D-814476bc.js"),["./VectorTileLayerView2D-814476bc.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./diffUtils-ba6273ab.js","./aaBoundingRect-062d7c89.js","./enums-fb086c25.js","./workers-9e1006b9.js","./Connection-da262054.js","./Queue-4939205d.js","./assets-86d142ff.js","./intl-45f8f1a9.js","./messages-57170cca.js","./Rect-ea14f53a.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./pbf-9196f6ce.js","./rasterizingUtils-70e51e90.js","./floatRGBA-90587fc5.js","./TileKey-3acb01a1.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./TileStore-4f504952.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./mat3-5b850236.js","./mat3f32-6c416b1c.js","./VertexArrayObject-2b4e90de.js","./config-1337d16e.js","./TiledDisplayObject-76821229.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./definitions-19bfb61c.js","./StyleDefinition-7d58136b.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./TileContainer-04cf618b.js","./WGLContainer-12d66f96.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./vec2f32-eaf29605.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./StyleRepository-3d8c9fbe.js","./colorUtils-c0f43caf.js","./GeometryUtils-53652037.js","./unitBezier-881ac1eb.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./TileInfo-3f2956cd.js","./TileStrategy-cb3a7d25.js","./Basemap-5520ad34.js","./deprecate-0efb6d09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./projection-03688518.js","./zscale-92e5f59b.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),wcs:()=>Y().then(()=>w(()=>import("./ImageryTileLayerView2D-4b282cc3.js"),["./ImageryTileLayerView2D-4b282cc3.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./Graphic-b6696507.js","./geometry-8c15a791.js","./Extent-52b65909.js","./Polyline-7f90e3cc.js","./typeUtils-f38bdb16.js","./PopupTemplate-7c042eda.js","./Clonable-ad03ca71.js","./Collection-54857936.js","./Evented-d69b5d66.js","./SimpleObservable-7e8b69a3.js","./fieldUtils-c41301b0.js","./preload-helper-41c905a7.js","./enumeration-de0a766e.js","./number-b98554af.js","./locale-30120714.js","./Identifiable-a49d7533.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Color-46910694.js","./colorUtils-639f4d25.js","./mathUtils-505ef34b.js","./screenUtils-7afeb41c.js","./opacityUtils-a1e441cd.js","./aaBoundingBox-55a55434.js","./request-16c6134d.js","./persistableUrlUtils-abff3ce1.js","./collectionUtils-cc5781ab.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./jsonUtils-e2434b33.js","./reactiveUtils-989a8d7f.js","./multidimensionalUtils-ba984035.js","./RasterVFDisplayObject-092dfa30.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./dataUtils-712d153e.js","./mat3f32-6c416b1c.js","./WGLContainer-12d66f96.js","./definitions-19bfb61c.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingRect-062d7c89.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./mat3-5b850236.js","./LayerView-f4777136.js","./HandleOwner-1ffa4597.js","./rasterUtils-699bb000.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./TileContainer-04cf618b.js","./TileInfo-3f2956cd.js","./RawBlockCache-58aecfea.js","./rasterProjectionHelper-2f2082da.js","./projection-03688518.js","./assets-86d142ff.js","./zscale-92e5f59b.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./capabilities-55572a33.js","./util-54b675a7.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./lengthUtils-320ae102.js","./popupUtils-4db6471b.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./deprecate-0efb6d09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"web-tile":xi,wfs:Jt,wms:()=>Y().then(()=>w(()=>import("./WMSLayerView2D-7b934765.js"),["./WMSLayerView2D-7b934765.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./Extent-52b65909.js","./BitmapContainer-8540a11b.js","./WGLContainer-12d66f96.js","./mat3f32-6c416b1c.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./screenUtils-7afeb41c.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./colorUtils-639f4d25.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./aaBoundingRect-062d7c89.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./LayerView-f4777136.js","./Collection-54857936.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./ExportStrategy-8b65928f.js","./TileInfo-3f2956cd.js","./Bitmap-044822eb.js","./mat3-5b850236.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./enumeration-de0a766e.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./RefreshableLayerView-d6853579.js","./OperationalLayer-70e0771f.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./persistableUrlUtils-abff3ce1.js","./ElevationInfo-5422702b.js","./fieldUtils-c41301b0.js","./lengthUtils-320ae102.js","./opacityUtils-a1e441cd.js","./ExportWMSImageParameters-4c5243f7.js","./Basemap-5520ad34.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./TileStrategy-cb3a7d25.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),wmts:()=>Y().then(()=>w(()=>import("./WMTSLayerView2D-99de50bc.js"),["./WMTSLayerView2D-99de50bc.js","./cast-4d1aa82d.js","./typedArrayUtil-c81d173a.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./reactiveUtils-989a8d7f.js","./Extent-52b65909.js","./imageUtils-06c8d7d5.js","./BitmapTileContainer-49487a9f.js","./aaBoundingRect-062d7c89.js","./mathUtils-505ef34b.js","./mat3f32-6c416b1c.js","./Bitmap-044822eb.js","./mat3-5b850236.js","./vec2f32-eaf29605.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./definitions-19bfb61c.js","./enums-64ab819c.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./TiledDisplayObject-76821229.js","./TileKey-3acb01a1.js","./WGLContainer-12d66f96.js","./VertexArrayObject-2b4e90de.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./StyleDefinition-7d58136b.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./TileContainer-04cf618b.js","./LayerView-f4777136.js","./Collection-54857936.js","./SimpleObservable-7e8b69a3.js","./collectionUtils-cc5781ab.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./HandleOwner-1ffa4597.js","./Identifiable-a49d7533.js","./Promise-24c50191.js","./TileStore-4f504952.js","./Queue-4939205d.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./enumeration-de0a766e.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./TileStrategy-cb3a7d25.js","./RefreshableLayerView-d6853579.js","./Basemap-5520ad34.js","./preload-helper-41c905a7.js","./deprecate-0efb6d09.js","./Loadable-e19fba09.js","./loadAll-8b24919b.js","./asyncUtils-d59cad3c.js","./request-16c6134d.js","./Portal-fe1a007c.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./PortalItem-d79345ac.js","./assets-86d142ff.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./layerUtils-394e7a48.js","./compilerUtils-db2fe354.js","./opacityUtils-a1e441cd.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Graphic-b6696507.js","./PopupTemplate-7c042eda.js","./fieldUtils-c41301b0.js","./number-b98554af.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./persistableUrlUtils-abff3ce1.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./projection-03688518.js","./zscale-92e5f59b.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./LegendOptions-6e5321d3.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./MemCache-c220a92a.js","./jsonUtils-714f7856.js","./UniqueValueRenderer-adb2594e.js","./diffUtils-ba6273ab.js","./colorRamps-6cc98f16.js","./sizeVariableUtils-d4870b0d.js","./lengthUtils-320ae102.js","./jsonUtils-dfa282b7.js","./styleUtils-6ef1c49e.js","./DictionaryLoader-7f74ef6b.js","./LRUCache-7d328c48.js","./executeQueryJSON-ad10aa61.js","./normalizeUtils-08ce1e14.js","./normalizeUtilsCommon-42c6cdb7.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./pbf-9196f6ce.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./TimeReference-d5a14980.js","./datetime-b6333958.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./BlendLayer-1f4ade52.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./FeatureReductionLayer-a890a60c.js","./labelingInfo-8ec658bf.js","./labelUtils-4db1d7ec.js","./defaultsJSON-b087dd4d.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./FieldsIndex-b8dc9788.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./mat2d-795519e1.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./capabilities-55572a33.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function hm(i){const e=i.declaredClass?i.declaredClass.slice(i.declaredClass.lastIndexOf(".")+1):"Unknown",t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new $(`${t}:view-not-supported`,`${e} is not supported in 2D`)}const Ho={hasLayerViewModule:i=>v(qo[i.type]),importLayerView:i=>{const e=qo[i.type];if(P(e))throw hm(i);return e(i)}};function um(i,e){const{spatialReference:t}=e,n=[e.x,e.y];let s=Number.POSITIVE_INFINITY,r=0,o=0;const l=[0,0],d=i.type==="extent"?[[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]]:i.rings;for(const h of d)for(let u=0;u<h.length-1;u++){rd(l,n,h,u);const p=Ed(n,l);p<s&&(s=p,r=l[0],o=l[1])}return{coordinate:new X({x:r,y:o,spatialReference:t}),distance:s}}var Us;let zt=Us=class extends ir(L){constructor(i){super(i),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(P(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Gi(this.geometry,this.spatialReference)}catch(i){return S.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:i}),null}return this.geometry}constrain(i,e){if(P(this.normalizedGeometry))return i;const t=i.targetGeometry;if(this.normalizedGeometry.type==="extent"?pa(this.normalizedGeometry,t):mc(this.normalizedGeometry,t))return i;const{coordinate:n}=um(this.normalizedGeometry,t);return n&&(i.targetGeometry=n),i}clone(){var i,e;return new Us({geometry:(i=this.geometry)==null?void 0:i.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};a([c({constructOnly:!0})],zt.prototype,"geometry",void 0),a([c({readOnly:!0})],zt.prototype,"normalizedGeometry",null),a([c({constructOnly:!0})],zt.prototype,"spatialReference",void 0),zt=Us=a([I("esri.views.2d.constraints.GeometryConstraint")],zt);var Ws;let Vi=Ws=class extends ir(L){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(i,e){return this.enabled&&e&&(this.rotationEnabled||(i.rotation=e.rotation)),i}clone(){return new Ws({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};a([c()],Vi.prototype,"enabled",void 0),a([c()],Vi.prototype,"rotationEnabled",void 0),Vi=Ws=a([I("esri.views.2d.constraints.RotationConstraint")],Vi);const El=Vi;var js;let _e=js=class extends ir(L){constructor(i){super(i),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let i,{lods:e,minScale:t,maxScale:n,minZoom:s,maxZoom:r}=this,o=-1,l=-1,d=!1,h=!1;if(t!==0&&n!==0&&t<n&&([t,n]=[n,t]),!e||!e.length)return this._set("effectiveMinScale",t),void this._set("effectiveMaxScale",n);e=e.map(u=>u.clone()),e.sort((u,p)=>p.scale-u.scale),e.forEach((u,p)=>u.level=p);for(const u of e)!d&&t>0&&t>=u.scale&&(o=u.level,d=!0),!h&&n>0&&n>=u.scale&&(l=i?i.level:-1,h=!0),i=u;s===-1&&(s=t===0?0:o),r===-1&&(r=n===0?e.length-1:l),s=Math.max(s,0),s=Math.min(s,e.length-1),r=Math.max(r,0),r=Math.min(r,e.length-1),s>r&&([s,r]=[r,s]),t=e[s].scale,n=e[r].scale,e.splice(0,s),e.splice(r-s+1,e.length),e.forEach((u,p)=>{this._lodByScale[u.scale]=u,this._scales[p]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",r),this._set("effectiveMinScale",t),this._set("effectiveMaxScale",n)}constrain(i,e){if(e&&i.scale===e.scale)return i;const t=this.effectiveMinScale,n=this.effectiveMaxScale,s=i.targetGeometry,r=e&&e.targetGeometry,o=n!==0&&i.scale<n,l=t!==0&&i.scale>t;if(o||l){const d=l?t:n;if(e&&r){const h=(d-e.scale)/(i.scale-e.scale);s.x=r.x+(s.x-r.x)*h,s.y=r.y+(s.y-r.y)*h}i.scale=d}return this.snapToZoom&&this.effectiveLODs&&(i.scale=this._getClosestScale(i.scale)),i}fit(i){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(i,null);const e=this.scaleToZoom(i.scale),t=Math.abs(e-Math.floor(e));return i.scale=this.zoomToScale(t>.99?Math.round(e):Math.floor(e)),i}zoomToScale(i){if(!this.effectiveLODs)return 0;i-=this.effectiveMinZoom,i=Math.max(0,i);const e=this._scales;if(i<=0)return e[0];if(i>=e.length)return e[e.length-1];const t=Math.round(i-.5),n=Math.round(i);return e[n]+(n-i)*(e[t]-e[n])}scaleToZoom(i){if(!this.effectiveLODs)return-1;const e=this._scales;let t,n;if(i>=e[0])return this.effectiveMinZoom;if(i<=e[e.length-1])return this.effectiveMaxZoom;for(let s=0;s<e.length-1;s++){if(t=e[s],n=e[s+1],n===i)return s+this.effectiveMinZoom+1;if(t>i&&n<i)return s+this.effectiveMinZoom+1-(i-n)/(t-n)}return-1}snapToClosestScale(i){if(!this.effectiveLODs)return i;const e=this.scaleToZoom(i);return this.zoomToScale(Math.round(e))}snapToNextScale(i,e=.5){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t+1)}snapToPreviousScale(i,e=2){if(!this.effectiveLODs)return i*e;const t=Math.round(this.scaleToZoom(i));return this.zoomToScale(t-1)}clone(){return new js({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(i){return this._lodByScale[i]||(i=this._scales.reduce((e,t)=>Math.abs(t-i)<=Math.abs(e-i)?t:e,this._scales[0])),this._lodByScale[i].scale}};a([c({readOnly:!0})],_e.prototype,"effectiveLODs",void 0),a([c({readOnly:!0})],_e.prototype,"effectiveMinZoom",void 0),a([c({readOnly:!0})],_e.prototype,"effectiveMaxZoom",void 0),a([c({readOnly:!0})],_e.prototype,"effectiveMinScale",void 0),a([c({readOnly:!0})],_e.prototype,"effectiveMaxScale",void 0),a([c()],_e.prototype,"lods",void 0),a([c()],_e.prototype,"minZoom",void 0),a([c()],_e.prototype,"maxZoom",void 0),a([c()],_e.prototype,"minScale",void 0),a([c()],_e.prototype,"maxScale",void 0),a([c()],_e.prototype,"snapToZoom",void 0),_e=js=a([I("esri.views.2d.constraints.ZoomConstraint")],_e);const xl=_e,pm={base:null,key:"type",typeMap:{extent:vi,polygon:od}};let K=class extends L{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,t,n;return`${(e=this._zoom)==null?void 0:e.uid}/${(t=this._rotation)==null?void 0:t.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _defaultLODs(){var n,s,r;const e=(s=(n=this.view)==null?void 0:n.defaultsFromMap)==null?void 0:s.tileInfo,t=(r=this.view)==null?void 0:r.spatialReference;return e&&t&&e.spatialReference.equals(t)?e.lods:null}get _geometry(){var e;return new zt({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new El({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,n=this.minZoom,s=this.maxZoom,r=this.minScale,o=this.maxScale,l=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===s&&e.minScale===r&&e.maxScale===o&&e.snapToZoom===l?e:new xl({lods:t,minZoom:n,maxZoom:s,minScale:r,maxScale:o,snapToZoom:l})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};a([c({readOnly:!0})],K.prototype,"effectiveLODs",null),a([c({readOnly:!0})],K.prototype,"effectiveMinScale",null),a([c({readOnly:!0})],K.prototype,"effectiveMaxScale",null),a([c({readOnly:!0})],K.prototype,"effectiveMinZoom",null),a([c({readOnly:!0})],K.prototype,"effectiveMaxZoom",null),a([c({types:pm,value:null})],K.prototype,"geometry",null),a([c({type:[Rc]})],K.prototype,"lods",void 0),a([c()],K.prototype,"minScale",void 0),a([c()],K.prototype,"maxScale",void 0),a([c()],K.prototype,"minZoom",void 0),a([c()],K.prototype,"maxZoom",void 0),a([c()],K.prototype,"rotationEnabled",void 0),a([c()],K.prototype,"snapToZoom",void 0),a([c()],K.prototype,"view",void 0),a([c({readOnly:!0})],K.prototype,"version",null),a([c()],K.prototype,"_defaultLODs",null),a([c({type:zt})],K.prototype,"_geometry",null),a([c({type:El})],K.prototype,"_rotation",null),a([c({readOnly:!0,type:xl})],K.prototype,"_zoom",null),K=a([I("esri.views.2d.MapViewConstraints")],K);const $l=K;function mm(i){return i instanceof Float32Array&&i.length>=2}function gm(i){return Array.isArray(i)&&i.length>=2}function ys(i){return mm(i)||gm(i)}var Gs;const Ge=[0,0];let yt=Gs=class extends ji{constructor(i){super(i),this._viewpoint2D={center:te(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new vi,this.id=0,this.inverseTransform=Ct(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ct(),this.transformNoRotation=Ct(),this.displayMat3=Qn(),this.displayViewMat3=Qn(),this.viewMat3=Qn(),this.viewMat2d=hd(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(i){this._set("pixelRatio",i),this._update()}set size(i){this._set("size",i),this._update()}set viewpoint(i){if(i){const e=this._viewpoint2D,t=i.targetGeometry;e.center[0]=t.x,e.center[1]=t.y,e.rotation=i.rotation,e.scale=i.scale,e.spatialReference=t.spatialReference}this._update()}copy(i){const e=this.size,t=this.viewpoint;return t&&e?(this.viewpoint=Fe(t,i.viewpoint),this._set("size",Tn(e,i.size))):(this.viewpoint=i.viewpoint.clone(),this._set("size",[i.size[0],i.size[1]])),this._set("pixelRatio",i.pixelRatio),this}clone(){return new Gs({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(i,e,t){return ys(e)?et(i,e,this.inverseTransform):(Ge[0]=e,Ge[1]=t,et(i,Ge,this.inverseTransform))}toScreen(i,e,t){return ys(e)?et(i,e,this.transform):(Ge[0]=e,Ge[1]=t,et(i,Ge,this.transform))}toScreenNoRotation(i,e,t){return ys(e)?et(i,e,this.transformNoRotation):(Ge[0]=e,Ge[1]=t,et(i,Ge,this.transformNoRotation))}getScreenTransform(i,e){const{center:t}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size");return vr(i,t,s,e,0,n),i}_update(){const{center:i,spatialReference:e,scale:t,rotation:n}=this._viewpoint2D,s=this._get("pixelRatio")||1,r=this._get("size"),o=new He({targetGeometry:new X(i[0],i[1],e),scale:t,rotation:n});if(this._set("viewpoint",o),!r||!e||!t)return;this.resolution=wi(o),this.rotation=n,this.scale=t,this.spatialReference=e,Tn(this.center,i);const l=r[0]!==0?2/r[0]:0,d=r[1]!==0?-2/r[1]:0;$d(this.displayMat3,l,0,0,0,d,0,-1,1,1);const h=Ad(this.viewMat3),u=Hr(r[0]/2,r[1]/2),p=Hr(-r[0]/2,-r[1]/2),g=fa(n);qr(h,h,u),kd(h,h,g),qr(h,h,p),Pd(this.displayViewMat3,this.displayMat3,h);const f=Aa(this.viewMat2d,u);return nr(f,f,g),Cn(f,f,p),Gp(this.extent,o,r),wr(this.transform,o,r,s),ka(this.inverseTransform,this.transform),em(this.transformNoRotation,o,r,s),this.worldScreenWidth=im(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};a([c({readOnly:!0})],yt.prototype,"id",void 0),a([c({value:1,json:{write:!0}})],yt.prototype,"pixelRatio",null),a([c({json:{write:!0}})],yt.prototype,"size",null),a([c()],yt.prototype,"spatialReference",void 0),a([c({type:He,json:{write:!0}})],yt.prototype,"viewpoint",null),yt=Gs=a([I("esri.views.2d.ViewState")],yt);const Uo=yt;var Zs,Ks;let tt=Zs=class extends L{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Zs({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};a([c()],tt.prototype,"left",void 0),a([c()],tt.prototype,"top",void 0),a([c()],tt.prototype,"right",void 0),a([c()],tt.prototype,"bottom",void 0),tt=Zs=a([I("esri.views.2d.PaddedViewState.Padding")],tt);let ai=Ks=class extends Uo{constructor(...i){super(...i),this.paddedViewState=new Uo,this._updateContent=(()=>{const e=te();return()=>{const t=this._get("size"),n=this._get("padding");if(!t||!n)return;const s=this.paddedViewState;re(e,n.left+n.right,n.top+n.bottom),Fs(e,t,e),Tn(s.size,e);const r=s.viewpoint;r&&(this.viewpoint=r)}})(),this.addHandles(y(()=>[this.size,this.padding],()=>this._updateContent(),qi)),this.padding=new tt,this.size=[0,0]}set padding(i){this._set("padding",i||new tt)}set viewpoint(i){if(i){const e=i.clone();this.paddedViewState.viewpoint=i,sm(e,i,this._get("size"),this._get("padding"));const t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference,this._update()}}clone(){return new Ks({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};a([c()],ai.prototype,"paddedViewState",void 0),a([c({type:tt})],ai.prototype,"padding",null),a([c()],ai.prototype,"viewpoint",null),ai=Ks=a([I("esri.views.2d.PaddedViewState")],ai);const fm=ai;function br(i,e){switch(e){case"primary":return i.pointerType==="touch"||i.button===0;case"secondary":return i.pointerType!=="touch"&&i.button===2;case"tertiary":return i.pointerType!=="touch"&&i.button===1}}let Wo=class extends ie{constructor(e,t){super(!0),this._view=e,this.registerIncoming("double-click",t,n=>this._handleDoubleClick(n,t))}_handleDoubleClick(e,t){br(e.data,"primary")&&(e.stopPropagation(),t?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},_m=class extends ie{constructor(e,t,n){super(!0),this.view=e,this.pointerType=t,this.registerIncoming("double-tap-drag",n,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(e){const{data:t}=e,{pointerType:n}=t;if(n!==this.pointerType)return;e.stopPropagation();const{action:s,delta:r}=t,{view:o}=this,{mapViewNavigation:l}=o;switch(s){case"begin":{const{scale:d}=o;this._startScale=d,this._currentScale=d,this._previousDelta=r,l.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;const d=1.015**r.y,h=this._startScale*d,u=h/this._currentScale;l.setViewpointImmediate(u),this._currentScale=h;break}case"end":{const{constraints:d}=o,{effectiveLODs:h,snapToZoom:u}=d;if(!u||!h)return void l.end();const p=d.snapScale(this._currentScale),g=(r.y>0?Math.max(p,d.snapToPreviousScale(this._startScale)):Math.min(p,d.snapToNextScale(this._startScale)))/this._currentScale;l.zoom(g);break}}}},Wn=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const t=e.data,n=t.pointers.size;switch(t.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var t,n;this._startEvent=e,(n=(t=this._callbacks).condition)!=null&&n.call(t,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var t,n;(n=(t=this._callbacks).condition)!=null&&n.call(t,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var t,n;(n=(t=this._callbacks).condition)!=null&&n.call(t,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},ym=class extends ie{constructor(e,t,n){super(!0),this.view=e,this.pointerAction=t,this.registerIncoming("drag",n,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new Wn({start:(t,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(t,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(t,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(t,n)=>t===1&&br(n.data,this.pointerAction)})}_handleDrag(e){const t=this.view.mapViewNavigation;t.pinch.zoomMomentum||t.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},vm=class extends ie{constructor(e,t,n){super(!0),this._view=e,this.pointerAction=t;const s=this._view.mapViewNavigation;this._dragEventSeparator=new Wn({start:(r,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(r,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(r,o)=>{s.rotate.end(),o.stopPropagation()},condition:(r,o)=>r===1&&br(o.data,this.pointerAction)}),this.registerIncoming("drag",n,r=>this._dragEventSeparator.handle(r))}};function Ae(i){let e=i*i;return i<0&&(e*=-1),e}function wm(i){return i.translation[0]=0,i.translation[1]=0,i.translation[2]=0,i.heading=0,i.tilt=0,i}function bm(i,e,t){const n=t,s=i.state,r=i.device,o=e.tiltDirection==="forward-down"?1:-1,l=1;return r.deviceType==="standard"?(n.translation[0]=Ae(s.axes[0]),n.translation[1]=Ae(s.axes[1]),n.translation[2]=Ae(s.buttons[7])-Ae(s.buttons[6]),n.heading=Ae(s.axes[2]),n.tilt=Ae(s.axes[3])):r.deviceType==="spacemouse"&&(n.translation[0]=1.2*Ae(s.axes[0]),n.translation[1]=1.2*Ae(s.axes[1]),n.translation[2]=2*-Ae(s.axes[2]),n.heading=1.2*Ae(s.axes[5]),n.tilt=1.2*Ae(s.axes[3])),n.tilt*=o,kc(n.translation,n.translation,l),n}function Mm(i){return i.translation[0]===0&&i.translation[1]===0&&i.translation[2]===0&&i.heading===0&&i.tilt===0&&i.zoom===0}let Im=class extends ie{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new xt,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",t=>this._handleGamePadEvent(t)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([y(()=>{var t;return(t=this._view.navigation.gamepad)==null?void 0:t.enabled},t=>{t?(this._handle.resume(),this._frameTask||(this._frameTask=fi({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},V)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const t=this._view.navigation.gamepad.device;t&&e.data.device!==t||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,wm(this._transformation)):(this._currentDevice=e.data.device,bm(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const t=this._transformation;if(Mm(t))return;const n=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,r=Tm*s*e;Un(n,n,[t.translation[0]*r,-t.translation[1]*r]);const o=1+t.translation[2]*Em*e,l=this._view.constraints.rotationEnabled?-t.heading*Cm*e:0,d=this._view.size,h=[d[0]/2,d[1]];Il(n,n,o,l,h,d);const u=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=u}};const Cm=.06,Tm=.7,Em=6e-4;let xm=class extends ie{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyMap={[t.left]:"left",[t.right]:"right",[t.up]:"up",[t.down]:"down"},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",n,s=>this._handleKeyUp(s)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const n=this._keyMap[e.data.key];if(this._pressed=n!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),n){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},$m=class extends ie{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._pressed=!1,this._keyToDirection={[t.clockwiseOption1]:"clockwise",[t.clockwiseOption2]:"clockwise",[t.counterClockwiseOption1]:"counterClockwise",[t.counterClockwiseOption2]:"counterClockwise",[t.resetOption1]:"reset",[t.resetOption2]:"reset"},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",n,s=>this._handleKeyUp(s)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,t){const n=e.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[e.data.key];if(this._pressed=s!=null,this._pressed){if(t)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var mi;(function(i){i[i.IN=0]="IN",i[i.OUT=1]="OUT"})(mi||(mi={}));let Am=class extends ie{constructor(e,t,n){super(!0),this.view=e,this.keys=t,this._keysToZoomAction={},this.registerIncoming("key-down",n,s=>this._handleKeyDown(s)),t.zoomIn.forEach(s=>this._keysToZoomAction[s]=mi.IN),t.zoomOut.forEach(s=>this._keysToZoomAction[s]=mi.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const t=e.modifiers;if(t.size>0&&!t.has("Shift"))return;const{key:n}=e.data;if(!(n in this._keysToZoomAction))return;const s=this._keysToZoomAction[n],{mapViewNavigation:r}=this.view;let o=null;switch(s){case mi.IN:o=r.zoomIn();break;case mi.OUT:o=r.zoomOut();break;default:return}r.begin(),o.then(()=>r.end()),e.stopPropagation()}};const km=.6;let Pm=class extends ie{constructor(e,t){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",t,n=>this._handleMouseWheel(n))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const t=this._view.mapViewNavigation,{x:n,y:s,deltaY:r}=e.data,o=1/km**(1/60*r),l=t.zoom(o,[n,s]);l&&(this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0,t.end()}))}},Fm=class extends ie{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const t=this.view.mapViewNavigation;this._dragEventSeparator=new Wn({start:(n,s)=>{t.pinch.begin(this.view,s.data),s.stopPropagation()},update:(n,s)=>{t.pinch.update(this.view,s.data),s.stopPropagation()},end:(n,s)=>{t.pinch.end(this.view),s.stopPropagation()},condition:n=>n>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function jo(i){const e=i.native;return e?{buttons:e.buttons.map(t=>t.pressed?t.value?t.value:1:0),axes:e.axes.map(t=>Lm(t,i.axisThreshold))}:{buttons:[],axes:[]}}function Rm(i,e){if(i.axes.length!==e.axes.length||i.buttons.length!==e.buttons.length)return!1;for(let t=0;t<i.axes.length;t++)if(i.axes[t]!==e.axes[t])return!1;for(let t=0;t<i.buttons.length;t++)if(i.buttons[t]!==e.buttons[t])return!1;return!0}function Sm(i){for(let e=0;e<i.axes.length;e++)if(i.axes[e]!==0)return!1;for(let e=0;e<i.buttons.length;e++)if(i.buttons[e]!==0)return!1;return!0}function Lm(i,e){const t=Math.abs(i);return t<e?0:Math.sign(i)*(t-e)/(1-e)}let Dm=class{constructor(e,t){this._element=e,this._input=t,this._hasEventListeners=!1,this._onConnectGamepad=r=>{this._connectGamepad(r.gamepad)},this._onDisconnectGamepad=r=>{const o=r.gamepad,l=o.index,d=this._inputDevices[l];d&&(this._emitGamepadEvent(o,jo(d),!1),this._inputDevices.splice(l,1),this._latestUpdate.splice(l,1),this._input.gamepad.devices.remove(d),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=n&&s,this.supported&&(this._forEachGamepad(r=>this._connectGamepad(r)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const t=new fr(e);t.deviceType!=="unknown"&&(this._inputDevices[e.index]=t,this._input.gamepad.devices.add(t)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=fi({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),t=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!t;this._forEachGamepad(s=>{const r=this._inputDevices[s.index];if(!r)return;const o=this._latestUpdate[s.index],l=jo(r),d=n||Sm(l);o&&(o.timestamp===s.timestamp||!o.active&&d||Rm(o.state,l))||this._emitGamepadEvent(s,l,!d)})}_forEachGamepad(e){const t=window.navigator.getGamepads();for(let n=0;n<t.length;n++){const s=t[n];this._validate(s)&&e(s)}}_emitGamepadEvent(e,t,n){const s=this._latestUpdate[e.index],r=s&&s.active;if(!r&&!n)return;const o=!r&&n?"start":r&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:t,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:t,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}};const Go=xe("edge"),Om=xe("chrome"),Vm=xe("ff"),Nm=xe("safari"),Zo="esri-view-surface",ei={touchNone:`${Zo}--touch-none`,touchPan:`${Zo}--touch-pan`};let Al=class kl{constructor(e,t){this._input=t,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Dm(e,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=ae(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const t in this._active)if(!e||!e.has(t)){const n=this._active[t];this._element.removeEventListener(vs[t],n),delete this._active[t]}e&&e.forEach(t=>{if(!this._active[t]&&vs[t]){const n=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(vs[t],n),this._active[t]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,t){t?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ei.touchNone:ei.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ei.touchPan:ei.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ei.touchNone),this._element.classList.remove(ei.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,t){const n=hl(this._element,e);return kl.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),t.x=n.x,t.y=n.y,t}_handleKey(e,t){const n=ep(t);n&&e==="key-up"&&this._keyDownState.delete(n);const s={native:t,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(s.key),this._callback(e,s)}_handlePointer(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,t){const n=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault(),this._callback(e,n)}_handleMouseWheel(e,t){let n=t.deltaY;switch(t.deltaMode){case 0:Go&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}Go?n*=.7:Om||Nm?n*=.6:Vm&&(n*=1.375);const s=100,r=Math.abs(n);r>s&&(n=n/r*200/(1+Math.exp(-.02*(r-s))));const o=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:n});this._callback(e,o)}_handlePointerCaptureLost(e,t){this._activePointerCaptures.delete(t.pointerId),this._handleDefault(e,t)}_handleDefault(e,t){const n={native:t};t.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};Al.test={disableSubpixelCoordinates:!1};const vs={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let zm=class extends ie{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function Mr(i,e){return Math.abs(e.x-i.x)+Math.abs(e.y-i.y)}function Bm(i,e){const t=e.x-i.x,n=e.y-i.y;return Math.sqrt(t*t+n*n)}function qm(i,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:me()},i.length===0)return e;if(i.length===1)return e.center.x=i[0].x,e.center.y=i[0].y,e;if(i.length===2){const[D,W]=i,[J,ne]=[W.x-D.x,W.y-D.y];return e.radius=Math.sqrt(J*J+ne*ne)/2,e.center.x=(D.x+W.x)/2,e.center.y=(D.y+W.y)/2,e}let t=0,n=0;for(let D=0;D<i.length;D++)t+=i[D].x,n+=i[D].y;t/=i.length,n/=i.length;const s=i.map(D=>D.x-t),r=i.map(D=>D.y-n);let o=0,l=0,d=0,h=0,u=0,p=0,g=0;for(let D=0;D<s.length;D++){const W=s[D],J=r[D],ne=W*W,q=J*J;o+=ne,l+=q,d+=W*J,h+=ne*W,u+=q*J,p+=W*q,g+=J*ne}const f=.5*(h+p),b=.5*(u+g),C=o*l-d*d,T=(f*l-b*d)/C,F=(o*b-d*f)/C,N=me(T+t,F+n);return{radius:Math.sqrt(T*T+F*F+(o+l)/i.length),center:N}}function Ut(i){const{native:e}=i,{pointerId:t,button:n,pointerType:s}=e;return s==="mouse"?`${t}:${n}`:`${s}`}const $e={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let Hm=class extends ie{constructor(e=$e.maximumDoubleClickDelay,t=$e.maximumDoubleClickDistance,n=$e.maximumDoubleTouchDelay,s=$e.maximumDoubleTouchDistance,r=Fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=rt(e.doubleClickTimer))}get hasPendingInputs(){return Rn(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,t){const n=this._pointerState.get(e);n&&(n.doubleClickTimer=rt(n.doubleClickTimer),t&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const t=this._pointerState.get(e);t.pointerDownCount===1&&this._click.emit(t.event.data,void 0,t.event.modifiers),t.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:t,pointerType:n,button:s}=e.native;return n==="mouse"?`${t}:${s}`:`${n}`}_handleImmediateClick(e){const t=e.data,{pointerType:n}=t.native,s=this._getPointerId(t);if(!this._pointerState.has(s))return void this._startClick(e);const r=this._pointerState.get(s),{data:o,modifiers:l}=r.event,d=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Mr(o,t)>d?(this._clearDoubleClickTimer(s,!0),this._startClick(e)):(this._clearDoubleClickTimer(s,!1),r.pointerDownCount===2&&this._doubleClick.emit(o,void 0,l))}_handlePointerDown(e){const t=Ut(e.data),n=this._pointerState.get(t);n&&(n.pointerDownCount+=1)}_startClick(e){const{data:t}=e,{native:{pointerType:n}}=t,s=Ut(t),r=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),r),l=1;this._pointerState.set(s,{event:e,doubleClickTimer:o,pointerDownCount:l}),this.refreshHasPendingInputs()}},Um=class extends ie{constructor(e=$e.maximumDoubleClickDelay,t=$e.maximumDoubleClickDistance,n=$e.maximumDoubleTouchDelay,s=$e.maximumDoubleTouchDistance,r=Fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=me(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new Wn({start:(o,l)=>this._dragStart(o,l),update:(o,l)=>this._dragUpdate(l),end:(o,l)=>this._dragEnd(l)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=rt(e.doubleTapTimeout)})}get hasPendingInputs(){return Rn(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const t=this._pointerState.get(e);t&&(t.doubleTapTimeout=rt(t.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,t,n){const{button:s,buttons:r,pointer:o,pointers:l,pointerType:d,timestamp:h}=n;return{action:e,delta:t,button:s,buttons:r,pointer:o,pointers:l,pointerType:d,timestamp:h}}_dragStart(e,t){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:s}=t,{center:r}=n;this._dragStartCenter=r;const o=this._createDoubleTapDragData("begin",me(0,0),n);this._doubleTapDrag.emit(o,void 0,s),t.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:n}=e,{center:s}=t,r=me(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",r,t);this._doubleTapDrag.emit(o,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:t,modifiers:n}=e,{center:s}=t,r=me(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",r,t);this._doubleTapDrag.emit(o,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:t}=e,n=Ut(t),s=this._pointerState.get(n),{pointerType:r}=t.native;if(s){const o=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),Mr(s.event.data,t)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:t}=e,{pointerType:n}=t.native,s=Ut(t),r=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),r);this._pointerState.set(s,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},Wm=class extends ie{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,t,n,s){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:t.buttons,timestamp:s,pointers:jm(this._activePointerMap),pointer:t,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){const t=e.native.pointerId,n=sn(this._activePointerMap).angle,s={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(t,s);const r=fn(s,Pl(this._activePointerMap));s.initialAngle=r,s.lastAngle=r,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const t=e.native.pointerId,n=this._activePointerMap.get(t);n?n.event=e:this._addPointer(e)}_removePointer(e){const t=sn(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(t)}_updatePointerAngles(e){const t=sn(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=fn(n,t)-e,n.lastAngle=fn(n,t)-e})}_emitEvent(e,t,n){const s=sn(this._activePointerMap);this._drag.emit(this._createPayload(e,t,s,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const t=e.data.native.pointerId,n=jn(e.timestamp);this._activePointerMap.get(t)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(t)):(this._removePointer(t),this._emitEvent("removed",e.data,jn(e.timestamp))))}_handlePointerDrag(e){const t=e.data,n=t.currentEvent,s=jn(e.timestamp);switch(t.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,s)):(this._addPointer(n),this._emitEvent("added",n,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Pl(i){const e=[];return i.forEach(t=>{e.push(me(t.event.x,t.event.y))}),qm(e)}function sn(i){const e=Pl(i);let t=0;return i.forEach(n=>{let s=fn(n,e),r=s-n.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;s=n.lastAngle+r,n.lastAngle=s;const o=s-n.initialAngle;t+=o}),t/=i.size||1,{angle:t,radius:e.radius,center:e.center}}function jm(i){const e=new Map;return i.forEach((t,n)=>e.set(n,t.event)),e}function fn(i,e){const t=i.event,n=t.x-e.center.x,s=t.y-e.center.y;return Math.atan2(s,n)}var Ko;(function(i){i[i.Left=0]="Left",i[i.Middle=1]="Middle",i[i.Right=2]="Right",i[i.Back=3]="Back",i[i.Forward=4]="Forward",i[i.Undefined=-1]="Undefined"})(Ko||(Ko={}));let Gm=class extends ie{constructor(e=$e.maximumDoubleClickDelay,t=$e.maximumDoubleClickDistance,n=$e.maximumDoubleTouchDelay,s=$e.maximumDoubleTouchDistance,r=Fn){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=t,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=s,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const t=e.data,n=Ut(t);if(!this._pointerState.has(n)){const s={downButton:t.native.button,immediateDoubleClick:null};this._pointerState.set(n,s),this.startCapturingPointer(t.native)}}_handlePointerUp(e){const t=e.data,n=Ut(t),s=this._pointerState.get(n);if(s&&s.downButton===t.native.button){const r=s.immediateDoubleClick;if(r){r.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Mr(r,e.data)>o?this._startImmediateDoubleClick(e,s):(this._immediateDoubleClick.emit(e.data,void 0,r.modifiers),this._removeState(t))}else this._startImmediateDoubleClick(e,s)}}_startImmediateDoubleClick(e,t){const n=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;t.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){const t=Ut(e);this._pointerState.delete(t),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const $i={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let Zm=class extends ie{constructor(e=$i.maximumClickDelay,t=$i.movementUntilMouseDrag,n=$i.movementUntilPenDrag,s=$i.movementUntilTouchDrag,r=$i.holdDelay,o=Fn){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=t,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=s,this._holdDelay=r,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",l=>{this._handlePointerLoss(l,"pointer-up")}),this.registerIncoming("pointer-capture-lost",l=>{this._handlePointerLoss(l,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",l=>{this._handlePointerLoss(l,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=rt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const t=e.data,n=t.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(n);if(o){if(!o.isDragging){const l=o.previousEvent;this._pointerHold.emit(l,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const r={startEvent:t,previousEvent:t,startTimestamp:e.timestamp,isDragging:!1,downButton:t.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(n,r),this.startCapturingPointer(t.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}_handlePointerMove(e){const t=e.data,n=t.native.pointerId,s=this._pointerState.get(n);s&&(s.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",s,t),void 0,s.modifiers):Bm(t,s.startEvent)>this._getDragThreshold(t.native.pointerType)&&this._startDragging(e),s.previousEvent=t)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const t=e.data,n=t.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=e.modifiers,s.isDragging=!0,n===s.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",s,t)):this._pointerDrag.emit(this._createPointerDragData("start",s,s.previousEvent),e.timestamp))})}_handlePointerLoss(e,t){const n=e.data,s=n.native.pointerId,r=this._pointerState.get(s);r&&(r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",r,t==="pointer-up"?n:r.previousEvent),void 0,r.modifiers):t==="pointer-up"&&r.downButton===n.native.button&&e.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(s),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};const rn={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let St=class extends L{constructor(){super(...arguments),this._handles=new xt}initialize(){const e=()=>{var t;return(t=this.view)==null?void 0:t.ready};this._handles.add([ot(()=>!e(),()=>this._disconnect()),ot(e,()=>this._connect())])}destroy(){this._handles=ae(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=ae(this._inputManager)}_connect(){const e=this.view.surface,t=new Al(e,this.view.input),n=[new Gm,new Zm,new Hm,new Wm(this.view.navigation),new Um],s=new De({eventSource:t,recognizers:n});s.installHandlers("prevent-context-menu",[new zm],It.INTERNAL),s.installHandlers("navigation",[new Fm(this.view),new Im(this.view),new Pm(this.view),new Wo(this.view),new Wo(this.view,[rn.counter]),new ym(this.view,"primary"),new xm(this.view,rn.pan),new Am(this.view,rn.zoom),new $m(this.view,rn.rotate),new vm(this.view,"secondary"),new _m(this.view,"touch")],It.INTERNAL),this.view.viewEvents.connect(s),this._source=t,this._inputManager=s,y(()=>{var r,o;return(o=(r=this.view)==null?void 0:r.navigation)==null?void 0:o.browserTouchPanEnabled},r=>{this._source&&(this._source.browserTouchPanningEnabled=!r)},V)}get test(){return{inputManager:this._inputManager}}};a([c()],St.prototype,"view",void 0),a([c()],St.prototype,"latestPointerType",null),a([c()],St.prototype,"latestPointerLocation",null),a([c()],St.prototype,"multiTouchActive",null),St=a([I("esri.views.2d.input.MapViewInputManager")],St);const Km=St;let Lt=class extends L{constructor(){super(...arguments),this.color=new Tt([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};a([c({type:Tt})],Lt.prototype,"color",void 0),a([c({type:Tt})],Lt.prototype,"haloColor",void 0),a([c()],Lt.prototype,"haloOpacity",void 0),a([c()],Lt.prototype,"fillOpacity",void 0),Lt=a([I("esri.views.2d.support.HighlightOptions")],Lt);const Fl=Lt,Ym=i=>i.includes("Brush");let Rl=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Ym(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function Qm(i,e,t,n,s,r,o,l){i.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let d=null;i.width!=null&&i.height!=null?d=[i.width,i.height]:i.width==null&&i.height!=null?d=[i.height,i.height]:i.width!=null&&i.height==null?d=[i.width,i.width]:i.width==null&&i.height==null&&(d=null);const h=t[0]-(n.left+n.right),u=t[1]-(n.top+n.bottom);let p,g,f=i.area||{x:0,y:0,width:h,height:u};if(d){const b=h/u,C=d[0]/d[1];if(C>b){const T=f.width/C;f={x:f.x,y:Math.round(f.y+(f.height-T)/2),width:f.width,height:Math.round(T)}}else{const T=f.height*C;f={x:Math.round(f.x+(f.width-T)/2),y:f.y,width:Math.round(T),height:f.height}}}else d=[f.width,f.height];return d[0]>f.width?(p=Math.min(d[0]/f.width,e),g=d[0]/f.width/p):(p=1,g=d[0]/f.width),{resolutionScale:p,cropArea:{x:Math.round((f.x+n.left)*p),y:Math.round((f.y+n.top)*p),width:Math.round(f.width*p),height:Math.round(f.height*p)},outputScale:g,format:s,quality:r,children:o,rotation:l}}function Xm(i,e,t){const{ctx:n,canvas:s}=Sl(i,t),r=n.getImageData(0,0,i.width,i.height),o=tg(s,e);return Ll(s),{dataUrl:o,data:r}}function Jm(i,e){const{ctx:t,canvas:n}=Sl(i,e),s=t.getImageData(0,0,i.width,i.height);return Ll(n),s}function Sl(i,e){const t=eg();e.premultipliedAlpha&&og(i),t.width=i.width,t.height=i.height;const n=t.getContext("2d",{willReadFrequently:!0});return n.putImageData(i,0,0),e.flipY&&rg(n),{ctx:n,canvas:t}}function Ll(i){i.width=0,i.height=0}function eg(){return P(ws)&&(ws=document.createElement("canvas")),ws}let ws=null;function tg(i,e){const t=ag[e.format],n=e.quality/100;return i.toDataURL(t,n)}function ig(i,e){const t=sg(i),n=cg[t];return{format:t,quality:yi(e??n,0,100)}}function ng(i,e){return e/Math.max(i[0],i[1])}function Oy(i,e,t,n=0,s=0,r=i.width-n,o=i.height-s,l=!1){const{data:d}=i,{width:h,height:u,data:p}=e,g=r/h,f=o/u,b=Math.ceil(g/2),C=Math.ceil(f/2),T=i.width;for(let F=0;F<u;F++)for(let N=0;N<h;N++){const D=4*(N+(l?u-F-1:F)*h);let W=0,J=0,ne=0,q=0,Gt=0,Yi=0;const bi=(F+.5)*f;for(let Zt=Math.floor(F*f);Zt<(F+1)*f;Zt++){const Qi=Math.abs(bi-(Zt+.5))/C,Zl=(N+.5)*g,Kl=Qi*Qi;for(let Xi=Math.floor(N*g);Xi<(N+1)*g;Xi++){const Ir=Math.abs(Zl-(Xi+.5))/b,Kt=Math.sqrt(Kl+Ir*Ir);if(Kt>=1)continue;let at=2*Kt*Kt*Kt-3*Kt*Kt+1;const Yt=4*(n+Xi+(s+Zt)*T);Yi+=at*d[Yt+3],J+=at,!t&&d[Yt+3]<255&&(at=at*d[Yt+3]/255),ne+=at*d[Yt],q+=at*d[Yt+1],Gt+=at*d[Yt+2],W+=at}}p[D]=ne/W,p[D+1]=q/W,p[D+2]=Gt/W,p[D+3]=Yi/J}return e}function sg(i){switch(i){case"png":case"jpg":case"jpeg":return i;default:return lg}}function rg(i){i.save(),i.globalCompositeOperation="copy",i.scale(1,-1),i.translate(0,-i.canvas.height),i.drawImage(i.canvas,0,0),i.restore()}function og(i){const e=i.data,t=e.length;for(let n=0;n<t;n+=4){const s=e[n+3];if(s!==255&&s>0){const r=255/s;e[n+0]=e[n+0]*r,e[n+1]=e[n+1]*r,e[n+2]=e[n+2]*r}}}const ag={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Yo=98,lg="png",cg={png:100,jpg:Yo,jpeg:Yo};function dg(i){const e=Sd(i);if(!e.available)return new $("webgl:required","WebGL is required but not supported.");if(i==="3d"&&e.majorPerformanceCaveat)return new $("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new $("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new $("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===Ld.WEBGL1){if(!e.supportsElementIndexUint)return new $("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new $("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new $("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function hg(i){return i&&"nodeType"in i}function ug(i){return i&&typeof i.render=="function"}const Qo={component:"esri-component"};let Dt=class extends L{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(Qo.component),t&&t.classList.remove(Qo.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||hg(e)?(this._set("widget",null),ya(e)):(ug(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};a([c({dependsOn:[]})],Dt.prototype,"id",null),a([c()],Dt.prototype,"node",null),a([ye("node")],Dt.prototype,"castNode",null),a([c({readOnly:!0})],Dt.prototype,"widget",void 0),Dt=a([I("esri.views.ui.Component")],Dt);const _n=Dt,pg={left:0,top:0,bottom:0,right:0},Dl={bottom:30,top:15,right:15,left:15},bs="manual",Ze="esri-ui",he={ui:Ze,corner:`${Ze}-corner`,innerContainer:`${Ze}-inner-container`,manualContainer:`${Ze}-manual-container`,cornerContainer:`${Ze}-corner-container`,topLeft:`${Ze}-top-left`,topRight:`${Ze}-top-right`,bottomLeft:`${Ze}-bottom-left`,bottomRight:`${Ze}-bottom-right`};function mg(i){return i&&!i._started&&typeof i.postMixInProperties=="function"&&typeof i.buildRendering=="function"&&typeof i.postCreate=="function"&&typeof i.startup=="function"}function Ms(i){const e=i,t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?i:null}function Is(i,{top:e,bottom:t,left:n,right:s}){i.style.top=e,i.style.bottom=t,i.style.left=n,i.style.right=s}let Ve=class extends Ln.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=Ea(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&Is(t,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&Is(t,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([y(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,V),y(()=>this.padding,this._applyUIPadding,V),y(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},V),ad(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(he.ui),qh(e),this._attachContainers(e)),t&&(t.classList.remove(he.ui),Is(t,{top:"",bottom:"",left:"",right:""}),va(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),n=t.top+t.bottom;return Math.max(e-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Dl,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),n=t.left+t.right;return Math.max(e-n,0)}add(e,t){let n,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const r=Ms(e);r&&({index:n,position:t,component:e,key:s}=r),t&&typeof t=="object"&&({index:n,key:s,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(s=>this.remove(s,t));const n=this._find(e);if(n){const s=this._componentToKey;if(s.has(e)&&s.get(e)!==t)return;const r=this._components.indexOf(n);return n.node.parentNode&&n.node.parentNode.removeChild(n.node),this._componentToKey.delete(e),this._components.splice(r,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,n)=>t.concat(n)):(e=e||bs)===bs?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(he.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(o=>this.move(o,t)),!e)return;let n;const s=Ms(e)||Ms(t);if(s&&(n=s.index,t=s.position,e=s.component||e),t&&!this._isValidPosition(t))return;const r=this.remove(e);r&&this.add(r,{position:t,index:n})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,s){e instanceof _n||(e=new _n({node:e})),this._place({component:e,position:t,index:n}),this._components.push(e),s&&this._componentToKey.set(e,s)}_find(e){return e?e instanceof _n?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||pg}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(he.innerContainer),e.classList.add(he.cornerContainer);const t=document.createElement("div");t.classList.add(he.innerContainer),t.classList.add(he.manualContainer);const n=document.createElement("div");n.classList.add(he.topLeft),n.classList.add(he.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(he.topRight),s.classList.add(he.corner),e.appendChild(s);const r=document.createElement("div");r.classList.add(he.bottomLeft),r.classList.add(he.corner),e.appendChild(r);const o=document.createElement("div");o.classList.add(he.bottomRight),o.classList.add(he.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=t;const l=qe();this._cornerNameToContainerLookup={"top-left":n,"top-right":s,"bottom-left":r,"bottom-right":o,"top-leading":l?s:n,"top-trailing":l?n:s,"bottom-leading":l?o:r,"bottom-trailing":l?r:o},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,n=e.position||bs,s=e.index,r=this._positionNameToContainerLookup[n],o=s!=null&&s>-1;if(mg(t.widget)&&t.widget.startup(),!o)return void r.appendChild(t.node);const l=Array.prototype.slice.call(r.children);if(s===0)return void(r.firstChild?Rr(t.node,r.firstChild):r.appendChild(t.node));s>=l.length?r.appendChild(t.node):Rr(t.node,l[s])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,n=null;return this._components.some(s=>(t=s===e,t&&(n=s),t)),n}_findById(e){let t,n=null;return this._components.some(s=>(t=s.id===e,t&&(n=s),t)),n}_findByNode(e){let t,n=null;return this._components.some(s=>(t=s.node===e,t&&(n=s),t)),n}};a([c()],Ve.prototype,"_locale",void 0),a([c()],Ve.prototype,"container",null),a([c()],Ve.prototype,"height",null),a([c({value:Dl})],Ve.prototype,"padding",null),a([ye("padding")],Ve.prototype,"castPadding",null),a([c()],Ve.prototype,"view",void 0),a([c()],Ve.prototype,"width",null),Ve=a([I("esri.views.ui.UI")],Ve);const gg=Ve;function Xo(i,e){return i&&"copyright"in i&&(!e||typeof i.originOf=="function"&&i.originOf("copyright")==="user")}function fg(i,e){return i.length!==e.length||i.some((t,n)=>t.text!==e[n].text)}function on(i,e,t){!t||!e||i.find(n=>n.layerView===e&&n.text===t)||i.push({text:t,layerView:e})}function _g(i){return i.type==="bing-maps"}const ct=[];let li=class extends ba{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new G,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const n=this.get("view.allLayerViews");n&&this.handles.add(n.map(s=>y(()=>{var r;return[s.suspended,(r=s.layer)==null?void 0:r.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),t&&t.removed&&t.removed.forEach(s=>{this._pendingAttributions.delete(s),this._fetchedAttributionData.delete(s)}),this._updateAttributionItems()},this.handles.add([Pe(()=>{var t;return(t=this.view)==null?void 0:t.allLayerViews},"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ot(()=>{var t;return((t=this.view)==null?void 0:t.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e==null?void 0:e.allLayerViews;ct.length=0,e&&t?(t.forEach(n=>{var o;if(n.suspended||!((o=n.layer)!=null&&o.attributionVisible))return;const s=n.layer;if(Xo(s,"user"))return void on(ct,n,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(n)){const l=this._fetchedAttributionData.get(n);return void(l?on(ct,n,this._getDynamicAttribution(l,e,s)):Xo(s)&&on(ct,n,s.copyright))}return void this._fetchAttributionData(n)}const r=s.get("portalItem.accessInformation");on(ct,n,r||s.copyright)}),fg(this.items,ct)&&(this.items.removeAll(),this.items.addMany(ct)),ct.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await fd(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=t.ok?this._createContributionIndex(t.value,_g(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,t){const n=e.contributors,s={};if(!n)return s;for(let r=0;r<n.length;r++){const o=n[r],l=o.coverageAreas;if(!l)return;for(const d of l){const h=d.bbox,u=d.zoomMin-(t&&d.zoomMin?1:0),p=d.zoomMax-(t&&d.zoomMax?1:0),g={xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:Js.WGS84},f={extent:ha(g),attribution:o.attribution||"",score:d.score!=null?d.score:100,id:r};for(let b=u;b<=p;b++)s[b]=s[b]||[],s[b].push(f)}}return s.maxKey=Math.max.apply(null,Object.keys(s)),s}_getDynamicAttribution(e,t,n){var u;const{extent:s,scale:r}=t;let o=((u=n.tileInfo)==null?void 0:u.scaleToZoom(r))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!s||o==null||o<=-1)return"";const l=e[o],d=gc(s.center.clone().normalize(),t.spatialReference),h={};return l?l.filter(p=>{const g=p.id,f=!h[g]&&d&&p.extent&&pa(p.extent,d);return f&&(h[g]=!0),f}).sort((p,g)=>g.score-p.score||p.objectId-g.objectId).map(p=>p.attribution).join(", "):""}};a([c({readOnly:!0,type:G})],li.prototype,"items",void 0),a([c({readOnly:!0})],li.prototype,"state",null),a([c()],li.prototype,"view",void 0),li=a([I("esri.widgets.Attribution.AttributionViewModel")],li);const Ol=li,ti="esri-attribution",dt={base:`${ti} esri-widget`,poweredBy:`${ti}__powered-by`,sources:`${ti}__sources`,open:`${ti}--open`,sourcesOpen:`${ti}__sources--open`,link:`${ti}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let pe=class extends ce{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.iconClass=dt.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Ol}initialize(){this.addHandles(Pe(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[dt.open]:this._isOpen};return m("div",{bind:this,class:this.classes(dt.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return m("div",{class:dt.poweredBy},"Powered by"," ",m("a",{class:dt.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,n=t?"0":"",{attributionText:s}=this,r={[dt.sourcesOpen]:e,[dt.interactive]:t};return m("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(dt.sources,r),innerHTML:s,tabindex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1;const{clientHeight:n,clientWidth:s,scrollWidth:r}=e,o=r>s,l=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,l&&(t=!0),this._isOpen){const d=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,d&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};a([c()],pe.prototype,"_isOpen",void 0),a([c()],pe.prototype,"_isInteractive",null),a([c()],pe.prototype,"_attributionTextOverflowed",void 0),a([c()],pe.prototype,"_prevSourceNodeHeight",void 0),a([c({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],pe.prototype,"attributionText",null),a([c()],pe.prototype,"iconClass",void 0),a([c()],pe.prototype,"itemDelimiter",void 0),a([c()],pe.prototype,"label",null),a([c(),le("esri/widgets/Attribution/t9n/Attribution")],pe.prototype,"messages",void 0),a([c()],pe.prototype,"view",null),a([c({type:Ol})],pe.prototype,"viewModel",void 0),a([Ee()],pe.prototype,"_toggleState",null),pe=a([I("esri.widgets.Attribution")],pe);const yg=pe,vg="esri.widgets.CompassViewModel";let Ot=class extends rl(L){constructor(e){super(e),this._handles=new xt,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(y(()=>this.view,this._updateRotationWatcher,V))}destroy(){rt(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var t;if(!this.get("view.ready"))return;const e={};((t=this.view)==null?void 0:t.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?y(()=>e==null?void 0:e.rotation,this._updateForRotation,V):y(()=>e==null?void 0:e.camera,this._updateForCamera,V))}};a([c({readOnly:!0})],Ot.prototype,"canShowNorth",null),a([c()],Ot.prototype,"orientation",void 0),a([c({readOnly:!0})],Ot.prototype,"state",null),a([c()],Ot.prototype,"view",void 0),Ot=a([I(vg)],Ot);const Vl=Ot,ht={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let Ne=class extends ce{constructor(e,t){super(e,t),this.iconClass=ht.widgetIcon,this.messages=null,this.viewModel=new Vl}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,n=t==="disabled",s=(t==="rotation"?"rotation":"compass")=="compass",r=n?-1:0,o={[ht.disabled]:n,[ht.interactive]:!n},l={[ht.northIcon]:s,[ht.rotationIcon]:!s},{messages:d}=this;return m("div",{bind:this,class:this.classes(ht.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:r,"aria-label":d.reset,title:d.reset},m("span",{"aria-hidden":"true",class:this.classes(ht.icon,l),styles:this._toRotationTransform(e)}),m("span",{class:ht.text},d.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};a([c()],Ne.prototype,"goToOverride",null),a([c()],Ne.prototype,"iconClass",void 0),a([c()],Ne.prototype,"label",null),a([c(),le("esri/widgets/Compass/t9n/Compass")],Ne.prototype,"messages",void 0),a([c()],Ne.prototype,"view",null),a([c({type:Vl})],Ne.prototype,"viewModel",void 0),a([Ee()],Ne.prototype,"_reset",null),Ne=a([I("esri.widgets.Compass")],Ne);const wg=Ne,ii="esri-navigation-toggle",Ce={base:`${ii} esri-widget`,button:`${ii}__button esri-widget--button`,activeButton:`${ii}__button--active`,panButton:`${ii}__button--pan`,rotateButton:`${ii}__button--rotate`,isLayoutHorizontal:`${ii}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let ci=class extends L{constructor(i){super(i),this.navigationMode="pan",this.view=null}initialize(){this.own(ot(()=>{var i;return(i=this.view)==null?void 0:i.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var i;return this.get("view.ready")&&((i=this.view)==null?void 0:i.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};a([c({readOnly:!0})],ci.prototype,"state",null),a([c()],ci.prototype,"navigationMode",void 0),a([c()],ci.prototype,"view",void 0),ci=a([I("esri.widgets.NavigationToggleViewModel")],ci);const Nl=ci;let ze=class extends ce{constructor(e,t){super(e,t),this.iconClass=Ce.widgetIcon,this.messages=null,this.viewModel=new Nl}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",n={[Ce.disabled]:e,[Ce.isLayoutHorizontal]:this.layout==="horizontal"},s={[Ce.activeButton]:t},r={[Ce.activeButton]:!t},o=e?-1:0,l=this.messages.toggle;return m("div",{bind:this,class:this.classes(Ce.base,n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":l,title:l},m("div",{class:this.classes(Ce.button,Ce.panButton,s)},m("span",{class:Ce.panIcon})),m("div",{class:this.classes(Ce.button,Ce.rotateButton,r)},m("span",{class:Ce.rotationIcon})))}_toggle(){this.toggle()}};a([c()],ze.prototype,"iconClass",void 0),a([c()],ze.prototype,"label",null),a([c({value:"vertical"})],ze.prototype,"layout",null),a([c(),le("esri/widgets/NavigationToggle/t9n/NavigationToggle")],ze.prototype,"messages",void 0),a([c()],ze.prototype,"view",null),a([c({type:Nl})],ze.prototype,"viewModel",void 0),a([Ee()],ze.prototype,"_toggle",null),ze=a([I("esri.widgets.NavigationToggle")],ze);const bg=ze,Ai={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let vt=class extends ce{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const i=this.enabled?0:-1,e={[Ai.disabled]:!this.enabled,[Ai.interactive]:this.enabled},t={[this.iconClass]:!!this.iconClass};return m("div",{bind:this,class:this.classes(Ai.button,e),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:i,title:this.title},m("span",{"aria-hidden":"true",role:"presentation",class:this.classes(Ai.icon,t)}),m("span",{class:Ai.iconText},this.title))}_triggerAction(){this.action.call(this)}};a([c()],vt.prototype,"action",void 0),a([c()],vt.prototype,"enabled",void 0),a([c()],vt.prototype,"iconClass",void 0),a([c()],vt.prototype,"title",void 0),a([Ee()],vt.prototype,"_triggerAction",null),vt=a([I("esri.widgets.IconButton")],vt);const Jo=vt;let di=class extends L{get canZoomIn(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMaxScale");return e===0||i>e}get canZoomOut(){if(!this.get("view.ready"))return!1;const i=this.get("view.animation.target.scale")||this.get("view.scale"),e=this.get("view.constraints.effectiveMinScale");return e===0||i<e}};a([c({readOnly:!0})],di.prototype,"canZoomIn",null),a([c({readOnly:!0})],di.prototype,"canZoomOut",null),a([c()],di.prototype,"view",void 0),di=a([I("esri.widgets.Zoom.ZoomConditions2D")],di);const Mg=di;let hi=class extends L{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};a([c({readOnly:!0})],hi.prototype,"canZoomIn",null),a([c({readOnly:!0})],hi.prototype,"canZoomOut",null),a([c()],hi.prototype,"view",void 0),hi=a([I("esri.widgets.Zoom.ZoomConditions3D")],hi);const Ig=hi;let wt=class extends L{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return v(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return v(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Mg({view:e}):e.type==="3d"&&(this._zoomConditions=new Ig({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Ni(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Ni(e.goTo({zoomFactor:.5}))}};a([c()],wt.prototype,"_zoomConditions",void 0),a([c()],wt.prototype,"canZoomIn",null),a([c()],wt.prototype,"canZoomOut",null),a([c({readOnly:!0})],wt.prototype,"state",null),a([c()],wt.prototype,"view",null),wt=a([I("esri.widgets.Zoom.ZoomViewModel")],wt);const zl=wt,ki={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Je=class extends ce{constructor(e,t){super(e,t),this.iconClass=ki.widgetIcon,this.messages=null,this.viewModel=new zl}initialize(){this._zoomInButton=new Jo({action:this.zoomIn.bind(this),iconClass:ki.zoomInIcon}),this._zoomOutButton=new Jo({action:this.zoomOut.bind(this),iconClass:ki.zoomOutIcon})}destroy(){this._zoomInButton=ae(this._zoomInButton),this._zoomOutButton=ae(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,t={[ki.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:s}=e;this._zoomInButton.enabled=n,this._zoomOutButton.enabled=s;const{zoomIn:r,zoomOut:o}=this.messages;return this._zoomInButton.title=r,this._zoomOutButton.title=o,m("div",{class:this.classes(ki.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};a([c()],Je.prototype,"iconClass",void 0),a([c()],Je.prototype,"label",null),a([c({value:"vertical"})],Je.prototype,"layout",null),a([c(),le("esri/widgets/Zoom/t9n/Zoom")],Je.prototype,"messages",void 0),a([c()],Je.prototype,"view",null),a([c({type:zl})],Je.prototype,"viewModel",void 0),Je=a([I("esri.widgets.Zoom")],Je);const Cg=Je;function Tg(i){return i&&i.view!==void 0}let yn=class extends gg{constructor(i){super(i),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([y(()=>this.components,this._componentsWatcher.bind(this),V),y(()=>this.view,this._updateViewAwareWidgets.bind(this),V)])}_add(i,e,t,n){let s=i;if(typeof i=="string"&&this._defaultPositionLookup[i]){if(this._find(i))return;s=this._createComponent(i)}super._add(s,e,t,n)}_removeComponents(i){i.forEach(e=>{const t=this._find(e);t&&(this.remove(t),t.destroy())})}_updateViewAwareWidgets(i){this.components.forEach(e=>{const t=this._find(e),n=t&&t.widget;Tg(n)&&(n.view=i)})}_componentsWatcher(i,e){this._removeComponents(e),this._addComponents(i),this._adjustPadding(i)}_adjustPadding(i){if(!i.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(i){this.constructed&&i.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(i){const e=this._createWidget(i);if(e)return new _n({id:i,node:e})}_createWidget(i){return i==="attribution"?this._createAttribution():i==="compass"?this._createCompass():i==="navigation-toggle"?this._createNavigationToggle():i==="zoom"?this._createZoom():void 0}_createAttribution(){return new yg({view:this.view})}_createCompass(){return new wg({view:this.view})}_createNavigationToggle(){return new bg({view:this.view})}_createZoom(){return new Cg({view:this.view})}};a([c()],yn.prototype,"components",void 0),yn=a([I("esri.views.ui.DefaultUI")],yn);const Eg=yn;let vn=class extends Eg{constructor(i){super(i),this.components=["attribution","zoom"]}};a([c()],vn.prototype,"components",void 0),vn=a([I("esri.views.ui.2d.DefaultUI2D")],vn);const Bl=vn;var Ys;let wn=Ys=class extends ji{constructor(i){super(i),this.color=new Tt([0,0,0,1])}clone(){return new Ys(Es({color:this.color}))}};a([c({type:Tt,json:{write:!0}})],wn.prototype,"color",void 0),wn=Ys=a([I("esri.webmap.background.ColorBackground")],wn);const xg=wn;let ql,Hl,Ul,Wl,jl,Gl;async function $g(){const[,{GraphicsView2D:i,GraphicContainer:e,LabelManager:t,MapViewNavigation:n,MagnifierView2D:s,Stage:r}]=await Promise.all([w(()=>import("./webglDeps-b5b07d1b.js"),["./webglDeps-b5b07d1b.js","./VertexArrayObject-2b4e90de.js","./Error-9392329b.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./ProgramTemplate-b518276b.js","./programUtils-aa53d847.js","./NestedMap-1b5db22e.js"],import.meta.url),w(()=>import("./mapViewDeps-2a907b4c.js"),["./mapViewDeps-2a907b4c.js","./Error-9392329b.js","./string-bf9c68ed.js","./typedArrayUtil-c81d173a.js","./promiseUtils-3ce2a460.js","./cast-4d1aa82d.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./mat3f32-6c416b1c.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./MagnifierPrograms-8dd46823.js","./_commonjsHelpers-2f3e7994.js","./WGLContainer-12d66f96.js","./definitions-19bfb61c.js","./VertexArrayObject-2b4e90de.js","./Texture-5c56cee1.js","./mathUtils-505ef34b.js","./context-util-2fc70f17.js","./enums-64ab819c.js","./VertexElementDescriptor-2925c6af.js","./color-349a3ca2.js","./enums-4b2a86a0.js","./enums-b1d611e3.js","./ProgramTemplate-b518276b.js","./MaterialKey-8f458904.js","./utils-45a97d77.js","./screenUtils-7afeb41c.js","./heatmapUtils-74b8fd48.js","./vec4f64-aa64c7e9.js","./Color-46910694.js","./colorUtils-639f4d25.js","./StyleDefinition-7d58136b.js","./vec2f32-eaf29605.js","./config-1337d16e.js","./GeometryUtils-dd03fc25.js","./Container-782a7f3a.js","./parser-7deabd3b.js","./mat4-63147b80.js","./Evented-d69b5d66.js","./reactiveUtils-989a8d7f.js","./earcut-61f7b102.js","./vec2-3a431caf.js","./vec2f64-22afc56f.js","./featureConversionUtils-93a98860.js","./aaBoundingBox-55a55434.js","./Extent-52b65909.js","./aaBoundingRect-062d7c89.js","./jsonUtils-e2434b33.js","./Polyline-7f90e3cc.js","./OptimizedFeature-6361f5d1.js","./OptimizedFeatureSet-1d1ac4b9.js","./ExpandedCIM-23a9d4d0.js","./fieldUtils-c41301b0.js","./geometry-8c15a791.js","./typeUtils-f38bdb16.js","./BidiEngine-836b7ef6.js","./GeometryUtils-53652037.js","./mat2d-795519e1.js","./Rect-ea14f53a.js","./quantizationUtils-54fe414b.js","./floatRGBA-90587fc5.js","./rasterizingUtils-70e51e90.js","./pbf-9196f6ce.js","./imageutils-47b76771.js","./Matcher-38d3d28c.js","./TileStrategy-cb3a7d25.js","./TileStore-4f504952.js","./Queue-4939205d.js","./TileKey-3acb01a1.js","./rbush-f2a85c98.js","./quickselect-56c5966e.js","./Query-8c2b9d22.js","./TimeExtent-0fb637c6.js","./enumeration-de0a766e.js","./Field-899dc481.js","./fieldType-68c65bf7.js","./Clonable-ad03ca71.js","./visualVariablesUtils-f202191f.js","./visualVariablesUtils-904a1f06.js","./tileUtils-c2f19f52.js","./TurboLine-14d34b25.js","./assets-86d142ff.js","./defaultsJSON-b087dd4d.js","./LRUCache-7d328c48.js","./MemCache-c220a92a.js","./devEnvironmentUtils-5002a058.js","./Portal-fe1a007c.js","./Loadable-e19fba09.js","./Promise-24c50191.js","./locale-30120714.js","./PortalGroup-45834c06.js","./PortalUser-8de15b25.js","./persistableUrlUtils-abff3ce1.js","./styleUtils-6ef1c49e.js","./CircularArray-040b84c7.js","./webgl-debug-b1f7a2c5.js","./HandleOwner-1ffa4597.js","./FeatureSetReader-a6554301.js","./arcadeTimeUtils-a56a27c9.js","./executionError-fb3f283a.js","./datetime-b6333958.js","./FieldsIndex-b8dc9788.js","./TimeReference-d5a14980.js","./centroid-85944438.js","./lengthUtils-320ae102.js","./sizeVariableUtils-d4870b0d.js","./BufferPool-eeecbea6.js","./enums-fb086c25.js","./programUtils-aa53d847.js","./NestedMap-1b5db22e.js","./RenderingContext-075c3eb6.js","./OrderIndependentTransparency-e1b3a745.js","./basicInterfaces-b7051eb1.js","./doublePrecisionUtils-e3c3d0d8.js","./mat3-5b850236.js","./imageUtils-c2d0d1ae.js","./GraphicsView2D-c3e93aa6.js","./normalizeUtilsSync-87c5ef07.js","./normalizeUtilsCommon-42c6cdb7.js","./projectionSupport-6e748f70.js","./projection-03688518.js","./SimpleObservable-7e8b69a3.js","./zscale-92e5f59b.js","./json-48e3ea08.js","./labelingInfo-8ec658bf.js","./symbols-426355d5.js","./CIMSymbol-33f517af.js","./opacityUtils-a1e441cd.js","./Collection-54857936.js","./collectionUtils-cc5781ab.js","./labelUtils-4db1d7ec.js","./layerUtils-394e7a48.js","./jsonUtils-dfa282b7.js","./AttributeStoreView-dcb739c3.js","./TiledDisplayObject-76821229.js","./schemaUtils-d9e5d320.js","./serviceCapabilitiesUtils-2296548c.js","./arcgisLayerUrl-824ee458.js","./diffUtils-ba6273ab.js","./createSymbolSchema-8b7065b5.js","./rendererUtils-90c6d352.js","./capabilities-55572a33.js","./FeatureReductionLayer-a890a60c.js","./BlendLayer-1f4ade52.js","./PopupTemplate-7c042eda.js","./number-b98554af.js","./Identifiable-a49d7533.js","./UniqueValueRenderer-adb2594e.js","./LegendOptions-6e5321d3.js","./colorRamps-6cc98f16.js","./Graphic-b6696507.js","./compilerUtils-db2fe354.js","./jsonUtils-714f7856.js","./DictionaryLoader-7f74ef6b.js","./deprecate-0efb6d09.js","./OperationalLayer-70e0771f.js","./ElevationInfo-5422702b.js","./util-54b675a7.js","./ComputedAttributeStorage-8962ca7e.js","./normalizeUtils-08ce1e14.js","./GraphicContainer-3637f3e4.js","./BaseGraphicContainer-1eb25f25.js","./FeatureContainer-2988c992.js","./TileContainer-04cf618b.js","./vec3f32-ad1dc57f.js","./asyncUtils-d59cad3c.js","./requestImageUtils-fb316d8d.js","./Basemap-5520ad34.js","./loadAll-8b24919b.js","./PortalItem-d79345ac.js","./messages-57170cca.js","./writeUtils-9e2bb9d7.js","./CollectionFlattener-8de7cbfd.js","./TablesMixin-54823533.js","./Layer-5bf3596f.js","./Cyclical-e9c94d8a.js","./workers-9e1006b9.js","./Connection-da262054.js","./intl-45f8f1a9.js","./TileInfo-3f2956cd.js","./widget-b2a8e375.js","./uuid-73213768.js","./byteSizeEstimations-90c5a50d.js","./AttachmentInfo-12f14212.js","./AttachmentQuery-dffd8fdc.js","./utils-285aaf9a.js","./ItemCache-28393d1d.js","./executeQueryJSON-ad10aa61.js","./query-b41db307.js","./pbfQueryUtils-718fed42.js","./queryZScale-22ca074d.js","./FeatureSet-a47eef0a.js","./RelationshipQuery-80632d4c.js","./TopFeaturesQuery-e56e9bfe.js","./FeatureLayer-3b171605.js","./MultiOriginJSONSupport-55da1d06.js","./FeatureLayerBase-ed16c570.js","./HeightModelInfo-a5f98ab4.js","./editsZScale-9447610d.js","./APIKeyMixin-35aced10.js","./ArcGISService-78831401.js","./CustomParametersMixin-6e258788.js","./EditBusLayer-f379d91e.js","./OrderedLayer-9994883c.js","./PortalLayer-d4941bb0.js","./portalItemUtils-9126718d.js","./RefreshableLayer-2dcbbf25.js","./ScaleRangeLayer-a6967062.js","./TemporalLayer-76f9669f.js","./FeatureTemplate-136fba4c.js","./FeatureType-f3fd3327.js","./fieldProperties-cf15bacb.js","./versionUtils-0602c916.js","./styleUtils-30cd950e.js","./popupUtils-eff4732c.js","./Scheduler-05bc8017.js","./GraphicsCollection-6cd24d14.js","./ViewingMode-fb6259a5.js","./unitBezier-881ac1eb.js","./WebTileLayer-cf969b4c.js","./imageBitmapUtils-86f741ce.js","./index-0970c694.js","./index-90ccc7e2.css"],import.meta.url)]);Hl=i,Ul=e,Wl=t,jl=n,Gl=s,ql=r}const ea=160;function Ag(i){return i&&i.declaredClass==="esri.Viewpoint"}let k=class extends Qd(_p(yp(Np))){constructor(i){super(i),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new bn({getCollections:()=>{var e,t;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,this.layerViews,(t=this.basemapView)==null?void 0:t.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new dm(this),this._pePromise=null,this.floors=new G,this.highlightOptions=new Fl,this.inputManager=new Km({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new Rl,this.type="2d",this.ui=new Bl,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new $l,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([y(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(ea)},qi),this.on("resize",e=>this._resizeHandler(e)),y(()=>{var e;return(e=this.animationManager)==null?void 0:e.animation},e=>{this.animation=e})]),Fc()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Fd(this.featuresTilingScheme)}get initialExtentRequired(){var o;const{scale:i,constraints:e,center:t,viewpoint:n,extent:s}=this;let r=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((o=this.map.initialViewProperties)!=null&&o.viewpoint))&&!s&&(e!=null&&e.effectiveLODs||(r=-1),(!t||i===0&&r===-1)&&(!n||!v(n.targetGeometry)||n.targetGeometry.type!=="extent"&&!n.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!Hi()||(this._pePromise||(this._pePromise=On().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const i=this._getDefaultViewpoint();if(!i)return!1;const e=this.spatialReference,t=Ie(i.targetGeometry);return!!Dn(t.spatialReference,e)||this._projectionEngineLoaded}set animation(i){const e=this._get("animation");if(i===e)return;if(e&&e.stop(),!i||i.isFulfilled())return void this._set("animation",null);this._set("animation",i),this.frameTask.animationInProgress=!0;const t=()=>{var n;i===this._get("animation")&&(this._set("animation",null),(n=this.frameTask)==null||n.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};i.when(t,t)}get background(){return Pg(this.map)?this.map.initialViewProperties.background:null}set background(i){this._override("background",i)}get center(){if(!this.ready)return this._get("center");const{center:i,spatialReference:e}=this.state.paddedViewState;return new X({x:i[0],y:i[1],spatialReference:e})}set center(i){if(i==null)return;if(!this.ready)return this._set("center",i),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(n){return void S.getLogger(this.declaredClass).error(new $("mapview:invalid-center","could not project the value in the view's spatial reference",{input:i,error:n}))}const t=this.viewpoint;Hs(t,t,e),this.viewpoint=t}set constraints(i){const e=this._get("constraints");e&&(this.handles.remove("map-view-constraints"),e.destroy()),this._set("constraints",i),i&&(i.view=this,this.ready&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint)),this.handles.add(y(()=>i.version,()=>{this.ready&&this.state&&(this.state.viewpoint=i.fit(this.state.paddedViewState.viewpoint))},qi),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(i){if(i==null)return;if(!i.width||!i.height)return void S.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",i),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let e;try{e=this._project(i,this.spatialReference)}catch(n){return void S.getLogger(this.declaredClass).error(new $("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:n}))}const t=this.viewpoint;Zp(t,t,e,this.size,{constraints:this.constraints}),this.viewpoint=t}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(i){this.ready?(this.state.padding=i,this._set("padding",this.state.padding)):this._set("padding",i)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(i){if(isNaN(i))return;if(!this.ready)return void this._set("rotation",i);const e=this.viewpoint;om(e,e,i),this.viewpoint=e}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(i){if(!i||isNaN(i))return;if(!this.ready){this._set("scale",i),this._set("zoom",-1);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}const e=this.viewpoint;Bo(e,e,i),this.viewpoint=e}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var e,t,n;const i=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(xe("esri-2d-log-updating")){const s=this.allLayerViews.reduce((r,o)=>({...r,[o.layer.id]:!o.destroyed&&!("layerViews"in o)&&o.updating}),{});console.log(`Updating MapView: ${i}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(e=this.layerViewManager)==null?void 0:e.updating}
-> labelManager.updating: ${(t=this.labelManager)==null?void 0:t.updating}
-> graphicsView.updating: ${(n=this.graphicsView)==null?void 0:n.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return i}get viewpoint(){if(!this.ready)return this._get("viewpoint");const i=this.state.paddedViewState;return i&&i.viewpoint.clone()}set viewpoint(i){if(i==null)return;if(!this.ready)return this._set("viewpoint",i),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let e,t;try{e=this._project(i,this.spatialReference),!i.scale||isNaN(i.scale)?t=new $("mapview:invalid-viewpoint",`invalid scale value of ${i.scale}`):P(i.targetGeometry)&&(t=new $("mapview:invalid-viewpoint","geometry not defined"))}catch(s){t=new $("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(t)return void S.getLogger(this.declaredClass).error(t);this._scaleBeforeChangingSpatialReference=null;const n=new He({targetGeometry:new X,scale:0,rotation:0});Fe(n,e),this.constraints.constrain(n,this.state.paddedViewState.viewpoint),this.state.viewpoint=n,this.frameTask.requestFrame(),this._set("viewpoint",n)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(i){if(i==null)return;if(!this.ready){this._set("zoom",i),this._set("scale",0);const t=this._get("extent");return t&&(this._set("extent",null),this._set("center",t.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const e=this.viewpoint;Bo(e,e,this.constraints.zoomToScale(i)),this.viewpoint=e,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(i,e){if(i)return this.animation&&(this.animation=null),this._createAnimation(),er(()=>this.ready,e).then(()=>{var s;const t={animate:!0,...e},n=Wp(i,this);return(s=this.animation)==null||s.update(n),this._gotoTask={},t.animate?this._gotoAnimated(n,t):this._gotoImmediate(n,t)});S.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(i,e){const t=Do(i)?Lo(this,i):i;if(!this.ready||isNaN(t.x)||isNaN(t.y))return{screenPoint:t,results:[]};let n=new Set,s=!1,r=null,o=null;e!=null&&e.include?ia(e.include,ta(this,u=>n.add(u),u=>{r||(r=new Set),r.add(u)},u=>n.add(u),()=>s=!0)):(s=!0,n=new Set(this.allLayerViews)),e!=null&&e.exclude&&ia(e.exclude,ta(this,u=>n.delete(u),u=>{o||(o=new Set),o.add(u)}));const l=this.allLayerViews.filter(u=>!u.suspended&&n.has(u)).reverse(),d=this.toMap(t);let h=[...s?this.graphicsView.hitTest(d).map(u=>({type:"graphic",graphic:u,layer:null,mapPoint:d})):[],...await Promise.all(l.map(u=>u.hitTest(d,t)).toArray())].filter(v).flat().filter(v);return r&&(h=h.filter(u=>!("graphic"in u)||!u.graphic||(r==null?void 0:r.has(Qs(u.graphic))))),o&&(h=h.filter(u=>!("graphic"in u)||!u.graphic||(o==null?void 0:o.has(Qs(u.graphic))))),{screenPoint:t,results:h}}async takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Xm(t,{format:e.format,quality:e.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(i){const e=this._createScreenshotPlan(i),t=await this._stage.takeScreenshot(e);return Jm(t,this._pixelFormat)}_createScreenshotPlan(i){i=i??{};const e=this.supersampleScreenshotsEnabled?Math.min(4,ng(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let t;i.layers?(t=[],i.layers.forEach(r=>{const o=this.allLayerViews.find(l=>l.layer.id===r.id);o&&"container"in o&&o.container&&t.push(o.container)})):t=this._stage.children;const{format:n,quality:s}=ig(i.format,i.quality);return Qm(i,e,this.size,this.padding,n,s,t,i.rotation)}get test(){return{takeScreenshot:i=>this._takeScreenshot(i)}}toMap(i){if(!this.ready)return null;const e=Do(i)?Lo(this,i):i,t=[0,0],[n,s]=this.state.toMap(t,[e.x,e.y]),r=this.spatialReference;return new X({x:n,y:s,spatialReference:r})}toScreen(i){if(!this.ready)return null;const e=this._project(i,this.spatialReference),t=[e.x,e.y];return this.state.toScreen(t,t),me(t[0],t[1])}on(i,e,t,n){return this.inputManager&&this.viewEvents.on(i,e,t,n)||super.on(i,e)}hasEventListener(i){return super.hasEventListener(i)||this.viewEvents.hasHandler(i)}whenLayerView(i){return super.whenLayerView(i)}graphicChanged(i){this.graphicsView&&this.graphicsView.graphicUpdateHandler(i)}whenReady(){return new Promise(i=>{this.ready?i(this):this._resolveWhenReady.push(i)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var i,e,t;return this.map&&"initialViewProperties"in this.map&&((e=(i=this.map)==null?void 0:i.initialViewProperties)==null?void 0:e.spatialReference)||((t=this.defaultsFromMap)==null?void 0:t.spatialReference)||null}hasLayerViewModule(i){return Ho.hasLayerViewModule(i)}importLayerView(i){return Ho.importLayerView(i)}pixelSizeAt(){return this.ready?this.state.resolution:(S.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(i){return this.hitTest(i).then(e=>({...e,mapPoint:this.toMap(i)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let i=dg(this.type);return xe("safari")&&xe("safari")<9&&(i=new $("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:xe("safari")})),v(i)?(S.getLogger(this.declaredClass).warn("#validate()",i.message),Promise.reject(i)):$g()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new qs),this.animation}_cancellableGoTo(i,e,t){const n=()=>i===this._gotoTask,s=t.then(()=>{n()&&(this.animation=null)}).catch(o=>{throw n()&&(e&&!e.done&&(e.stop(),this.frameTask.animationInProgress=!1),this.animation=null),o}),r=new Promise(o=>o(s));return e.when().catch(()=>{n()&&r.cancel&&r.cancel()}),r}_gotoImmediate(i,e){const t=this._gotoTask,n=this.animation,s=i.then(r=>{if(nt(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");this.viewpoint=n.target=r,n.finish()});return this._cancellableGoTo(t,n,s)}_flipStationary(i){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const e=performance.now()-this._lastStationaryEventTimestamp;e<ea&&(this._stationaryTimer=this._flipStationary(e))},i)),this._stationaryTimer}_getDefaultViewpoint(){var T,F,N,D;const{constraints:i,initialExtent:e,map:t,padding:n,size:s}=this;if(!i)return null;const r=t&&"initialViewProperties"in t?t.initialViewProperties:void 0,o={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};i.effectiveLODs?o.zoom!==-1&&(o.scale=i.zoomToScale(o.zoom)):o.zoom=-1;let l=null,d=null,h=0;const u=o.viewpoint&&o.viewpoint.rotation,p=o.viewpoint&&o.viewpoint.targetGeometry;v(p)&&(p.type==="extent"?l=p:p.type==="point"&&(d=p,h=o.viewpoint.scale));const g=o.extent||l||((F=Ie((T=r==null?void 0:r.viewpoint)==null?void 0:T.targetGeometry))==null?void 0:F.extent)||e,f=o.center||d||(g==null?void 0:g.center),b=o.scale||h||((N=r==null?void 0:r.viewpoint)==null?void 0:N.scale)||g&&Bi(g,[s[0]-n.left-n.right,s[1]-n.top-n.bottom]),C=o.rotation||u||((D=r==null?void 0:r.viewpoint)==null?void 0:D.rotation)||0;return f&&b?new He({targetGeometry:f,scale:b,rotation:C}):null}_gotoAnimated(i,e){const t=this._gotoTask,n=this.animation;if(!n)return Promise.resolve();const s=i.then(r=>{if(nt(e),t!==this._gotoTask)throw new $("view:goto-interrupted","Goto was interrupted");return n.update(r),this.animationManager.animate(n,this.viewpoint,e),n.when().then(()=>{},()=>{})});return this._cancellableGoTo(t,n,s)}_project(i,e){var s;const t=i&&i.targetGeometry||i;if(!e)return i;if(!t)return null;if(e.imageCoordinateSystem||(s=t.spatialReference)!=null&&s.imageCoordinateSystem||Sn(e,t.spatialReference))return i;const n=Gi(t,e);if(!n)throw new $("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:t,spatialReference:e});return Ag(i)?(i.targetGeometry=n,i):n}_resizeHandler(i){if(!this.ready)return;const e=this.state;let t=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();e.size=[i.width,i.height],rm(t,t,n,this.state.paddedViewState.size,this.resizeAlign),t=this.constraints.constrain(t,void 0),this.state.viewpoint=t}_startup(){var l,d;this.timeline.begin("MapView Startup");const i=this._getDefaultViewpoint(),e=i.targetGeometry;try{this._project(i,this.spatialReference)}catch(h){S.getLogger(this.declaredClass).warn(new Tr("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:e.toJSON(),spatialReference:this.spatialReference,error:h})),i.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new X({x:0,y:0,spatialReference:this.spatialReference})}(d=this.constraints)==null||d.fit(i),this._set("state",new fm({padding:this._get("padding"),size:this.size,viewpoint:i})),this.graphics.owner=this;const t=new ql(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=t,this._magnifierView=new Gl,this._magnifierView.magnifier=this.magnifier;const n=new Wl({view:this});this._set("labelManager",n);const s=new cm({view:this});this._set("animationManager",s);const r=new jl({view:this,animationManager:s});this._set("mapViewNavigation",r),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",h=>this.fatalError=h.error),y(()=>this.stationary,h=>t.stationary=h,kt),y(()=>this.background,h=>{t.background=h,this._magnifierView.background=h},kt),y(()=>this.magnifier,h=>this._magnifierView.magnifier=h,kt),y(()=>this.renderingOptions,h=>t.renderingOptions=h,kt),y(()=>this.highlightOptions,h=>t.highlightOptions=h,kt),y(()=>this.state.id,()=>t.state=this.state,kt)],"map-view"),this._updateStageChildren();const o=this._resolveWhenReady;this._resolveWhenReady=[],o.forEach(h=>h(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[i,e],spatialReference:t,rotation:n,scale:s}=this.state.paddedViewState,r=new X({x:i,y:e,spatialReference:t});this._set("viewpoint",null),this._set("extent",null),this._set("center",r),this._set("zoom",-1),this._set("rotation",n),this._set("scale",s),this._set("spatialReference",t),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this._stage.addChild(e.container)});const i=this.graphicsView;this._stage.addChild(i.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const i=new Rd(Sc.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",i);const e=new Hl({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ul(i)});this.frameTask.graphicsView=e,this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){const i=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,i.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(i){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const e=this.state.paddedViewState.clone();if(P(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=e.scale;else{const l=e.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=l}const t=e.clone(),[n,s]=e.center;let r=null;try{r=this._project(new X({x:n,y:s,spatialReference:e.spatialReference}),i)}catch(l){Hi()||S.getLogger(this.declaredClass).warn(new Tr("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:r==null?void 0:r.toJSON(),spatialReference:i,error:l}))}r||(r=new X({x:0,y:0,spatialReference:i}));const o=Hs(new He({targetGeometry:new X,scale:0,rotation:0}),e.viewpoint,r);t.viewpoint=o;try{const d=[e.size[0]/2,e.size[1]/2],h=[d[0]+20,d[1]],u=e.toMap([0,0],h),{x:p,y:g}=this._project(new X({x:u[0],y:u[1],spatialReference:e.spatialReference}),i);u[0]=p,u[1]=g,t.toScreen(u,u);const f=nm(d,u,h),b=Math.hypot(u[0]-d[0],u[1]-d[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(o.rotation=0,o.targetGeometry=new X({x:0,y:0,spatialReference:i})):(o.scale*=b,o.scale>xe("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints").constrain(o,void 0),this._get("state").viewpoint=o,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};k.type="2d",a([c({readOnly:!0})],k.prototype,"animationManager",void 0),a([c({constructOnly:!0})],k.prototype,"deactivatedWebGLExtensions",void 0),a([c({constructOnly:!0})],k.prototype,"debugWebGLExtensions",void 0),a([c({readOnly:!0})],k.prototype,"featuresTilingScheme",void 0),a([c({readOnly:!0})],k.prototype,"fullOpacity",void 0),a([c({readOnly:!0})],k.prototype,"graphicsTileStore",null),a([c()],k.prototype,"graphicsView",void 0),a([c({readOnly:!0})],k.prototype,"state",void 0),a([c()],k.prototype,"initialExtentRequired",null),a([c()],k.prototype,"labelManager",void 0),a([c({readOnly:!0})],k.prototype,"resourceManager",null),a([c({readOnly:!0})],k.prototype,"textureManager",null),a([c({readOnly:!0})],k.prototype,"mapViewNavigation",void 0),a([c({constructOnly:!0})],k.prototype,"renderCanvas",void 0),a([c()],k.prototype,"renderingOptions",void 0),a([c({readOnly:!0})],k.prototype,"rendering",void 0),a([c({constructOnly:!0})],k.prototype,"supersampleScreenshotsEnabled",void 0),a([c({readOnly:!0})],k.prototype,"supportsGround",void 0),a([c()],k.prototype,"_stationaryTimer",void 0),a([c()],k.prototype,"_defaultsFromMapSettings",null),a([c()],k.prototype,"_pePromise",void 0),a([c({readOnly:!0})],k.prototype,"typeSpecificPreconditionsReady",null),a([c()],k.prototype,"animation",null),a([c({type:xg})],k.prototype,"background",null),a([c({value:null,type:X,dependsOn:["state.id","ready"]})],k.prototype,"center",null),a([c({type:$l})],k.prototype,"constraints",null),a([c({value:null,type:vi,dependsOn:["state.id","ready"]})],k.prototype,"extent",null),a([c()],k.prototype,"floors",void 0),a([c({type:Fl})],k.prototype,"highlightOptions",void 0),a([c({readOnly:!0})],k.prototype,"inputManager",void 0),a([c()],k.prototype,"map",void 0),a([c({value:{top:0,right:0,bottom:0,left:0},cast:i=>({top:0,right:0,bottom:0,left:0,...i})})],k.prototype,"padding",null),a([c()],k.prototype,"resizeAlign",void 0),a([c({readOnly:!0,dependsOn:["state.id"]})],k.prototype,"resolution",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"rotation",null),a([c({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"scale",null),a([c({constructOnly:!0})],k.prototype,"spatialReferenceLocked",void 0),a([c()],k.prototype,"stationary",null),a([c({type:Rl,readOnly:!0})],k.prototype,"timeline",void 0),a([c({readOnly:!0})],k.prototype,"type",void 0),a([c({readOnly:!0})],k.prototype,"updating",null),a([c({value:null,type:He,dependsOn:["state.id","ready"]})],k.prototype,"viewpoint",null),a([c({value:-1,dependsOn:["state.id","ready"]})],k.prototype,"zoom",null),a([c({readOnly:!0})],k.prototype,"navigating",null),a([c({type:Bl})],k.prototype,"ui",void 0),k=a([I("esri.views.MapView")],k);const kg=k;function Qs(i){var t,n;const e=i.getObjectId();return e?`${((t=i.layer)==null?void 0:t.uid)??((n=i.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${i.uid}`}function ta(i,e,t,n,s){return r=>{if(r instanceof jt){if(r.layer===i)s==null||s();else{const o=i.allLayerViews.find(l=>l.layer===r.layer);o&&(n==null||n(o))}t(Qs(r))}else{const o=i.allLayerViews.find(l=>l.layer===r);o&&e(o)}}}function ia(i,e){if(i)if(Er(i))for(const t of i)if(Er(t))for(const n of t)e(n);else e(t);else e(i)}function Pg(i){return(i==null?void 0:i.declaredClass)==="esri.WebMap"}const na=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],st=(()=>{if(typeof document>"u")return!1;const i=na[0],e={};for(const t of na)if((t==null?void 0:t[1])in document){for(const[s,r]of t.entries())e[i[s]]=r;return e}return!1})(),sa={change:st.fullscreenchange,error:st.fullscreenerror};let Me={request(i=document.documentElement,e){return new Promise((t,n)=>{const s=()=>{Me.off("change",s),t()};Me.on("change",s);const r=i[st.requestFullscreen](e);r instanceof Promise&&r.then(s).catch(n)})},exit(){return new Promise((i,e)=>{if(!Me.isFullscreen){i();return}const t=()=>{Me.off("change",t),i()};Me.on("change",t);const n=document[st.exitFullscreen]();n instanceof Promise&&n.then(t).catch(e)})},toggle(i,e){return Me.isFullscreen?Me.exit():Me.request(i,e)},onchange(i){Me.on("change",i)},onerror(i){Me.on("error",i)},on(i,e){const t=sa[i];t&&document.addEventListener(t,e,!1)},off(i,e){const t=sa[i];t&&document.removeEventListener(t,e,!1)},raw:st};Object.defineProperties(Me,{isFullscreen:{get:()=>Boolean(document[st.fullscreenElement])},element:{enumerable:!0,get:()=>document[st.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[st.fullscreenEnabled])}});st||(Me={isEnabled:!1});const ni=Me;const Fg={__name:"MyMap",setup(i){const e=Ur(null),t=Ur(null);let n=new Dd({urlTemplate:"http://ais.dongsy.com.cn:31637/arcgis/rest/services/AIS/portsMap/MapServer?f=jsapi",subDomains:["t0","t1","t2","t3","t4","t5","t6","t7"],copyright:"ais2023"});Vd(()=>{Ts.apiKey="AAPK4724d032e1c54f9ca4d0c71a8ef7d493QHMmJSOuOyQM4g0qr-LMRsB39-3Ar-ruUOUADTT6J0fRu8pGLU5m7JOsAgj_gd8V";const o=new La({basemap:{baseLayers:[n]}});new kg({map:o,center:[125.26146,43.8198],zoom:19,container:"viewDiv",constraints:{snapToZoom:!0}}).ui.remove("attribution"),t.value.style.visibility="visible"});function s(){ni.isEnabled&&!ni.isFullscreen&&ni.request(e.value)}function r(){ni.isEnabled&&ni.isFullscreen&&ni.exit()}return(o,l)=>{const d=jr("FullScreen"),h=jr("CloseBold");return Bd(),Nd("div",{id:"viewDiv",ref_key:"arcmap",ref:e,class:"bg-white"},[zd("div",{class:"screenfull mt-5 w-10",ref_key:"full",ref:t},[Wr(d,{onClick:s,class:"text-red-800"}),Wr(h,{onClick:r,class:"text-red-800"})],512)],512)}}},Rg=Od(Fg,[["__scopeId","data-v-205bc29d"]]),Gy=Object.freeze(Object.defineProperty({__proto__:null,default:Rg},Symbol.toStringTag,{value:"Module"}));export{jp as $,Il as G,Gy as M,It as P,hy as R,Un as S,gi as a,dy as b,Fl as c,tm as d,Rl as e,Oy as m,Ml as n,nm as p,He as u};
