import{e as $,r as d,p as j,a as p,v as h}from"./promiseUtils-3ce2a460.js";import{P as w,r as L,n as q}from"./cast-4d1aa82d.js";import{p as m}from"./typedArrayUtil-c81d173a.js";import"./string-bf9c68ed.js";import"./Error-9392329b.js";function x(n,o,t={}){return a(n,o,t,v)}function B(n,o,t={}){return a(n,o,t,y)}function a(n,o,t={},e){let r=null;const u=t.once?(i,l)=>{e(i)&&(m(r),o(i,l))}:(i,l)=>{e(i)&&o(i,l)};if(r=w(n,u,t.sync,t.equals),t.initial){const i=n();u(i,i)}return r}function C(n,o,t,e={}){let r=null,u=null,i=null;function l(){var c;r&&u&&(u.remove(),(c=e.onListenerRemove)==null||c.call(e,r),r=null,u=null)}function f(c){e.once&&e.once&&m(i),t(c)}const P=x(n,(c,R)=>{var s;l(),$(c)&&(r=c,u=d(c,o,f),(s=e.onListenerAdd)==null||s.call(e,c))},{sync:e.sync,initial:!0});return i=q(()=>{P.remove(),l()}),i}function D(n,o){return A(n,y,o)}function A(n,o,t){if(j(t))return Promise.reject(p());const e=n();if(o!=null&&o(e))return Promise.resolve(e);let r=null;function u(){r=m(r)}return new Promise((i,l)=>{r=L([h(t,()=>{u(),l(p())}),a(n,f=>{u(),i(f)},{sync:!1,once:!0},o??v)])})}function v(n){return!0}function y(n){return!!n}const E={sync:!0},F={initial:!0},G={sync:!0,initial:!0};export{E as U,C as a,B as f,F as h,D as j,x as l,G as w};
