import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-16c6134d.js";import{a as n}from"./Error-9392329b.js";import{e as b}from"./ItemCache-28393d1d.js";import{r as u,c as w}from"./typedArrayUtil-c81d173a.js";import{F as v,a as z}from"./aaBoundingBox-55a55434.js";import{t as _,q as g}from"./symbols-426355d5.js";import"./string-bf9c68ed.js";import"./promiseUtils-3ce2a460.js";import"./MemCache-c220a92a.js";import"./cast-4d1aa82d.js";import"./ensureType-8c80e8c7.js";import"./nextTick-3ee5a785.js";import"./Extent-52b65909.js";import"./mathUtils-505ef34b.js";import"./CIMSymbol-33f517af.js";import"./enumeration-de0a766e.js";import"./fieldUtils-c41301b0.js";import"./geometry-8c15a791.js";import"./Polyline-7f90e3cc.js";import"./typeUtils-f38bdb16.js";import"./Color-46910694.js";import"./colorUtils-639f4d25.js";import"./screenUtils-7afeb41c.js";import"./opacityUtils-a1e441cd.js";import"./persistableUrlUtils-abff3ce1.js";import"./Collection-54857936.js";import"./Evented-d69b5d66.js";import"./SimpleObservable-7e8b69a3.js";import"./collectionUtils-cc5781ab.js";import"./Portal-fe1a007c.js";import"./Loadable-e19fba09.js";import"./Promise-24c50191.js";import"./locale-30120714.js";import"./PortalGroup-45834c06.js";import"./PortalUser-8de15b25.js";import"./Clonable-ad03ca71.js";let m=c();function c(){return new b(50)}function cr(){m=c()}function ar(r,t){if(r.type==="icon")return a(r,t);if(r.type==="object")return f(r,t);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function fr(r,t){if(r.type==="icon")return j(r,t);if(r.type==="object")return B(r,t);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function a(r,t){var e,i;if((e=r.resource)!=null&&e.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return u(t)?[t,t]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,t){return a(r,t).then(e=>{if(r.size==null)return e;const i=e[0]/e[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(t=>t.data)}function f(r,t){return S(r,t).then(e=>v(e))}async function B(r,t){const e=await f(r,t);return _(e,r)}async function S(r,t){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),s=m.get(o);if(s!==void 0)return s;const y=await h(()=>import("./objectResourceUtils-f2f39e01.js").then(l=>l.o),["./objectResourceUtils-f2f39e01.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-c81d173a.js","./mat3-5b850236.js","./mathUtils-505ef34b.js","./mat3f64-221ce671.js","./mat4-63147b80.js","./mat4f64-1413b4a7.js","./aaBoundingBox-55a55434.js","./Extent-52b65909.js","./cast-4d1aa82d.js","./string-bf9c68ed.js","./Error-9392329b.js","./ensureType-8c80e8c7.js","./nextTick-3ee5a785.js","./promiseUtils-3ce2a460.js","./BufferView-9443e496.js","./vec2-3a431caf.js","./vec33-b4c9c39b.js","./DefaultMaterial_COLOR_GAMMA-415e0d2c.js","./types-e1c0a5bf.js","./request-16c6134d.js","./preload-helper-41c905a7.js","./asyncUtils-d59cad3c.js","./enums-64ab819c.js","./Version-e29b3f14.js","./quat-a627ac9e.js","./quatf64-3363c48e.js","./compilerUtils-db2fe354.js","./resourceUtils-71fe9113.js","./basicInterfaces-b7051eb1.js","./Indices-84eb2539.js","./mat3f32-6c416b1c.js","./vec2f32-eaf29605.js","./byteSizeEstimations-90c5a50d.js","./NestedMap-1b5db22e.js","./requestImageUtils-fb316d8d.js","./Util-f84403e5.js","./sphere-f01cef25.js","./vec4f64-aa64c7e9.js","./vec2f64-22afc56f.js","./VertexAttribute-15d1866a.js","./Evented-d69b5d66.js","./OrderIndependentTransparency-e1b3a745.js","./assets-86d142ff.js","./Texture-5c56cee1.js","./context-util-2fc70f17.js","./VertexArrayObject-2b4e90de.js","./VertexElementDescriptor-2925c6af.js","./ViewingMode-fb6259a5.js","./InterleavedLayout-8a88b926.js","./vec3f32-ad1dc57f.js","./parser-7deabd3b.js","./colorUtils-639f4d25.js","./screenUtils-7afeb41c.js","./doublePrecisionUtils-e3c3d0d8.js","./symbolColorUtils-3109747d.js"],import.meta.url),p=await y.fetch(o,{disableTextures:!0});return m.put(o,p.referenceBoundingBox),p.referenceBoundingBox}let e=null;if(r.resource&&r.resource.primitive&&(e=z(g(r.resource.primitive)),u(t)))for(let o=0;o<e.length;o++)e[o]*=t;return e?Promise.resolve(e):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{cr as clearBoundingBoxCache,a as computeIconLayerResourceSize,ar as computeLayerResourceSize,fr as computeLayerSize,f as computeObjectLayerResourceSize};
